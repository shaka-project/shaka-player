# Changelog

## [4.15.4](https://github.com/shaka-project/shaka-player/compare/v4.15.3...v4.15.4) (2025-06-23)


### Bug Fixes

* Avoid throw BUFFER_READ_OUT_OF_BOUNDS when not necessary ([#8753](https://github.com/shaka-project/shaka-player/issues/8753)) ([9931bea](https://github.com/shaka-project/shaka-player/commit/9931bea25e1f4a2a50e3160c9b09c9380f75be3a))
* Close segment index when calling to unloadTextStream ([#8754](https://github.com/shaka-project/shaka-player/issues/8754)) ([72fd217](https://github.com/shaka-project/shaka-player/commit/72fd21799fb2464b321d7053e5f94b24643f0079))
* **DASH:** Fix L3D streams (with k parameter) without $SubNumber$ ([#8770](https://github.com/shaka-project/shaka-player/issues/8770)) ([105c800](https://github.com/shaka-project/shaka-player/commit/105c8000ac12d2b91ac1ee9a49e03566551d1744))
* **DASH:** Use the correct Representation ID for Uri substitution of media segments ([#8760](https://github.com/shaka-project/shaka-player/issues/8760)) ([6e8f434](https://github.com/shaka-project/shaka-player/commit/6e8f434646377cf20e0fc4736b1add1d77fa3921))
* **Demo:** Fix keep custom config on page reload ([#8776](https://github.com/shaka-project/shaka-player/issues/8776)) ([5c5efb5](https://github.com/shaka-project/shaka-player/commit/5c5efb5083eecb4dfd44db5fed0d650f45feff4f))
* **Demo:** Fix keep custom config on page reload ([#8777](https://github.com/shaka-project/shaka-player/issues/8777)) ([7d67366](https://github.com/shaka-project/shaka-player/commit/7d67366be594dda08e9d28bcff09b40b7394b0ac))
* Don't cancel trick play near to live edge if rate is less than 1 ([#8772](https://github.com/shaka-project/shaka-player/issues/8772)) ([5d65576](https://github.com/shaka-project/shaka-player/commit/5d655766e333cc6f972172a86bbed5f2da520f1f))
* Fix 4k stream support within browser env on Tizen ([#8764](https://github.com/shaka-project/shaka-player/issues/8764)) ([3eecf28](https://github.com/shaka-project/shaka-player/commit/3eecf284bd6e26d0c6fe75eac3b6c663367d6355))
* **HLS:** mediaSequenceToStartTime isn't maintained correctly for AUDIO manifest ([#8784](https://github.com/shaka-project/shaka-player/issues/8784)) ([f8712a4](https://github.com/shaka-project/shaka-player/commit/f8712a481e0aacf839dde502ca717a6f2633a723))
* Reset text visibility on unload ([#8775](https://github.com/shaka-project/shaka-player/issues/8775)) ([5e0c0e8](https://github.com/shaka-project/shaka-player/commit/5e0c0e86120eb7af3185e1240ceff1141f68e15a))
* **UI:** Disable keyboard controls when there is not asset loaded ([#8766](https://github.com/shaka-project/shaka-player/issues/8766)) ([64bbde5](https://github.com/shaka-project/shaka-player/commit/64bbde5ea0246d084b72003382724f8e9946d216))
* **UI:** Fix fullscreen doesnâ€™t work on iPad (Edge/Chrome) ([#8757](https://github.com/shaka-project/shaka-player/issues/8757)) ([5dbac62](https://github.com/shaka-project/shaka-player/commit/5dbac6216738fef5aaa400f36c2e94448c9418ed))
* **UI:** Fix PageDown and PageUp shortcuts ([#8769](https://github.com/shaka-project/shaka-player/issues/8769)) ([49b86ff](https://github.com/shaka-project/shaka-player/commit/49b86ff8e3b1c9120a21c3e9acadd37e9197b19d))
* **UI:** Fix unhandled rejection on remote button ([#8778](https://github.com/shaka-project/shaka-player/issues/8778)) ([bf2f22c](https://github.com/shaka-project/shaka-player/commit/bf2f22cd62ab0977b354ff00b661c8089d916e64))
* **UI:** Make the overflow menu visually smoother ([#8773](https://github.com/shaka-project/shaka-player/issues/8773)) ([14f93ba](https://github.com/shaka-project/shaka-player/commit/14f93ba274ed8336d4caaba9d30182771a499e93))
* **UI:** The playback time displayed in the seek bar is different from currentTime when click ([#8758](https://github.com/shaka-project/shaka-player/issues/8758)) ([11f0b1f](https://github.com/shaka-project/shaka-player/commit/11f0b1f4cb3d20ef3a48ad1469d1f9884f9d6258))

## [4.15.3](https://github.com/shaka-project/shaka-player/compare/v4.15.2...v4.15.3) (2025-06-16)


### Bug Fixes

* Allow change NativeTextDisplayer on runtime ([#8735](https://github.com/shaka-project/shaka-player/issues/8735)) ([51cc07d](https://github.com/shaka-project/shaka-player/commit/51cc07d399386d4503837f0ae704812469ed55cc))
* Avoid reset or changeType in MSE when not necessary ([#8744](https://github.com/shaka-project/shaka-player/issues/8744)) ([a5c5135](https://github.com/shaka-project/shaka-player/commit/a5c5135198c44b6a92570363b533be1c18791b8b))
* **CEA:** INVALID_MP4_CEA error being thrown when shouldn't be ([#8748](https://github.com/shaka-project/shaka-player/issues/8748)) ([4a231ff](https://github.com/shaka-project/shaka-player/commit/4a231ffe641ddb2a623023d33a1024b21ca2e775))
* Fix Apple Vision Pro detection ([#8732](https://github.com/shaka-project/shaka-player/issues/8732)) ([d7a1293](https://github.com/shaka-project/shaka-player/commit/d7a1293b8379f91426bea41f8612ae4b01507ec5))
* **HLS:** Fix APAC detection ([#8724](https://github.com/shaka-project/shaka-player/issues/8724)) ([7708fb2](https://github.com/shaka-project/shaka-player/commit/7708fb2e503fcca8be4a4362c24de8112bd87b08))
* **HLS:** Fix reset media source when using muxed content ([#8738](https://github.com/shaka-project/shaka-player/issues/8738)) ([d024e30](https://github.com/shaka-project/shaka-player/commit/d024e30076586fbeb252e9baf3d54bfab3c92814))
* **HLS:** Fix switching between muxed and alternate audios ([#8741](https://github.com/shaka-project/shaka-player/issues/8741)) ([381505c](https://github.com/shaka-project/shaka-player/commit/381505c14c5042f7573dd19f15e1f83009cc65ec))
* **UI:** Fix 3D detection ([#8725](https://github.com/shaka-project/shaka-player/issues/8725)) ([a693fb3](https://github.com/shaka-project/shaka-player/commit/a693fb34abeaf9a2c9fa82331486a5ab2ffc7770))
* **UI:** Fix detection of some VR formats ([#8727](https://github.com/shaka-project/shaka-player/issues/8727)) ([26ff3e2](https://github.com/shaka-project/shaka-player/commit/26ff3e2c6546f06de0748eb539fd7bc3ce163f63))
* **UI:** Only show replay button when there is a duration in the media element ([#8740](https://github.com/shaka-project/shaka-player/issues/8740)) ([ae61481](https://github.com/shaka-project/shaka-player/commit/ae614818ecb0052d6a15bfd43c8d3468cdc07302))
* **UI:** Resize overflow and settings menus when necessary ([#8742](https://github.com/shaka-project/shaka-player/issues/8742)) ([052ce48](https://github.com/shaka-project/shaka-player/commit/052ce488c1a052178a77e6d78edc4aa05fd061c1))
* **UI:** Update play button state when the player is loaded ([#8739](https://github.com/shaka-project/shaka-player/issues/8739)) ([ba73b80](https://github.com/shaka-project/shaka-player/commit/ba73b8062066b69f26aee12d50d5dc5ad5d39fee))


### Performance Improvements

* Only parse spatialVideoInfo for video segments ([#8726](https://github.com/shaka-project/shaka-player/issues/8726)) ([0fba2b6](https://github.com/shaka-project/shaka-player/commit/0fba2b600b1ff9580f6be2b875a2a4a6d80048d1))

## [4.15.2](https://github.com/shaka-project/shaka-player/compare/v4.15.1...v4.15.2) (2025-06-09)


### Bug Fixes

* Don't sort TS samples ([#8708](https://github.com/shaka-project/shaka-player/issues/8708)) ([656195b](https://github.com/shaka-project/shaka-player/commit/656195b786567c77c1f6a7699eb9eb9b6a3733c3))
* Fix bad assert on DeviceFactory ([#8705](https://github.com/shaka-project/shaka-player/issues/8705)) ([b5246dc](https://github.com/shaka-project/shaka-player/commit/b5246dc9311704c5d90cac657d3bc98efc53153c))
* Fix chopped playback in some DASH multiperiod streams ([#8717](https://github.com/shaka-project/shaka-player/issues/8717)) ([23830dd](https://github.com/shaka-project/shaka-player/commit/23830dd27352b1f481a1382fbd4ec86114ebcf05))
* NativeTextDisplayer.remove() not following the spec ([#8714](https://github.com/shaka-project/shaka-player/issues/8714)) ([0d3a1c8](https://github.com/shaka-project/shaka-player/commit/0d3a1c8a610a2352bb6bd3e96d572d568d0417f6))
* Only change appendWindowStart and appendWindowEnd when necessary ([#8716](https://github.com/shaka-project/shaka-player/issues/8716)) ([82ce1c9](https://github.com/shaka-project/shaka-player/commit/82ce1c9dfca5d48916cab3b61c3369288fdeb6d7))
* **UI:** Don't show loop button for live streams ([#8700](https://github.com/shaka-project/shaka-player/issues/8700)) ([202dc3d](https://github.com/shaka-project/shaka-player/commit/202dc3d3cebcda928a2c2213ebc597d8810f435f))
* **UI:** Only enable enableFullscreenOnRotation and forceLandscapeOnFullscreen on mobile ([#8701](https://github.com/shaka-project/shaka-player/issues/8701)) ([d2af28c](https://github.com/shaka-project/shaka-player/commit/d2af28c90014aac5950f42d707665cacbe8619a2))


### Performance Improvements

* **net:** Do not parse headers twice in XHR plugin ([#8710](https://github.com/shaka-project/shaka-player/issues/8710)) ([af085dd](https://github.com/shaka-project/shaka-player/commit/af085dd58a0e16d75b15c7d5cc9f0bbfaef66320))
* Simplify getAudioTracks internally when using src= ([#8703](https://github.com/shaka-project/shaka-player/issues/8703)) ([1181ce5](https://github.com/shaka-project/shaka-player/commit/1181ce524548d36402d7e9e3dc88c807c2974df2))

## [4.15.1](https://github.com/shaka-project/shaka-player/compare/v4.15.0...v4.15.1) (2025-06-05)


### Bug Fixes

* **Ads:** Fix interstitials when not using multiple media elements ([#8681](https://github.com/shaka-project/shaka-player/issues/8681)) ([eb957e1](https://github.com/shaka-project/shaka-player/commit/eb957e14a31a639fab7172315aec78d64577cda7))
* Fix PlayReady support on Chromium Windows ([#8683](https://github.com/shaka-project/shaka-player/issues/8683)) ([1fdf939](https://github.com/shaka-project/shaka-player/commit/1fdf939d35783f5016b9ac4ce25cb4cde83e6536))
* Fix ts parser when using B-frames ([#8696](https://github.com/shaka-project/shaka-player/issues/8696)) ([ef6300a](https://github.com/shaka-project/shaka-player/commit/ef6300a8945a5cf14838d90fd53ffd98ad655bdd))
* **UI:** Fix missing style for shaka-tooltip-status ([#8699](https://github.com/shaka-project/shaka-player/issues/8699)) ([1573a73](https://github.com/shaka-project/shaka-player/commit/1573a7366f5a230d55820aba49c96646bea5dcf7))
* **UI:** Handle video duration greater than 24 hours ([#8692](https://github.com/shaka-project/shaka-player/issues/8692)) ([92338c5](https://github.com/shaka-project/shaka-player/commit/92338c55bd4ffbc49a8424b8404d7bf5ae2c03a3))
* **UI:** Hide player labels when More Settings menu is open ([#8694](https://github.com/shaka-project/shaka-player/issues/8694)) ([3d70461](https://github.com/shaka-project/shaka-player/commit/3d70461e6be55017abfa3833f8ef3014ea359094))
* **UI:** Hide settings menus when the user changes the current time ([#8693](https://github.com/shaka-project/shaka-player/issues/8693)) ([2ed405f](https://github.com/shaka-project/shaka-player/commit/2ed405fba9a0a3e1a0d9061b72aa1107db3c15ad))


### Performance Improvements

* Simplify selectAudioTrack internally ([#8687](https://github.com/shaka-project/shaka-player/issues/8687)) ([5bcaa20](https://github.com/shaka-project/shaka-player/commit/5bcaa2055e36151c72eb11b4b725f9da45319432))

## [4.15.0](https://github.com/shaka-project/shaka-player/compare/v4.14.0...v4.15.0) (2025-06-03)


### Features

* **ABR:** Add abr.removeLatencyFromFirstPacketTime config ([#8446](https://github.com/shaka-project/shaka-player/issues/8446)) ([a8bc7e2](https://github.com/shaka-project/shaka-player/commit/a8bc7e26209bf03ec4f5068983a6d27dd22709e3))
* Add additional codec & channel count configs to Adaptation Set Criteria ([#8597](https://github.com/shaka-project/shaka-player/issues/8597)) ([ce830d7](https://github.com/shaka-project/shaka-player/commit/ce830d71fa0eae4c87c4a75bdc0e339fdd48d847))
* Add backToLiveWhenOutsideOfLiveWindow config ([#8575](https://github.com/shaka-project/shaka-player/issues/8575)) ([9406905](https://github.com/shaka-project/shaka-player/commit/9406905de750ed82269ba97f2c5644571c7f4453))
* Add Device API ([#8210](https://github.com/shaka-project/shaka-player/issues/8210)) ([970d775](https://github.com/shaka-project/shaka-player/commit/970d7756ea49b4e09caaef83f5ac0db1faf31974))
* Add getChaptersAsync method ([#8541](https://github.com/shaka-project/shaka-player/issues/8541)) ([ba56bae](https://github.com/shaka-project/shaka-player/commit/ba56bae4733639229e9a67d2cf11d47dcc25a87e))
* Add isVideoOnly method ([#8641](https://github.com/shaka-project/shaka-player/issues/8641)) ([f86245c](https://github.com/shaka-project/shaka-player/commit/f86245c9ccbffdbdd4525bfba7b654b2bf57dbc5))
* Add more info on src= tracks when the browser support it ([#8299](https://github.com/shaka-project/shaka-player/issues/8299)) ([9021bd8](https://github.com/shaka-project/shaka-player/commit/9021bd8272d2bd797d816041ec539cf011755d21))
* Add more info on src= tracks when the browser support it ([#8302](https://github.com/shaka-project/shaka-player/issues/8302)) ([77a3f56](https://github.com/shaka-project/shaka-player/commit/77a3f567bdd892ba76b2990e6d22e02fae1fceb5))
* Add oldEncrypted and newEncrypted to boundarycrossed event ([#8421](https://github.com/shaka-project/shaka-player/issues/8421)) ([fe332bd](https://github.com/shaka-project/shaka-player/commit/fe332bd333098c1f81a43b685df7e40d3f940664))
* Add queue manager ([#8649](https://github.com/shaka-project/shaka-player/issues/8649)) ([3daeac6](https://github.com/shaka-project/shaka-player/commit/3daeac65cde2ed6d9fe7c799ad3ac711a0a0dde8))
* Add useTrickPlayTrackIfAvailable method ([#8594](https://github.com/shaka-project/shaka-player/issues/8594)) ([ed69267](https://github.com/shaka-project/shaka-player/commit/ed6926796b1250e0a3bd6f3bbc4a5f7cac1ef458))
* Added MetadataAdded event ([#8282](https://github.com/shaka-project/shaka-player/issues/8282)) ([f3a8113](https://github.com/shaka-project/shaka-player/commit/f3a81136eb09df2a1807b102da4dd2e8ab87210a))
* **Ads:** Add allowStartInMiddleOfInterstitial config ([#8289](https://github.com/shaka-project/shaka-player/issues/8289)) ([c012b9c](https://github.com/shaka-project/shaka-player/commit/c012b9c690dfe23b1dde52deb9e69f5d04d7752d))
* **Ads:** Support latest spec of background in DASH overlays ([#8556](https://github.com/shaka-project/shaka-player/issues/8556)) ([91034c4](https://github.com/shaka-project/shaka-player/commit/91034c4820b7795482ba567f68114bab0004bbd2))
* **Ads:** Update DASH overlay implementation ([#8503](https://github.com/shaka-project/shaka-player/issues/8503)) ([3fab47c](https://github.com/shaka-project/shaka-player/commit/3fab47cce56b0fedccd212d936c8c52c84b265b6))
* **Cast:** Transfer side-loaded text/thumbnail/chapter tracks ([#8553](https://github.com/shaka-project/shaka-player/issues/8553)) ([1cf5cad](https://github.com/shaka-project/shaka-player/commit/1cf5cad6b055052bd6656716e6b6b60497b54b44))
* Create a new simple API for Video ([#8454](https://github.com/shaka-project/shaka-player/issues/8454)) ([99a6f25](https://github.com/shaka-project/shaka-player/commit/99a6f25bc7b88caac19d5aa4e13ee6f373a35ab5))
* **DASH:** Add support for "Spoken Subtitles" in tva:metadata:cs:AudioPurpose ([#8364](https://github.com/shaka-project/shaka-player/issues/8364)) ([ab01bb7](https://github.com/shaka-project/shaka-player/commit/ab01bb724a613612800ac989f227f6008ce1c8d6))
* **DASH:** Parse ProducerReferenceTime nodes ([#8439](https://github.com/shaka-project/shaka-player/issues/8439)) ([ce08da5](https://github.com/shaka-project/shaka-player/commit/ce08da560966419a82cf5d1f27568f1c26d0a342))
* **Demo:** Modernize cast receiver demo ([#8484](https://github.com/shaka-project/shaka-player/issues/8484)) ([22bc6aa](https://github.com/shaka-project/shaka-player/commit/22bc6aa8b91414288085d7acc6feb87ddfc32bc0))
* Expose Vast ad ID ([#8477](https://github.com/shaka-project/shaka-player/issues/8477)) ([0a651cc](https://github.com/shaka-project/shaka-player/commit/0a651ccdfa83a7c02be09793bc5917e1078638e1))
* Handle audio focus events ([#8427](https://github.com/shaka-project/shaka-player/issues/8427)) ([8dd330f](https://github.com/shaka-project/shaka-player/commit/8dd330f1a29f51c0f013e2733e9dc5dad6e139a4))
* Improve stats when using src= in Safari ([#8304](https://github.com/shaka-project/shaka-player/issues/8304)) ([251ff28](https://github.com/shaka-project/shaka-player/commit/251ff289bfb8d62e193c521e5168ec4c038c33e7))
* **LCEVC:** Add buffering support to dual track implementation ([#8516](https://github.com/shaka-project/shaka-player/issues/8516)) ([39ae0e6](https://github.com/shaka-project/shaka-player/commit/39ae0e6ab978f4cc193d16ddbc0c9ee41501e93c))
* **net:** Add networking config ([#8306](https://github.com/shaka-project/shaka-player/issues/8306)) ([36db472](https://github.com/shaka-project/shaka-player/commit/36db472d930fbf8cfbd664f1031bafefee24ed70))
* new TextDisplayer implementation to allow selecting subtitles via native API and controls ([#8520](https://github.com/shaka-project/shaka-player/issues/8520)) ([724b0b2](https://github.com/shaka-project/shaka-player/commit/724b0b2a712936f27e3930bf93391c79aa6c381a))
* **Offline:** Allow no timeout when opening IndexedDB database ([#8372](https://github.com/shaka-project/shaka-player/issues/8372)) ([8cd2c01](https://github.com/shaka-project/shaka-player/commit/8cd2c019b8efedfca2aa7c0ba0f57bba47228d35))
* **Offline:** Make timeout for opening IndexedDB configurable ([#8366](https://github.com/shaka-project/shaka-player/issues/8366)) ([5752a21](https://github.com/shaka-project/shaka-player/commit/5752a21b0f106976996035284d0986365aebcc39))
* **Preload:** Allow use custom config when creating a PreloadManager ([#8647](https://github.com/shaka-project/shaka-player/issues/8647)) ([6efaf53](https://github.com/shaka-project/shaka-player/commit/6efaf5310b40781ddb55750fbfbd017b85a108fb))
* provide option to disable usage of source elements in MSE ([#8386](https://github.com/shaka-project/shaka-player/issues/8386)) ([b0cd08b](https://github.com/shaka-project/shaka-player/commit/b0cd08be40199ab5fe2085535797b5dfc427718c))
* Provide Segment Reference to ABR Manager (via the request context) ([#8316](https://github.com/shaka-project/shaka-player/issues/8316)) ([d9b0e85](https://github.com/shaka-project/shaka-player/commit/d9b0e857e1531e82446150f75f3b945dd4284cc2))
* Shrink the size of language-mapping-list.js ([#8526](https://github.com/shaka-project/shaka-player/issues/8526)) ([7331e01](https://github.com/shaka-project/shaka-player/commit/7331e01064e0875454f3b8a1e4af22ab9ecade77))
* Simplicate Image/Thumbnails API ([#8266](https://github.com/shaka-project/shaka-player/issues/8266)) ([d2f3657](https://github.com/shaka-project/shaka-player/commit/d2f3657c966c392389ebd3ce9019a5556e9fbe2d))
* Simplicate Text and Chapters APIs ([#8264](https://github.com/shaka-project/shaka-player/issues/8264)) ([c0455d7](https://github.com/shaka-project/shaka-player/commit/c0455d781ff37a53349b6c10318e534a37c5a10f))
* Simplify getStats to support MSE-AirPlay ([#8309](https://github.com/shaka-project/shaka-player/issues/8309)) ([2d8ad94](https://github.com/shaka-project/shaka-player/commit/2d8ad94690ef76959ccc2c88d7f5a06e0570cf55))
* **Stats:** Add current codecs to stats ([#8418](https://github.com/shaka-project/shaka-player/issues/8418)) ([cbcba99](https://github.com/shaka-project/shaka-player/commit/cbcba99ecd4f9c5af5128c35b73e87a8fe3de78a))
* **UI:** Add scrollbar if necessary to statistics container ([#8424](https://github.com/shaka-project/shaka-player/issues/8424)) ([eecf58f](https://github.com/shaka-project/shaka-player/commit/eecf58f2e8122b4c2ed2f52b48096d09daf333b6))
* **UI:** Allow config cast sender URL ([#8485](https://github.com/shaka-project/shaka-player/issues/8485)) ([aa502ce](https://github.com/shaka-project/shaka-player/commit/aa502ce7daf869e379d417cc341ff74009fccae5))
* **UI:** Allow forceDisconnect when destroy the UI ([#8472](https://github.com/shaka-project/shaka-player/issues/8472)) ([7c3df3b](https://github.com/shaka-project/shaka-player/commit/7c3df3b70771216982609ea49a5324e3e82ac249))
* **UI:** Allow hide/show controls on tap ([#8398](https://github.com/shaka-project/shaka-player/issues/8398)) ([06a8785](https://github.com/shaka-project/shaka-player/commit/06a87857a31e50a11a04120e84b2266eb693b9fc))
* **UI:** Customize scrollbar style ([#8419](https://github.com/shaka-project/shaka-player/issues/8419)) ([a08d464](https://github.com/shaka-project/shaka-player/commit/a08d464fca0fd158b7a51c090d8d6cd6373c3f47))
* **UI:** Disable add a cast button automatically on new UI ([#8449](https://github.com/shaka-project/shaka-player/issues/8449)) ([b0b556e](https://github.com/shaka-project/shaka-player/commit/b0b556e0f6cd3ce557a971d2a78f558ef49b4bbf))
* **UI:** Fix style of cast button on modern UI ([#8451](https://github.com/shaka-project/shaka-player/issues/8451)) ([a2475e8](https://github.com/shaka-project/shaka-player/commit/a2475e81cfe21b3ef61cebd30a24a173174404c7))
* **UI:** Hide volume slider when not hovering over the mute button ([#8426](https://github.com/shaka-project/shaka-player/issues/8426)) ([74fda8b](https://github.com/shaka-project/shaka-player/commit/74fda8b6580aa4912410df87860826e4d00c0c8f))
* **UI:** Modernization of the UI ([#8409](https://github.com/shaka-project/shaka-player/issues/8409)) ([1c85396](https://github.com/shaka-project/shaka-player/commit/1c8539698c91c62120b5ca146a35c537c4b03c3e))
* **UI:** Optimize default UI for small screens ([#8436](https://github.com/shaka-project/shaka-player/issues/8436)) ([f760dbd](https://github.com/shaka-project/shaka-player/commit/f760dbd339f4d68e69b3088cfc7f9d2296fd2a9f))
* **UI:** Optimize the buttons that appear when using a Smart TV ([#8429](https://github.com/shaka-project/shaka-player/issues/8429)) ([a8fc3bd](https://github.com/shaka-project/shaka-player/commit/a8fc3bd22b63861a69985ad25f131204e8d7a690))
* **UI:** Resolution selector should display width for vertical videos ([#8502](https://github.com/shaka-project/shaka-player/issues/8502)) ([94bdb7c](https://github.com/shaka-project/shaka-player/commit/94bdb7c0890a77dcd1c4fbef29ef0e7b9bfe5ee9))
* **UI:** Show current playback rate and quality without hover ([#8437](https://github.com/shaka-project/shaka-player/issues/8437)) ([9992d67](https://github.com/shaka-project/shaka-player/commit/9992d670e1e7270ea1bff9b46bf80571bef8b217))
* **UI:** Show the quality mark when using src= ([#8511](https://github.com/shaka-project/shaka-player/issues/8511)) ([0aa886d](https://github.com/shaka-project/shaka-player/commit/0aa886d940633c98db0e0408e079205c3d988b14))
* **UI:** Update some selectors after loading content always ([#8465](https://github.com/shaka-project/shaka-player/issues/8465)) ([20659db](https://github.com/shaka-project/shaka-player/commit/20659db05547cc251395729ef2742f1c67236943))
* Use Date for playback start time ([#8415](https://github.com/shaka-project/shaka-player/issues/8415)) ([fc59408](https://github.com/shaka-project/shaka-player/commit/fc5940806793be5229ba6d17efb4079ff7c0a734))


### Bug Fixes

* Add a small fudge to prefetch eviction ([#8470](https://github.com/shaka-project/shaka-player/issues/8470)) ([9d3b586](https://github.com/shaka-project/shaka-player/commit/9d3b5863409c949866004c1c0d2fa20bb34f3ada))
* Add new crossBoundaryStrategy for Apple browsers ([#8345](https://github.com/shaka-project/shaka-player/issues/8345)) ([3c60254](https://github.com/shaka-project/shaka-player/commit/3c60254c1b88a1b101c38b8e942d1e4f4a970d8c))
* Add new parameters to thumbnails in order to work with cast proxy ([#8554](https://github.com/shaka-project/shaka-player/issues/8554)) ([023d06a](https://github.com/shaka-project/shaka-player/commit/023d06a6cb798fd0739fadb48a80e225c6544830))
* Add optional content workaround to force ENCA.ChannelCount to 2 for EAC-3 Audio init segments ([#8517](https://github.com/shaka-project/shaka-player/issues/8517)) ([bd97fb1](https://github.com/shaka-project/shaka-player/commit/bd97fb104759b7b661baac446eca81a9c6b6adf3))
* Add support to crossBoundaryStrategy when using HLS ([#8343](https://github.com/shaka-project/shaka-player/issues/8343)) ([6d5cdb6](https://github.com/shaka-project/shaka-player/commit/6d5cdb689e4edfef438dbb7bf593df43c84166e4))
* Add vp9 to normalized codec list ([#8416](https://github.com/shaka-project/shaka-player/issues/8416)) ([c6459d5](https://github.com/shaka-project/shaka-player/commit/c6459d54f13f8ba12a25e88fe7e7298c3bd29ebd))
* **Ads:** Destroy preloadManagers on stop interstitials ([#8268](https://github.com/shaka-project/shaka-player/issues/8268)) ([ace6cb7](https://github.com/shaka-project/shaka-player/commit/ace6cb7202dadeb68820aa12054e287dde369ab5))
* **Ads:** Fix overlay interstitial when the seeked is outside of the current window ([#8288](https://github.com/shaka-project/shaka-player/issues/8288)) ([9fd5900](https://github.com/shaka-project/shaka-player/commit/9fd59002bbf2884c977258b810506f53d72b322e))
* Allow use Chapter API on browsers without track element support ([#8515](https://github.com/shaka-project/shaka-player/issues/8515)) ([6271282](https://github.com/shaka-project/shaka-player/commit/627128252e904b23ab6d6c4eefb1324c8c4a74cd))
* Allow use isLive, seekRange and isAudioOnly when using remote playback ([#8629](https://github.com/shaka-project/shaka-player/issues/8629)) ([dabb562](https://github.com/shaka-project/shaka-player/commit/dabb562ad7958ad203640ba8579b1947d5db5dc6))
* Avoid installing/uninstalling PatchedMediaKeysApple polyfill twice ([#8593](https://github.com/shaka-project/shaka-player/issues/8593)) ([fb120f8](https://github.com/shaka-project/shaka-player/commit/fb120f89c253e82dbdf31354788fcfc9a2ec459b))
* Avoid reset MSE engine when using remote playback ([#8626](https://github.com/shaka-project/shaka-player/issues/8626)) ([ce9db86](https://github.com/shaka-project/shaka-player/commit/ce9db86da4d0953401371a320051637ed04ca597))
* Cancel trick play when current time catch the seek range ([#8410](https://github.com/shaka-project/shaka-player/issues/8410)) ([e0770ff](https://github.com/shaka-project/shaka-player/commit/e0770ff489fb68bc5de31349fbfc7c5e77b1254c))
* **Cast:** Add response to async calls on cast proxy ([#8549](https://github.com/shaka-project/shaka-player/issues/8549)) ([c6bfc34](https://github.com/shaka-project/shaka-player/commit/c6bfc341ca5049ab031489e05e21e3d46eb1aa36))
* **Cast:** Fix getChaptersTracks method while casting ([#8552](https://github.com/shaka-project/shaka-player/issues/8552)) ([586051d](https://github.com/shaka-project/shaka-player/commit/586051d785beb4fd8fbadb627c36e6b222e6da84))
* **CEA:** cache and restore cea decoders based on the period continuity for dash content that uses SegmentTemplate ([#8378](https://github.com/shaka-project/shaka-player/issues/8378)) ([6e029d1](https://github.com/shaka-project/shaka-player/commit/6e029d17533683ae54962794b4dd652805be965f))
* **changelog:** Add missing ref to PR [#8156](https://github.com/shaka-project/shaka-player/issues/8156) in v4.14.0 ([#8259](https://github.com/shaka-project/shaka-player/issues/8259)) ([b5a261a](https://github.com/shaka-project/shaka-player/commit/b5a261aed91b8da211af1540c0e318f0b2bdf873))
* Check addTextTrack in video ([#8388](https://github.com/shaka-project/shaka-player/issues/8388)) ([70a8317](https://github.com/shaka-project/shaka-player/commit/70a831737ccac79c6d3d386380fc9c32b826b2b8))
* Closure compiler removes call to modifyCueCallback in src= mode ([#8261](https://github.com/shaka-project/shaka-player/issues/8261)) ([b7865b4](https://github.com/shaka-project/shaka-player/commit/b7865b43233a95da31c252a4b6bc54c2e8fe83dd))
* Count line break characters as ASCII ([#8376](https://github.com/shaka-project/shaka-player/issues/8376)) ([b809646](https://github.com/shaka-project/shaka-player/commit/b80964661455a235ccd6666321a8b31fa434167a)), closes [#8336](https://github.com/shaka-project/shaka-player/issues/8336)
* **DASH:** Fix infinite buffering on end of content ([#8677](https://github.com/shaka-project/shaka-player/issues/8677)) ([6b976db](https://github.com/shaka-project/shaka-player/commit/6b976dbcb908c9da6030925ccbc400f324bb2b26)), closes [#8672](https://github.com/shaka-project/shaka-player/issues/8672)
* **DASH:** Fix live playback with Period duration ([#8493](https://github.com/shaka-project/shaka-player/issues/8493)) ([a7abb29](https://github.com/shaka-project/shaka-player/commit/a7abb2967afbe41ef87f10b7d8af65cbe0253912)), closes [#8481](https://github.com/shaka-project/shaka-player/issues/8481)
* **DASH:** Inconsistent DRM across periods when using clearkeys ([#8602](https://github.com/shaka-project/shaka-player/issues/8602)) ([3c32f7a](https://github.com/shaka-project/shaka-player/commit/3c32f7a049b4036c194bcc63484ab2c3428f321a)), closes [#8559](https://github.com/shaka-project/shaka-player/issues/8559)
* **Demo:** Fix bad tooltip position of last control panel element ([#8658](https://github.com/shaka-project/shaka-player/issues/8658)) ([8065cf9](https://github.com/shaka-project/shaka-player/commit/8065cf9f3c007b0b2e4965013f5a3d38f510a87c)), closes [#8655](https://github.com/shaka-project/shaka-player/issues/8655)
* Detect and skip stall correctly ([#8390](https://github.com/shaka-project/shaka-player/issues/8390)) ([fdd9652](https://github.com/shaka-project/shaka-player/commit/fdd9652199c044091cfc5ef1fe10e50eb34842d5))
* Detect screen change to update ABR according HDR vs SDR ([#8606](https://github.com/shaka-project/shaka-player/issues/8606)) ([5413b5f](https://github.com/shaka-project/shaka-player/commit/5413b5fc4b858e42ebce7c3a144f5698050e5d9b))
* Disable translate of cues when using UITextDisplayer ([#8636](https://github.com/shaka-project/shaka-player/issues/8636)) ([b987662](https://github.com/shaka-project/shaka-player/commit/b9876625d3fc7b12c43c2717bf914d6e8a135c53))
* Do not fire metadataadded event for duplicated cues ([#8617](https://github.com/shaka-project/shaka-player/issues/8617)) ([ffd048c](https://github.com/shaka-project/shaka-player/commit/ffd048c98d0481977bfeb60dc2625a150016d116))
* Don't allow MSE reset in middle of a reset ([#8338](https://github.com/shaka-project/shaka-player/issues/8338)) ([1c2c8c3](https://github.com/shaka-project/shaka-player/commit/1c2c8c34064ec1b917a54e83f98e4768d4b7483d))
* Don't return video tracks when using remote playback ([#8627](https://github.com/shaka-project/shaka-player/issues/8627)) ([79e62bc](https://github.com/shaka-project/shaka-player/commit/79e62bca0398934dccf53ce34469d04b2cd88ece))
* External text tracks in src mode related issues ([#8527](https://github.com/shaka-project/shaka-player/issues/8527)) ([f9c8028](https://github.com/shaka-project/shaka-player/commit/f9c802824146ac9758df7b81152bef92077d290d))
* Fix audio selection by channel count ([#8286](https://github.com/shaka-project/shaka-player/issues/8286)) ([b9625c7](https://github.com/shaka-project/shaka-player/commit/b9625c7f349587f30edf7bf039232b8c8da2db30))
* Fix buffering event on native playback ([#8310](https://github.com/shaka-project/shaka-player/issues/8310)) ([a18b37f](https://github.com/shaka-project/shaka-player/commit/a18b37f51bc595acd02f514acbdfce0d2fa370e4))
* Fix cast proxy args for side-loaded tracks ([#8560](https://github.com/shaka-project/shaka-player/issues/8560)) ([d7f056a](https://github.com/shaka-project/shaka-player/commit/d7f056a17fe6c1cc11fe93d59d88d15a4aa32748))
* Fix config failures with multiple references to an input array ([#8585](https://github.com/shaka-project/shaka-player/issues/8585)) ([5c94164](https://github.com/shaka-project/shaka-player/commit/5c941648f93994bc2a89d7924e5574a20561d34e)), closes [#8478](https://github.com/shaka-project/shaka-player/issues/8478)
* Fix cross boundary when playing at higher playbackRates ([#8392](https://github.com/shaka-project/shaka-player/issues/8392)) ([05f3318](https://github.com/shaka-project/shaka-player/commit/05f3318bee197bd03138fefcaad74827443e8464))
* Fix destroy CastProxy on browser without Cast support ([#8294](https://github.com/shaka-project/shaka-player/issues/8294)) ([b2a1d35](https://github.com/shaka-project/shaka-player/commit/b2a1d359e66940c779bb3ac6d65870f16c3a4d5c))
* Fix dispatch complete event when the percentage is greater than 100 ([#8643](https://github.com/shaka-project/shaka-player/issues/8643)) ([81b2ff5](https://github.com/shaka-project/shaka-player/commit/81b2ff5390d1de87077095b727633275745649bc))
* Fix exception updating partial config with deprecated fields ([#8512](https://github.com/shaka-project/shaka-player/issues/8512)) ([9f18e9f](https://github.com/shaka-project/shaka-player/commit/9f18e9fd4b03442a6eede5ba7472f372c0496a57))
* Fix Firefox PlayReady support ([#8497](https://github.com/shaka-project/shaka-player/issues/8497)) ([f6df1f0](https://github.com/shaka-project/shaka-player/commit/f6df1f0b96cec7e0ff864c8a93e7ba13d66b80d2))
* Fix garbage-collection issue in safari on mediaCapabilities polyfill ([#8613](https://github.com/shaka-project/shaka-player/issues/8613)) ([394ed7b](https://github.com/shaka-project/shaka-player/commit/394ed7bed7a93c223dbdfbcd432d64265d9550bd))
* Fix getAudioTracks when audioId is null but exists originalAudioId ([#8462](https://github.com/shaka-project/shaka-player/issues/8462)) ([82b9541](https://github.com/shaka-project/shaka-player/commit/82b9541d1ae9defa083a71e8c05120691441b2a0))
* Fix getAudioTracks when using remote playback ([#8630](https://github.com/shaka-project/shaka-player/issues/8630)) ([952590e](https://github.com/shaka-project/shaka-player/commit/952590e780f01fb38021141330f50267e8caa8ba))
* Fix getVideoTracks when videoId is null but exists originalVideoId ([#8463](https://github.com/shaka-project/shaka-player/issues/8463)) ([5627153](https://github.com/shaka-project/shaka-player/commit/5627153ceed4666f03e40017d4bc5421b26d3998))
* Fix initial buffering state when we load a stream ([#8500](https://github.com/shaka-project/shaka-player/issues/8500)) ([ed48de9](https://github.com/shaka-project/shaka-player/commit/ed48de9ca4f22ddab3021bc36f3d621ee1083720))
* Fix MediaCapabilities polyfill on Vizio ([#8542](https://github.com/shaka-project/shaka-player/issues/8542)) ([d15e21c](https://github.com/shaka-project/shaka-player/commit/d15e21cb9141a13c118c7953c79db33f71f0a7c2))
* Fix memory leak on Metadata and EMSG timelines ([#8570](https://github.com/shaka-project/shaka-player/issues/8570)) ([59a1254](https://github.com/shaka-project/shaka-player/commit/59a12548bb7eba7274c936d001542bfba5214655)), closes [#8535](https://github.com/shaka-project/shaka-player/issues/8535)
* Fix metadata timestamp when using raw segments ([#8654](https://github.com/shaka-project/shaka-player/issues/8654)) ([602515c](https://github.com/shaka-project/shaka-player/commit/602515c6f769bc54e012065b04f1146bb4fe1089))
* Fix MSE recovery on Apple platform ([#8341](https://github.com/shaka-project/shaka-player/issues/8341)) ([82da6b1](https://github.com/shaka-project/shaka-player/commit/82da6b1fb423c540bce427deb6ab282aa676c623))
* Fix NTP conversion on Tizen 3 ([#8444](https://github.com/shaka-project/shaka-player/issues/8444)) ([89584bf](https://github.com/shaka-project/shaka-player/commit/89584bf73717730105d8535a451b8a43f676a4b6))
* Fix onUpdateEnd when the MSE engine has been destroyed ([#8591](https://github.com/shaka-project/shaka-player/issues/8591)) ([f5ea7ad](https://github.com/shaka-project/shaka-player/commit/f5ea7adda30af6bf8951b8dd2588c3ccefc67958))
* Fix race condition stoping timers ([#8530](https://github.com/shaka-project/shaka-player/issues/8530)) ([45e7c39](https://github.com/shaka-project/shaka-player/commit/45e7c3953ff4a218581495f79b7261f1d66b006f))
* Fix side-loaded track when resuming local and cast again ([#8564](https://github.com/shaka-project/shaka-player/issues/8564)) ([9a17243](https://github.com/shaka-project/shaka-player/commit/9a172433dd8d3db28609698cbd73b3b0aa22a61b))
* Fix text visibility when switching between stream with text and without text ([#8572](https://github.com/shaka-project/shaka-player/issues/8572)) ([e1b96d3](https://github.com/shaka-project/shaka-player/commit/e1b96d3a3b350eaec60a037b661aef10b86fcf8d))
* Fixes eme-encryption-scheme-polyfill, null encryptionScheme is valid ([#8599](https://github.com/shaka-project/shaka-player/issues/8599)) ([e3a438b](https://github.com/shaka-project/shaka-player/commit/e3a438baa07c1e11fd0fdb9ab96d1c8acba08824)), closes [#8596](https://github.com/shaka-project/shaka-player/issues/8596)
* FRMA generation ([#8367](https://github.com/shaka-project/shaka-player/issues/8367)) ([9c517a9](https://github.com/shaka-project/shaka-player/commit/9c517a91811caabae8eea686f9f9147fa0cbc761))
* Handle missing window.matchMedia API ([#8385](https://github.com/shaka-project/shaka-player/issues/8385)) ([4d8f855](https://github.com/shaka-project/shaka-player/commit/4d8f855b4445b3907347f6473b5bb3ba5748647b))
* Handle null response body for fetch responses ([#8384](https://github.com/shaka-project/shaka-player/issues/8384)) ([8e0d45f](https://github.com/shaka-project/shaka-player/commit/8e0d45f4935474bedadd1d599d8201f35981234a))
* Handle updateend event on duration reduction ([#8403](https://github.com/shaka-project/shaka-player/issues/8403)) ([20bcfdd](https://github.com/shaka-project/shaka-player/commit/20bcfdd43c5fcd011e7e7d0276a56268b58213b9))
* **HLS:** Add key ids to Fairplay DRM parser ([#8371](https://github.com/shaka-project/shaka-player/issues/8371)) ([25021bb](https://github.com/shaka-project/shaka-player/commit/25021bbda7aef517b9f0c6baf53d2ee5a2c15a99))
* **HLS:** Avoid duplicate init segment request when using SAMPLE-AES ([#8361](https://github.com/shaka-project/shaka-player/issues/8361)) ([4517999](https://github.com/shaka-project/shaka-player/commit/45179996993b655159cc3eb5f70bc3291dc4e1e1))
* **HLS:** Do not skip DateRanges based on ID ([#8638](https://github.com/shaka-project/shaka-player/issues/8638)) ([c6b53b3](https://github.com/shaka-project/shaka-player/commit/c6b53b38dc5cd5a577d74c61c712e31ee7670812))
* **HLS:** Fix disableAudio and disableVideo when loading a media playlist ([#8642](https://github.com/shaka-project/shaka-player/issues/8642)) ([ccd31aa](https://github.com/shaka-project/shaka-player/commit/ccd31aa9d9ced89ebec29eecef45b6385be3e7cd))
* **HLS:** Fix HLS live playback on older Webkit STBs ([#8325](https://github.com/shaka-project/shaka-player/issues/8325)) ([02a29a0](https://github.com/shaka-project/shaka-player/commit/02a29a00abf638cbd2b5d0c92c2af6435ca75f2b)), closes [#8324](https://github.com/shaka-project/shaka-player/issues/8324)
* **HLS:** Fix MP4 data segment being parsed as MPEG2-TS ([#8612](https://github.com/shaka-project/shaka-player/issues/8612)) ([a53f82b](https://github.com/shaka-project/shaka-player/commit/a53f82b07ac8c6e9bccc9ac99ea3f154026ff671))
* **HLS:** Fix mp4 detection when the mimetype is application/octet-stream ([#8459](https://github.com/shaka-project/shaka-player/issues/8459)) ([b4d9b43](https://github.com/shaka-project/shaka-player/commit/b4d9b43ce2d44228bcfaebe90300498d648d7318))
* **HLS:** Fix queryData to prevent url params percent encoding ([#8346](https://github.com/shaka-project/shaka-player/issues/8346)) ([3b3c95a](https://github.com/shaka-project/shaka-player/commit/3b3c95af88300357c575430c4ff5175a37796757))
* **HLS:** Fix text tracks disappear after seek ([#8494](https://github.com/shaka-project/shaka-player/issues/8494)) ([995da46](https://github.com/shaka-project/shaka-player/commit/995da468b5a4d2d2009942cc3a39a56a074ca552))
* **HLS:** Fix variable substitution when using relative paths ([#8350](https://github.com/shaka-project/shaka-player/issues/8350)) ([922dfee](https://github.com/shaka-project/shaka-player/commit/922dfeeddb0ced368bea6d423c4a28b8658b8b6d))
* **HLS:** Handle redirect URLs correctly ([#8331](https://github.com/shaka-project/shaka-player/issues/8331)) ([8d4087e](https://github.com/shaka-project/shaka-player/commit/8d4087ef3f968644354511fb1576f37f4e2f5bf9))
* **HLS:** Supports SUPPLEMENTAL-CODECS with muxed audio ([#8323](https://github.com/shaka-project/shaka-player/issues/8323)) ([e7d1734](https://github.com/shaka-project/shaka-player/commit/e7d1734f86e100fe8212f8b0a90d65d37afb65ba))
* Improve boundary gap mitigation at DASH period transitions ([#8344](https://github.com/shaka-project/shaka-player/issues/8344)) ([c46963f](https://github.com/shaka-project/shaka-player/commit/c46963fbbd46686690164b68a9219d7b3016a15b))
* Improve maxResolution detection on Tizen ([#8365](https://github.com/shaka-project/shaka-player/issues/8365)) ([ee1926e](https://github.com/shaka-project/shaka-player/commit/ee1926ed54f2580d11826bee85c822faa9f222e4))
* Keep unique references in getAudioTracks ([#8460](https://github.com/shaka-project/shaka-player/issues/8460)) ([34b5b4a](https://github.com/shaka-project/shaka-player/commit/34b5b4a3cd9641a1bc76c80aa018bfc5d5eb5d83))
* **LCEVC:** Ensure unique originalVideoId for LCEVC dual-track ([#8562](https://github.com/shaka-project/shaka-player/issues/8562)) ([4ef126b](https://github.com/shaka-project/shaka-player/commit/4ef126b2d0c7a291bab0f6fb5556fc320ed818f4))
* Make shaka.util.Lazy work with null ([#8267](https://github.com/shaka-project/shaka-player/issues/8267)) ([e0a57bb](https://github.com/shaka-project/shaka-player/commit/e0a57bb27def16598ffc88e4a55856473629a634))
* Make sure we are calling setLiveSeekableRange and clearLiveSeekableRange at the correct time ([#8523](https://github.com/shaka-project/shaka-player/issues/8523)) ([ddd97f0](https://github.com/shaka-project/shaka-player/commit/ddd97f08f82b61cd971d0dd2d18ef748de7402e4))
* Make sure we are calling setLiveSeekableRange and clearLiveSeekableRange at the correct time ([#8569](https://github.com/shaka-project/shaka-player/issues/8569)) ([6a9ee08](https://github.com/shaka-project/shaka-player/commit/6a9ee0876d45f546be0a877c6d480b7df9f7fe04))
* Mixed clear/encrypted playback on Safari MSE ([#8354](https://github.com/shaka-project/shaka-player/issues/8354)) ([5f18231](https://github.com/shaka-project/shaka-player/commit/5f182319fccb9a9c9b66ea964a9d3c319288d5cb))
* **net:** Fix "Payload length does not match range requested bytes" when using open end ([#8651](https://github.com/shaka-project/shaka-player/issues/8651)) ([c19cbaf](https://github.com/shaka-project/shaka-player/commit/c19cbafc10b6c2801fbbe81aa38154dbcf93c3c3))
* **Offline:** Fix HLS-AES download ([#8374](https://github.com/shaka-project/shaka-player/issues/8374)) ([60c6b19](https://github.com/shaka-project/shaka-player/commit/60c6b19d61b312355595289287ead3784041ef20))
* **Offline:** Handle missing window.matchMedia API ([#8442](https://github.com/shaka-project/shaka-player/issues/8442)) ([3dbf4c4](https://github.com/shaka-project/shaka-player/commit/3dbf4c4b56242a92c1465999b0cf1e51f9adb4de))
* Only check key status changes when drm engine is available ([#8589](https://github.com/shaka-project/shaka-player/issues/8589)) ([892be53](https://github.com/shaka-project/shaka-player/commit/892be53759bbf4aa75eab31614fe5b059134cc15))
* Only create shaka-text-container when necessary ([#8581](https://github.com/shaka-project/shaka-player/issues/8581)) ([3618d4f](https://github.com/shaka-project/shaka-player/commit/3618d4f4ca990bed5e939db0bd4c25f3a1ba2168))
* Only expand robustness on each stream once ([#8458](https://github.com/shaka-project/shaka-player/issues/8458)) ([9ba8ceb](https://github.com/shaka-project/shaka-player/commit/9ba8ceb606e4b106d8642e11a39a484ffea5fe22)), closes [#8408](https://github.com/shaka-project/shaka-player/issues/8408)
* Only schedule an update on reset when we are not clearing the buffer ([#8340](https://github.com/shaka-project/shaka-player/issues/8340)) ([d1be137](https://github.com/shaka-project/shaka-player/commit/d1be137fdec3bd029461d118961a6e1f57b1fe37))
* Persist selected audio track role after variant update in `selectVariantTrack` ([#8249](https://github.com/shaka-project/shaka-player/issues/8249)) ([b30e0ce](https://github.com/shaka-project/shaka-player/commit/b30e0ce67ee5c529ca1fae59eef5f691da974acb)), closes [#8248](https://github.com/shaka-project/shaka-player/issues/8248)
* **preload:** Fix preload segments in some cases ([#8401](https://github.com/shaka-project/shaka-player/issues/8401)) ([da271ac](https://github.com/shaka-project/shaka-player/commit/da271ac6f4d537b5c2e074c659668a973b3fdab4))
* Prevent unhandled rejections on segment fetch failures ([#8313](https://github.com/shaka-project/shaka-player/issues/8313)) ([8ba2722](https://github.com/shaka-project/shaka-player/commit/8ba2722004c7ac37282e3c560b4076595d035ba1))
* Read TRUN data_offset as signed int ([#8383](https://github.com/shaka-project/shaka-player/issues/8383)) ([7e827ac](https://github.com/shaka-project/shaka-player/commit/7e827ac3fcc0fba52ee4495b99746e646c445502))
* Remove active audio channel count from default pref based criteria ([#8674](https://github.com/shaka-project/shaka-player/issues/8674)) ([b8ff4e9](https://github.com/shaka-project/shaka-player/commit/b8ff4e9412993cf9dd9da2836b31f78afa742507))
* Reset external tracks when unloading in cast proxy ([#8573](https://github.com/shaka-project/shaka-player/issues/8573)) ([5ec05ca](https://github.com/shaka-project/shaka-player/commit/5ec05ca05e00ef05d12555c05cce177dea6f3a7c))
* Reset lastMediaSourceReset when seeking to unbuffered part ([#8339](https://github.com/shaka-project/shaka-player/issues/8339)) ([deb53fc](https://github.com/shaka-project/shaka-player/commit/deb53fc0247181473186d1b6909b1f602dc87845))
* Sony Bravia TV Playready DRM Failure ([#8577](https://github.com/shaka-project/shaka-player/issues/8577)) ([f987f45](https://github.com/shaka-project/shaka-player/commit/f987f451ab45cc2996c56f77890ed2566b5ec86f))
* Subtitles appearing twice when switching to Fullscreen on iOS ([#8476](https://github.com/shaka-project/shaka-player/issues/8476)) ([9042872](https://github.com/shaka-project/shaka-player/commit/904287290bdd63219dbacdaf5f63b827ace11245))
* Support more Dolby codec notations ([#8387](https://github.com/shaka-project/shaka-player/issues/8387)) ([933a4f2](https://github.com/shaka-project/shaka-player/commit/933a4f2f7aac19a8c942fd0182bcb9cd7b2e2132))
* Text tracks with src= on Safari & UITextDisplayer are sometimes rendered natively ([#8256](https://github.com/shaka-project/shaka-player/issues/8256)) ([306b682](https://github.com/shaka-project/shaka-player/commit/306b68200bb442535b73e478b48bacf245aa5648))
* Try to reset MSE on STREAMING_NOT_ALLOWED error ([#8625](https://github.com/shaka-project/shaka-player/issues/8625)) ([e1673cd](https://github.com/shaka-project/shaka-player/commit/e1673cd63ab29d6add4a727090f09d6db3ef9896))
* **UI:** Add missing replay icon to big play button ([#8648](https://github.com/shaka-project/shaka-player/issues/8648)) ([f2cb927](https://github.com/shaka-project/shaka-player/commit/f2cb92746e63eed43499c70b306c26966c72b664))
* **UI:** Avoid hide controls when seeking ([#8303](https://github.com/shaka-project/shaka-player/issues/8303)) ([6cc035a](https://github.com/shaka-project/shaka-player/commit/6cc035a61f48f11dcb98a3282c174f1fc5984b5c))
* **UI:** Avoid show resolution bandwidth when it's not necessary ([#8440](https://github.com/shaka-project/shaka-player/issues/8440)) ([bb1fdb4](https://github.com/shaka-project/shaka-player/commit/bb1fdb45c68e8b1701a2ad832350dba4d181bf00))
* **UI:** Avoid show resolution selector when using remote playback ([#8628](https://github.com/shaka-project/shaka-player/issues/8628)) ([d60dbf3](https://github.com/shaka-project/shaka-player/commit/d60dbf3e6fce6c7cd00baef16f0ca98b30b16d6b))
* **UI:** Check remote availability on remote button ([#8453](https://github.com/shaka-project/shaka-player/issues/8453)) ([03fd784](https://github.com/shaka-project/shaka-player/commit/03fd78405541f8a00080a78b0b3cada662c1dce0))
* **UI:** Create watermark element only when necessary ([#8551](https://github.com/shaka-project/shaka-player/issues/8551)) ([95e6d01](https://github.com/shaka-project/shaka-player/commit/95e6d010a3ae1c0a1eb0f927c3825030341b463d))
* **UI:** Disable doubleClickForFullscreen while casting ([#8488](https://github.com/shaka-project/shaka-player/issues/8488)) ([12feb3f](https://github.com/shaka-project/shaka-player/commit/12feb3ff720f2b382c4e3767b849de4aafc5177d))
* **UI:** Disable save video frame button while casting ([#8258](https://github.com/shaka-project/shaka-player/issues/8258)) ([e71d94c](https://github.com/shaka-project/shaka-player/commit/e71d94cf08a1ceaff3cb94d4e5435b825aa59175))
* **UI:** Display max segment duration in seconds ([#8305](https://github.com/shaka-project/shaka-player/issues/8305)) ([1c42190](https://github.com/shaka-project/shaka-player/commit/1c421905ffdda581272cef06759d0e972a72a2fa))
* **UI:** Don't allow click on the buttons when the UI is not visible ([#8396](https://github.com/shaka-project/shaka-player/issues/8396)) ([ea07907](https://github.com/shaka-project/shaka-player/commit/ea0790727d72d1cc7c54954792cd177b8c5cbf79))
* **UI:** Don't cover useless space with the position in the thumbnail image ([#8322](https://github.com/shaka-project/shaka-player/issues/8322)) ([30af37e](https://github.com/shaka-project/shaka-player/commit/30af37ec83cfcf6d48131c142efd62a3a8da7d8e))
* **UI:** Don't hide the UI when using the wheel over the UI ([#8425](https://github.com/shaka-project/shaka-player/issues/8425)) ([d761dae](https://github.com/shaka-project/shaka-player/commit/d761dae1a26842a23c94ce5031727aff540b6bc2))
* **UI:** Filter audio qualities when bandwidth is missing ([#8650](https://github.com/shaka-project/shaka-player/issues/8650)) ([370b042](https://github.com/shaka-project/shaka-player/commit/370b04260e1114fc414e521b07ac4e878fabc704))
* **UI:** Fix a11y issue with shaka.ui.AdInfo ([#8420](https://github.com/shaka-project/shaka-player/issues/8420)) ([46c998d](https://github.com/shaka-project/shaka-player/commit/46c998ded2b482fa355a5d5d02380d3f32015bf6))
* **UI:** Fix display language when showing the codec name ([#8455](https://github.com/shaka-project/shaka-player/issues/8455)) ([48f217e](https://github.com/shaka-project/shaka-player/commit/48f217eba858eacda7fdecb0d2beb29075f73880))
* **UI:** Fix duplicate visibility events ([#8665](https://github.com/shaka-project/shaka-player/issues/8665)) ([b6ab228](https://github.com/shaka-project/shaka-player/commit/b6ab228b4832e4a6ceac55254042524f44bd242a)), closes [#8656](https://github.com/shaka-project/shaka-player/issues/8656)
* **UI:** Fix erroneous current time when dragging ([#8558](https://github.com/shaka-project/shaka-player/issues/8558)) ([eb83157](https://github.com/shaka-project/shaka-player/commit/eb8315784a8860665141cb718b6dd00fb6633917))
* **UI:** Fix get thumbnails while casting ([#8509](https://github.com/shaka-project/shaka-player/issues/8509)) ([43389b2](https://github.com/shaka-project/shaka-player/commit/43389b2de95690f7aaa201d0848df5dda97ed460))
* **UI:** Fix position of menus and tooltips when the seekbar is missing ([#8639](https://github.com/shaka-project/shaka-player/issues/8639)) ([9d4e4d0](https://github.com/shaka-project/shaka-player/commit/9d4e4d06c9c244453f4ad85fe53d5dd23c32ef67))
* **UI:** Fix seek on the seekbar at the init ([#8555](https://github.com/shaka-project/shaka-player/issues/8555)) ([5d27b56](https://github.com/shaka-project/shaka-player/commit/5d27b56001fa8ea1b989771387bfa86b1d890f68))
* **UI:** Fix seekbar allows seeking even when hidden ([#8540](https://github.com/shaka-project/shaka-player/issues/8540)) ([1a82e27](https://github.com/shaka-project/shaka-player/commit/1a82e2754cfe093f80b4846e19f484091c734527))
* **UI:** Fix some bugs when joining an existing cast session ([#8452](https://github.com/shaka-project/shaka-player/issues/8452)) ([9112ca1](https://github.com/shaka-project/shaka-player/commit/9112ca1b279a3fa56393e0c996e5bd3dee3450e2))
* **UI:** Fix thumbnail exception when the thumbnails doesn't exist ([#8318](https://github.com/shaka-project/shaka-player/issues/8318)) ([9010483](https://github.com/shaka-project/shaka-player/commit/90104835348f500aa4c015dfbcde4725b85c3a32))
* **UI:** Fix transition from FullScreen to PiP in Safari ([#8566](https://github.com/shaka-project/shaka-player/issues/8566)) ([42c08f6](https://github.com/shaka-project/shaka-player/commit/42c08f6b8571e758b633056a0c8a8f3a4316f987))
* **UI:** Fix UI behaviour when switching between PiP and fullscreen and vice versa ([#8544](https://github.com/shaka-project/shaka-player/issues/8544)) ([d274d38](https://github.com/shaka-project/shaka-player/commit/d274d38dda9dbe4fb3635fc228e16777656aabb0))
* **UI:** Fix visibility events on the UI ([#8619](https://github.com/shaka-project/shaka-player/issues/8619)) ([95cf682](https://github.com/shaka-project/shaka-player/commit/95cf6824a615f02a2e9d7a3e74704fd78253a8e7))
* **UI:** Fix visibility events while casting ([#8574](https://github.com/shaka-project/shaka-player/issues/8574)) ([2693bc7](https://github.com/shaka-project/shaka-player/commit/2693bc7c787b2e1ad18b93f2f027eefba435fd16))
* **UI:** honors singleClickForPlayAndPause when made a single tap with seekOnTaps = true ([#8393](https://github.com/shaka-project/shaka-player/issues/8393)) ([0d7838e](https://github.com/shaka-project/shaka-player/commit/0d7838ef2c578a49f45f62cbae4017cd192bdb3d))
* **UI:** Improve layout of current time container above hovered seek bar ([#8412](https://github.com/shaka-project/shaka-player/issues/8412)) ([a27434b](https://github.com/shaka-project/shaka-player/commit/a27434bf31b0b2075391755ad287abb5226ef6df)), closes [#8411](https://github.com/shaka-project/shaka-player/issues/8411)
* **UI:** Keep the current position gradient when seeked ([#8571](https://github.com/shaka-project/shaka-player/issues/8571)) ([7b98c10](https://github.com/shaka-project/shaka-player/commit/7b98c10cfc9b774e2a52e6aa088e21c55ef895fc)), closes [#8548](https://github.com/shaka-project/shaka-player/issues/8548)
* **UI:** Make UI display 4096x2160 (DCI 4k) video as also being "4k" ([#8359](https://github.com/shaka-project/shaka-player/issues/8359)) ([00ae291](https://github.com/shaka-project/shaka-player/commit/00ae29185efec5f971d009d62ff938f8b8bd77c3))
* **UI:** Only create VR canvas when necessary ([#8580](https://github.com/shaka-project/shaka-player/issues/8580)) ([6c3f71b](https://github.com/shaka-project/shaka-player/commit/6c3f71b31a0f1057c1c5708c4b941eec3c2d47dc))
* **UI:** Only show the volume bar on hover ([#8433](https://github.com/shaka-project/shaka-player/issues/8433)) ([1faa11e](https://github.com/shaka-project/shaka-player/commit/1faa11eb7a71c877e6495a34c6f11a63773b584f))
* **UI:** Optimize portrait thumbnail display ([#8274](https://github.com/shaka-project/shaka-player/issues/8274)) ([1f336dd](https://github.com/shaka-project/shaka-player/commit/1f336dd319ad23a6feb785f2ab05a8bc5fc8e2a2))
* **UI:** Reset quality mark when switching from video stream to audio only stream ([#8605](https://github.com/shaka-project/shaka-player/issues/8605)) ([1d04801](https://github.com/shaka-project/shaka-player/commit/1d04801ef15b40011f42bf6e4bbec164087e89ce))
* **UI:** Save track preferences for casting purposes ([#8489](https://github.com/shaka-project/shaka-player/issues/8489)) ([e13e125](https://github.com/shaka-project/shaka-player/commit/e13e125e92f4cbcb58a680f98cf9393388ff790d))
* **UI:** Show the remote button when we already connected ([#8461](https://github.com/shaka-project/shaka-player/issues/8461)) ([09d2041](https://github.com/shaka-project/shaka-player/commit/09d2041b5090f4167e3c23dbac3cc72be826b3f6))
* **UI:** Show the video codec only when there are two codecs for the same resolution ([#8407](https://github.com/shaka-project/shaka-player/issues/8407)) ([b93303c](https://github.com/shaka-project/shaka-player/commit/b93303cc0faae8ac14a0069fbdc7ab857eb1fd59))
* **UI:** Show time when the thumbnail is not available ([#8510](https://github.com/shaka-project/shaka-player/issues/8510)) ([fefe61f](https://github.com/shaka-project/shaka-player/commit/fefe61fa0373d4be267b9a7f914121f9f94692c3))
* **UI:** Sync volume and mute values when loading a new content or casting ([#8487](https://github.com/shaka-project/shaka-player/issues/8487)) ([8555da7](https://github.com/shaka-project/shaka-player/commit/8555da7c19e3c1db88892e40db9e6172a366bfbc))
* Update eme-encryption-scheme-polyfill ([#8546](https://github.com/shaka-project/shaka-player/issues/8546)) ([e54d2dc](https://github.com/shaka-project/shaka-player/commit/e54d2dc5ad0c1ab9a175be5ba0f56d9d37acf6aa))
* Update region observer with new rules for small regions ([#8275](https://github.com/shaka-project/shaka-player/issues/8275)) ([2f18b47](https://github.com/shaka-project/shaka-player/commit/2f18b47d95b79f5e8109e155c8ff36c190569569))
* Use proper method for checking is object an array ([#8644](https://github.com/shaka-project/shaka-player/issues/8644)) ([769ced5](https://github.com/shaka-project/shaka-player/commit/769ced524db0c88ba29fc1ce117c5b00b6108502))
* **WebOS:** Do not throw error during parsing ID3 ([#8623](https://github.com/shaka-project/shaka-player/issues/8623)) ([b2595ce](https://github.com/shaka-project/shaka-player/commit/b2595ced9e0f285203cf8d842e053f08e7d6bb8a))


### Performance Improvements

* AdaptationSetCriteria improvements ([#8287](https://github.com/shaka-project/shaka-player/issues/8287)) ([78a16d9](https://github.com/shaka-project/shaka-player/commit/78a16d9e225f5c4aa2284140551d8cffc73856e3))
* **Ads:** Improve presentation time of pre-roll interstitials ([#8284](https://github.com/shaka-project/shaka-player/issues/8284)) ([fad638e](https://github.com/shaka-project/shaka-player/commit/fad638ee13f4b687e4b63acbee540b7a54d8a9f9))
* **Ads:** Preload images on interstitials ([#8269](https://github.com/shaka-project/shaka-player/issues/8269)) ([c49102c](https://github.com/shaka-project/shaka-player/commit/c49102ca3d4f87ad6b2a64b07f037e8e3fd3a136))
* **ContentWorkarounds:** Do not override codec twice ([#8358](https://github.com/shaka-project/shaka-player/issues/8358)) ([b9c5571](https://github.com/shaka-project/shaka-player/commit/b9c5571f096455b03e2613cee620139ccb8b745b))
* **DASH:** Release period combiner after parsing a VOD ([#8443](https://github.com/shaka-project/shaka-player/issues/8443)) ([396bdf6](https://github.com/shaka-project/shaka-player/commit/396bdf69dfaa28cc6b20ef769364aef01621666e))
* Do not process stream DRM info several times ([#8505](https://github.com/shaka-project/shaka-player/issues/8505)) ([9678b1c](https://github.com/shaka-project/shaka-player/commit/9678b1cdc69c5319ee347b854cfe3addbc98f0e2))
* **HLS:** Make initial segment requests in parallel ([#8337](https://github.com/shaka-project/shaka-player/issues/8337)) ([5f4d351](https://github.com/shaka-project/shaka-player/commit/5f4d35126125167847154f6c93d3c395a59c5b74))
* **HLS:** Reduce load time when loading in the player a media playlist ([#8333](https://github.com/shaka-project/shaka-player/issues/8333)) ([aed6471](https://github.com/shaka-project/shaka-player/commit/aed6471dd4306f131a71037c1c4a9631d50f44fe))
* Init source buffers synchronously ([#8646](https://github.com/shaka-project/shaka-player/issues/8646)) ([34827b4](https://github.com/shaka-project/shaka-player/commit/34827b4cb2a4cfb5201c0620e558941505af0222))
* **net:** Avoid parsing headers twice ([#8618](https://github.com/shaka-project/shaka-player/issues/8618)) ([cd9c850](https://github.com/shaka-project/shaka-player/commit/cd9c8504a9c1b26102d4017b90d9ca75517ba848))
* Optimize DRM compatibility check across streams ([#8652](https://github.com/shaka-project/shaka-player/issues/8652)) ([784246b](https://github.com/shaka-project/shaka-player/commit/784246b76f1c5c2d6dc3f3e2425aeda87d1163bd))
* Optimize getAllThumbnails() ([#8525](https://github.com/shaka-project/shaka-player/issues/8525)) ([f15d627](https://github.com/shaka-project/shaka-player/commit/f15d627215fcbb857c541f937dbf27685e44d48e))
* Remove extendedType when checking isTypeSupported on Tizen ([#8507](https://github.com/shaka-project/shaka-player/issues/8507)) ([e3d8140](https://github.com/shaka-project/shaka-player/commit/e3d8140094e07e7b48fbe080e425b7df597ae084))
* Remove redundant collection in Streaming Engine ([#8645](https://github.com/shaka-project/shaka-player/issues/8645)) ([c81e9a8](https://github.com/shaka-project/shaka-player/commit/c81e9a8c126d670f678f976040392991e6507e03))
* Stop parsing the mp4 when the init segment is encrypted on ContentWorkarounds ([#8353](https://github.com/shaka-project/shaka-player/issues/8353)) ([fd61961](https://github.com/shaka-project/shaka-player/commit/fd61961a9bb87297810768fd4040e2e87cb17e02))

## [4.14.0](https://github.com/shaka-project/shaka-player/compare/v4.13.0...v4.14.0) (2025-03-12)


### Features

* Add avoidEvictionOnQuotaExceededError config ([#8031](https://github.com/shaka-project/shaka-player/issues/8031)) ([6d30f61](https://github.com/shaka-project/shaka-player/commit/6d30f618144e8de83aac43bb2360a9a9ef302c57))
* Add config to allow reset MSE on cross boundary ([#8156](https://github.com/shaka-project/shaka-player/issues/8156)) ([3699164](https://github.com/shaka-project/shaka-player/commit/369916489e3b1017b814a9b51e88c2e07150b827))
* Add LCEVC dual track rendering ([#8168](https://github.com/shaka-project/shaka-player/issues/8168)) ([389f45c](https://github.com/shaka-project/shaka-player/commit/389f45c2155c6cfd635dfad38b14f07a5091b514))
* Add new error code when the streaming is not allowed ([#7994](https://github.com/shaka-project/shaka-player/issues/7994)) ([455163f](https://github.com/shaka-project/shaka-player/commit/455163f874f623f6ffd4edc85cf81966f27aa26c))
* Add Vizio as community support ([#8049](https://github.com/shaka-project/shaka-player/issues/8049)) ([16ca489](https://github.com/shaka-project/shaka-player/commit/16ca489843134e3e37b5c3855dee032dbb253af6))
* **Ads:** Add double box format ad experience for Custom Overlay Interstitials ([#8074](https://github.com/shaka-project/shaka-player/issues/8074)) ([e344f5d](https://github.com/shaka-project/shaka-player/commit/e344f5d13986e51fb19ad4fcb8df2c6c170b300b))
* **Ads:** Add overlayAds to AdsStats ([#8068](https://github.com/shaka-project/shaka-player/issues/8068)) ([ace9d4a](https://github.com/shaka-project/shaka-player/commit/ace9d4aea7b35eb476587b4eb8b31f808d7a5255))
* **Ads:** Add support for L-Shape ad experience ([#8051](https://github.com/shaka-project/shaka-player/issues/8051)) ([6bd0afe](https://github.com/shaka-project/shaka-player/commit/6bd0afe06d65f22f623e69c948bcee7481553c2c))
* **Ads:** Update DASH Media Presentation Insertion according to the latest draft ([#8065](https://github.com/shaka-project/shaka-player/issues/8065)) ([171bdb3](https://github.com/shaka-project/shaka-player/commit/171bdb33546546e458ab7b740470444d0167a5ed))
* Allow acquire thumbnails without track ID ([#8129](https://github.com/shaka-project/shaka-player/issues/8129)) ([c312bd6](https://github.com/shaka-project/shaka-player/commit/c312bd6186183d5f8090a325b5558247fa6daa98))
* Allow preload text tracks and expose the preloaded variant and text tracks ([#8187](https://github.com/shaka-project/shaka-player/issues/8187)) ([4e05551](https://github.com/shaka-project/shaka-player/commit/4e05551986e653e53f300eb572e4ddde1c82fcf3))
* Change the way to handle the STREAMING_NOT_ALLOWED error ([#8033](https://github.com/shaka-project/shaka-player/issues/8033)) ([c2ff501](https://github.com/shaka-project/shaka-player/commit/c2ff5011abecc03c01082996ac844cf0a5daa1a8))
* Create a new simple API for Audio ([#8005](https://github.com/shaka-project/shaka-player/issues/8005)) ([f778713](https://github.com/shaka-project/shaka-player/commit/f778713e1389ca50ac553a35d81d242ef14fb195))
* **DASH:** Add dependencyVideo to video streams ([#8057](https://github.com/shaka-project/shaka-player/issues/8057)) ([4936b0c](https://github.com/shaka-project/shaka-player/commit/4936b0c230297360b98e3485d7f371ccda5eb823))
* Deprecate selectVariantsByLabel because the same can be done with the new Audio API ([#8095](https://github.com/shaka-project/shaka-player/issues/8095)) ([e9b1a6c](https://github.com/shaka-project/shaka-player/commit/e9b1a6c823c7e460ea35006dcb8a93330985bce4))
* Do not make corrective seeks when setLiveSeekableRange is used ([#8053](https://github.com/shaka-project/shaka-player/issues/8053)) ([dbdfa49](https://github.com/shaka-project/shaka-player/commit/dbdfa49117fb50744cf89641a929bb8e0caa7786))
* **FairPlay:** Add support for Mux ([#8201](https://github.com/shaka-project/shaka-player/issues/8201)) ([31b32d3](https://github.com/shaka-project/shaka-player/commit/31b32d3d24ef37c583f36a34e975cb6216fb0a2c))
* **HLS:** Add allowRangeRequestsToGuessMimeType config ([#7979](https://github.com/shaka-project/shaka-player/issues/7979)) ([195fd2b](https://github.com/shaka-project/shaka-player/commit/195fd2b27a54d1e4ed050255b65947f3d4b9a76a))
* **HLS:** Add an option to ignore DRM info ([#7986](https://github.com/shaka-project/shaka-player/issues/7986)) ([9461bc2](https://github.com/shaka-project/shaka-player/commit/9461bc2455a4fc1981a16d8f15ada7bc99d40cfa))
* **LCEVC:** Detect as supported dual track content with LCEVC ([#8134](https://github.com/shaka-project/shaka-player/issues/8134)) ([8f0b0e3](https://github.com/shaka-project/shaka-player/commit/8f0b0e3282cda8f2bdec8259515fdd3a5e7a6aee))
* Make the filters provided for FairPlay more error-resistant ([#7974](https://github.com/shaka-project/shaka-player/issues/7974)) ([6ba871b](https://github.com/shaka-project/shaka-player/commit/6ba871bf520e245d2152c178b53c1a70add432db))
* Move caption scaling from css to new textDisplayer.fontScaleFactor config ([#8242](https://github.com/shaka-project/shaka-player/issues/8242)) ([c8747ab](https://github.com/shaka-project/shaka-player/commit/c8747ab0b835d661eea7137909f0a8037c9228a6))
* Move shaka.util.FairPlayUtils to shaka.drm.FairPlay ([#8217](https://github.com/shaka-project/shaka-player/issues/8217)) ([c2ce68f](https://github.com/shaka-project/shaka-player/commit/c2ce68fba8cf7a96456fd65cfd03fe9d2e6007f0))
* Retain segment in memory on QuotaExceededError ([#7954](https://github.com/shaka-project/shaka-player/issues/7954)) ([4c6c576](https://github.com/shaka-project/shaka-player/commit/4c6c57649216239def7ac6352298540226a69fa0))
* Simplify ignoreSupplementalCodecs config ([#7967](https://github.com/shaka-project/shaka-player/issues/7967)) ([abaf82f](https://github.com/shaka-project/shaka-player/commit/abaf82f5ab30a2b60b44baeb6dc5464158b3f272))
* Simplify updatePeriod config ([#7980](https://github.com/shaka-project/shaka-player/issues/7980)) ([7fa6cde](https://github.com/shaka-project/shaka-player/commit/7fa6cde165933dff795d93e4963583100f029eaf))
* Text font scaling customisation ability ([#8215](https://github.com/shaka-project/shaka-player/issues/8215)) ([18695c6](https://github.com/shaka-project/shaka-player/commit/18695c6c23f5c660c4f84bff22a9c50f28674087))
* Time ID3, emsg, and metadata events to the presentation timeline ([#8012](https://github.com/shaka-project/shaka-player/issues/8012)) ([cd32556](https://github.com/shaka-project/shaka-player/commit/cd32556539d8d3f517a519659c2f3d606f76330d))
* **UI:** Add halfequirectangular (180) VR support ([#8238](https://github.com/shaka-project/shaka-player/issues/8238)) ([6e9e5a0](https://github.com/shaka-project/shaka-player/commit/6e9e5a06ea88b752148bb34e0b24ef71b7da3a46))
* **UI:** Close submenu or context menu on option click ([#8193](https://github.com/shaka-project/shaka-player/issues/8193)) ([5fc0fec](https://github.com/shaka-project/shaka-player/commit/5fc0fecd1630860b5ef51098325e99b03565f08c))


### Bug Fixes

* Add more info in getVariantTracks for muxed streams ([#8002](https://github.com/shaka-project/shaka-player/issues/8002)) ([8e17bad](https://github.com/shaka-project/shaka-player/commit/8e17bad40faade7a13dfa73d435db7161d3a26a0))
* **Ads:** Fix default background color on interstitial ([#8091](https://github.com/shaka-project/shaka-player/issues/8091)) ([a614786](https://github.com/shaka-project/shaka-player/commit/a614786d27e1b46a67c98660ee45577951f3955e))
* **Ads:** Only set ad-active in the controls-container when the ad has custom clicks ([#8075](https://github.com/shaka-project/shaka-player/issues/8075)) ([16d4e29](https://github.com/shaka-project/shaka-player/commit/16d4e29d95306d95f4aca915d858e7bde99341f1))
* **Ads:** Remove default background color on interstitial overlay ([#8085](https://github.com/shaka-project/shaka-player/issues/8085)) ([64a1076](https://github.com/shaka-project/shaka-player/commit/64a107615c1cbcada44bd8a2f803b9913e2e1ba3))
* **Ads:** Reset playRangeEnd value between interstitials ([#8082](https://github.com/shaka-project/shaka-player/issues/8082)) ([2f3a868](https://github.com/shaka-project/shaka-player/commit/2f3a86875718e5e2f57f4dc9f8b06dbe3a54fd23))
* **Ads:** Support urn:scte:dash:scte214-events schemeIdUri for overlays ([#8086](https://github.com/shaka-project/shaka-player/issues/8086)) ([1071f40](https://github.com/shaka-project/shaka-player/commit/1071f4076ae4e69ff98b25be2849e56f73cde07c))
* Allow change the native playbackRate with the same functionality as trickPlay ([#7993](https://github.com/shaka-project/shaka-player/issues/7993)) ([410d2e6](https://github.com/shaka-project/shaka-player/commit/410d2e6d5523c6692f963fc266e9aae046dad8d5))
* audio label when selecting variants by label ([#8038](https://github.com/shaka-project/shaka-player/issues/8038)) ([56a920a](https://github.com/shaka-project/shaka-player/commit/56a920a2f6adc5cc976717936f70531c11f91674))
* Avoid DRM setup for VOD that does not need it ([#8154](https://github.com/shaka-project/shaka-player/issues/8154)) ([2573af7](https://github.com/shaka-project/shaka-player/commit/2573af7bd7709c579a0c518ea3ce3073d0a4fd07))
* Avoid launch RESTRICTIONS_CANNOT_BE_MET when it's not necessary ([#8014](https://github.com/shaka-project/shaka-player/issues/8014)) ([ece88d6](https://github.com/shaka-project/shaka-player/commit/ece88d642193922d58243623872897262d8b8db5))
* Avoid rebuffering when using big trick play rates ([#7988](https://github.com/shaka-project/shaka-player/issues/7988)) ([213b2b7](https://github.com/shaka-project/shaka-player/commit/213b2b711941ce44624cdc1e739560ef0b89f7a2))
* Call modifyCueCallback in src= mode ([#8254](https://github.com/shaka-project/shaka-player/issues/8254)) ([bd9784a](https://github.com/shaka-project/shaka-player/commit/bd9784af8031c6951df1d4271d9d1cb721f3b25f))
* Check bandwidth when filtering streams ([#8125](https://github.com/shaka-project/shaka-player/issues/8125)) ([ccbbb01](https://github.com/shaka-project/shaka-player/commit/ccbbb01e55aa04c657caea2b253a329e077af9c3))
* Clear some caches when install/uninstall PatchedMediaKeysApple ([#8198](https://github.com/shaka-project/shaka-player/issues/8198)) ([61d44c9](https://github.com/shaka-project/shaka-player/commit/61d44c903f2cc692579250f7aca9ac4fe6fa56f3))
* **CMCD:** Do not call play() if CMCD is not enabled ([#8149](https://github.com/shaka-project/shaka-player/issues/8149)) ([3338ea7](https://github.com/shaka-project/shaka-player/commit/3338ea7a644fcf5ee43dbbc52c37ec44bf178ef7))
* **CMCD:** Only report ltc if playing; round to int ([#8011](https://github.com/shaka-project/shaka-player/issues/8011)) ([6ce3c73](https://github.com/shaka-project/shaka-player/commit/6ce3c73b790402cca252f5129bcb6026e76a2f3c)), closes [#8010](https://github.com/shaka-project/shaka-player/issues/8010)
* **DASH:** ContentSteering promise is resolved too late for fetching of init segment ([#8126](https://github.com/shaka-project/shaka-player/issues/8126)) ([65da004](https://github.com/shaka-project/shaka-player/commit/65da004a4854d4e591b939f234fad3ad72749dd3))
* **DASH:** Fix DASH_DUPLICATE_REPRESENTATION_ID error when using supplemental codec ([#7961](https://github.com/shaka-project/shaka-player/issues/7961)) ([66ca230](https://github.com/shaka-project/shaka-player/commit/66ca2302382f03ec6196287548e7e94e96a79a7e))
* **DASH:** Fix Dolby Atmos detection ([#7966](https://github.com/shaka-project/shaka-player/issues/7966)) ([56c5f52](https://github.com/shaka-project/shaka-player/commit/56c5f52c9a69d87f005163f7d0def1a49d8d599d))
* **DASH:** Fix playback of ClearKey when only part of keys are defined ([#8055](https://github.com/shaka-project/shaka-player/issues/8055)) ([9a618d4](https://github.com/shaka-project/shaka-player/commit/9a618d479b14ef3b5e00989a3d6dedef1e907d56))
* **DASH:** Revert Dolby Atmos detection when there is not SupplementalProperty ([#8132](https://github.com/shaka-project/shaka-player/issues/8132)) ([5c3e1a0](https://github.com/shaka-project/shaka-player/commit/5c3e1a0fea2eabd8ad74885e5b7347bfdc62998a))
* Do not autoplay if autoplay is not set ([#8024](https://github.com/shaka-project/shaka-player/issues/8024)) ([0efdd2b](https://github.com/shaka-project/shaka-player/commit/0efdd2b241b6836514eccf3d1276f8ffeb842690)), closes [#8022](https://github.com/shaka-project/shaka-player/issues/8022)
* Do not recognize MultiChoice & Ziggo as Apple ([#7996](https://github.com/shaka-project/shaka-player/issues/7996)) ([e0f3f5a](https://github.com/shaka-project/shaka-player/commit/e0f3f5a46152b8aaef00e8f2f2b6c349f235aa6c))
* **DRM:** Fix drm choice when the user provide a server in the manifest ([#8067](https://github.com/shaka-project/shaka-player/issues/8067)) ([bdce076](https://github.com/shaka-project/shaka-player/commit/bdce0765e9c7191a33ae3bcfbfabd39c9de37609))
* Duplicate timelineregion* events fired for the same event id ([#8013](https://github.com/shaka-project/shaka-player/issues/8013)) ([e270b28](https://github.com/shaka-project/shaka-player/commit/e270b285331ce04b4434e60072b7b34b28e04b22))
* Evict the buffer against seekRangeStart ([#8026](https://github.com/shaka-project/shaka-player/issues/8026)) ([44748b4](https://github.com/shaka-project/shaka-player/commit/44748b46df8ade84b9f03035555712e6e46edbcb))
* **FairPlay:** Install by default shaka.polyfill.PatchedMediaKeysApple on older Safari versions ([#8106](https://github.com/shaka-project/shaka-player/issues/8106)) ([324b121](https://github.com/shaka-project/shaka-player/commit/324b1212de1cf67125b0759cdc5254f17aafdd38))
* Fit template check template info ([#8162](https://github.com/shaka-project/shaka-player/issues/8162)) ([b26dd1f](https://github.com/shaka-project/shaka-player/commit/b26dd1f7774b79270052f400028ee31753a17646))
* Fix AC-3 playback on Tizen 3.0 devices ([#7969](https://github.com/shaka-project/shaka-player/issues/7969)) ([4eb2cea](https://github.com/shaka-project/shaka-player/commit/4eb2ceab055aabca51ba29284911f45e66e9ddff))
* Fix AC-3 playback on Tizen 3.0 devices when transmuxing ([#7972](https://github.com/shaka-project/shaka-player/issues/7972)) ([dc62c8b](https://github.com/shaka-project/shaka-player/commit/dc62c8bbee1731cb1706f381b6eb34fb08ab4f72))
* Fix codec selection ([#8197](https://github.com/shaka-project/shaka-player/issues/8197)) ([2d0995f](https://github.com/shaka-project/shaka-player/commit/2d0995f58bfcf22db5eeeb8454d96249fd5c7106))
* Fix displaying subtitles in UITextDisplayer at high playback rates ([#7991](https://github.com/shaka-project/shaka-player/issues/7991)) ([3be3b14](https://github.com/shaka-project/shaka-player/commit/3be3b142ea63288498716b3c06d17e864ad7b6f3))
* Fix DRM workaround with fLaC and Opus boxes ([#8070](https://github.com/shaka-project/shaka-player/issues/8070)) ([186b2b6](https://github.com/shaka-project/shaka-player/commit/186b2b63dc43b7ed7d1e3fb3cf26cfa12979567d))
* Fix Hisense 4K detection ([#8133](https://github.com/shaka-project/shaka-player/issues/8133)) ([ec37591](https://github.com/shaka-project/shaka-player/commit/ec37591617c40e3339c42a303a90aa1fd1eedf0e))
* Fix playback with Apple Media Keys polyfill detection ([#7958](https://github.com/shaka-project/shaka-player/issues/7958)) ([1825266](https://github.com/shaka-project/shaka-player/commit/18252664e7dc80584dc37893eee27dae800c9dd5))
* Fix seek to initial live position on slow devices ([#8181](https://github.com/shaka-project/shaka-player/issues/8181)) ([6c01f18](https://github.com/shaka-project/shaka-player/commit/6c01f18f6d2f0abda18fd7a1328471c0de353042))
* Fix segmentappended event when using muxed streams ([#7987](https://github.com/shaka-project/shaka-player/issues/7987)) ([10b1f63](https://github.com/shaka-project/shaka-player/commit/10b1f630d31a49e6013b1a46b8f33b6354323019))
* Fix select label audio when using selectAudioLanguage ([#7970](https://github.com/shaka-project/shaka-player/issues/7970)) ([20ed3b0](https://github.com/shaka-project/shaka-player/commit/20ed3b0b09c5711574f9b057be89135ad1041e54))
* **HLS:** Better detect mimetype when server returns application/octet-stream ([#8077](https://github.com/shaka-project/shaka-player/issues/8077)) ([d4ecdad](https://github.com/shaka-project/shaka-player/commit/d4ecdad13a1f3a13480b23ec400e109cdc04b8e1))
* **HLS:** Detect spatial audio when using Dolby AC-4 ([#8223](https://github.com/shaka-project/shaka-player/issues/8223)) ([88fa167](https://github.com/shaka-project/shaka-player/commit/88fa16744dc0df10e6527bd4962e765808e8d731))
* **HLS:** Fix duplicate segments on some inaccurate live streams ([#8084](https://github.com/shaka-project/shaka-player/issues/8084)) ([be27a9d](https://github.com/shaka-project/shaka-player/commit/be27a9df16930b390c61fedd4d9a0ec6d4f0cdc0))
* **HLS:** Fix redirect management at media playlist level ([#7944](https://github.com/shaka-project/shaka-player/issues/7944)) ([a38a810](https://github.com/shaka-project/shaka-player/commit/a38a81056d3cf5cb92bd934584451cb08f45649c))
* **HLS:** Fix support for SUPPLEMENTAL-CODECS on EXT-X-I-FRAME-STREAM-INF ([#7992](https://github.com/shaka-project/shaka-player/issues/7992)) ([307e3d8](https://github.com/shaka-project/shaka-player/commit/307e3d8fd4b32fc65e14dc901e646c561625626e))
* **HLS:** Fix switching between muxed MP4 and muxed TS ([#8061](https://github.com/shaka-project/shaka-player/issues/8061)) ([af4eb84](https://github.com/shaka-project/shaka-player/commit/af4eb84bb89972afcf428ac747abeb429007ad32))
* **HLS:** Only apply compensation if the difference is greater than 150ms ([#8207](https://github.com/shaka-project/shaka-player/issues/8207)) ([04658d1](https://github.com/shaka-project/shaka-player/commit/04658d17f752bb673735019fff5175657f08f3be))
* **HLS:** Populate encrypted info correctly on updates ([#8153](https://github.com/shaka-project/shaka-player/issues/8153)) ([433a32a](https://github.com/shaka-project/shaka-player/commit/433a32ab945bea24f71b57f3cbd37029ffffbbaa))
* **HLS:** Populate originalVideoId in HLS with the URI ([#8003](https://github.com/shaka-project/shaka-player/issues/8003)) ([6c9b634](https://github.com/shaka-project/shaka-player/commit/6c9b634457a13f5675b3a979520f9684a536a2d2))
* **hls:** Removing Possible encoding problem detected ([#8253](https://github.com/shaka-project/shaka-player/issues/8253)) ([3c99d37](https://github.com/shaka-project/shaka-player/commit/3c99d378f4a8e403925a508da8a1ab6828ab2fff))
* Install Safari workarounds on WPE STBs ([#8103](https://github.com/shaka-project/shaka-player/issues/8103)) ([09b3333](https://github.com/shaka-project/shaka-player/commit/09b3333afee6badf3b7eb63d740bfb31b23906f8))
* **net:** Add 304 as successful request ([#7963](https://github.com/shaka-project/shaka-player/issues/7963)) ([a0ed8da](https://github.com/shaka-project/shaka-player/commit/a0ed8da7e2b38af3870ee28da1540f426387c827))
* **net:** Allow preventDefault() on retry event ([#8058](https://github.com/shaka-project/shaka-player/issues/8058)) ([a30f1da](https://github.com/shaka-project/shaka-player/commit/a30f1da2a2edaa7093676c7d525d6a09f9e75372))
* Only dispatch spatialvideoinfo and nospatialvideoinfo for video streams ([#8236](https://github.com/shaka-project/shaka-player/issues/8236)) ([13a1340](https://github.com/shaka-project/shaka-player/commit/13a1340a4f9dbb73503bf9a8139df4e46e0b16bd))
* Prevent race condition when seeking backwards during load ([#8188](https://github.com/shaka-project/shaka-player/issues/8188)) ([bcf159d](https://github.com/shaka-project/shaka-player/commit/bcf159d62ae068d5b9298e511cc00d8cd3826414))
* **PS5:** Disable sequence mode in PS5 ([#8004](https://github.com/shaka-project/shaka-player/issues/8004)) ([bb7ab3c](https://github.com/shaka-project/shaka-player/commit/bb7ab3c7fa810d384ec24359212b157a28379469))
* Remove isSafari and always use isApple ([#8104](https://github.com/shaka-project/shaka-player/issues/8104)) ([7570935](https://github.com/shaka-project/shaka-player/commit/75709351c8f27f47cecdb188c972287f2d2dfc80))
* Remove timeout for decodingInfo in some platforms and increase the timeout ([#8172](https://github.com/shaka-project/shaka-player/issues/8172)) ([6ffc302](https://github.com/shaka-project/shaka-player/commit/6ffc30210e2400e6b7d6c501c093505670c0979b))
* **Subtitles:** Prevent rounding errors when filtering duplicated cues ([#8018](https://github.com/shaka-project/shaka-player/issues/8018)) ([24283e6](https://github.com/shaka-project/shaka-player/commit/24283e6c4d2a9f78676750d5b784044431d5b259))
* Throw preload destroyed error when re-using same preloadManager ([#8046](https://github.com/shaka-project/shaka-player/issues/8046)) ([6583f96](https://github.com/shaka-project/shaka-player/commit/6583f961649388f460e2bb77da40169dc3457e0c))
* **TTML:** Correctly handle multiple samples in a segment ([#8088](https://github.com/shaka-project/shaka-player/issues/8088)) ([2562384](https://github.com/shaka-project/shaka-player/commit/25623840558af8c482304260b807f7766f944b7c))
* **tXml:** Allow case insensitive in parseDuration ([#8064](https://github.com/shaka-project/shaka-player/issues/8064)) ([0400d1e](https://github.com/shaka-project/shaka-player/commit/0400d1e365577cfbff7fda447b2bf7164e24f5e0))
* **UI:** Allow configure close menu delay time ([#8235](https://github.com/shaka-project/shaka-player/issues/8235)) ([de4bb9e](https://github.com/shaka-project/shaka-player/commit/de4bb9e8a80d3cf9f51947f55b295b87a36498f9))
* **UI:** Allow play/pause when seekOnTaps is enabled ([#8206](https://github.com/shaka-project/shaka-player/issues/8206)) ([db43a18](https://github.com/shaka-project/shaka-player/commit/db43a1821642a9e0504327f8e58dd4f1cfce8268))
* **UI:** Allow use hideUI on mobile devices ([#8233](https://github.com/shaka-project/shaka-player/issues/8233)) ([4be4dbd](https://github.com/shaka-project/shaka-player/commit/4be4dbd6e6fadcca31a7a46a100f42c045ae5881))
* **UI:** Close context menu when hide the UI ([#8234](https://github.com/shaka-project/shaka-player/issues/8234)) ([8739820](https://github.com/shaka-project/shaka-player/commit/8739820648336e2ded11d582ecea37568e3a9ad1))
* **UI:** Don't sort playback rates ([#8230](https://github.com/shaka-project/shaka-player/issues/8230)) ([78ea4ee](https://github.com/shaka-project/shaka-player/commit/78ea4eeade8279a49343a3cd523818d20b789436))
* **UI:** Fix bad behavior when we are on muted status and we turn volume up ([#8231](https://github.com/shaka-project/shaka-player/issues/8231)) ([79ad771](https://github.com/shaka-project/shaka-player/commit/79ad771627fe950aa415e8c7c3fc00cbc4feb8f8))
* **UI:** Fix scrolling with player in iframe ([#8180](https://github.com/shaka-project/shaka-player/issues/8180)) ([97f2255](https://github.com/shaka-project/shaka-player/commit/97f2255abc3c9ccb257b496538e602c24feeead1))
* **UI:** Fix show AdStatisticsButton when it's not necessary ([#7989](https://github.com/shaka-project/shaka-player/issues/7989)) ([e7d428a](https://github.com/shaka-project/shaka-player/commit/e7d428a219a5b75ef70a4aff9c5781a978acb0cb))
* **UI:** Fix thumbnail sometimes not disappearing due to mouse hover ([#8089](https://github.com/shaka-project/shaka-player/issues/8089)) ([a3ccf83](https://github.com/shaka-project/shaka-player/commit/a3ccf837d6f90f6ed5fda279b881414bc60628e1))
* **UI:** Fix weird behaviour when volume was 0, and we unmute ([#8186](https://github.com/shaka-project/shaka-player/issues/8186)) ([3ff0e28](https://github.com/shaka-project/shaka-player/commit/3ff0e287f9f0cbb796c539b9e519d45ec3ee0deb))
* **UI:** Improve performance and compatibility with MediaSession ([#8100](https://github.com/shaka-project/shaka-player/issues/8100)) ([3277f04](https://github.com/shaka-project/shaka-player/commit/3277f04b592953335b1e0c37f6ccf845115e6806))
* **UI:** Improve seekOnTaps behavior on tap and scroll ([#8225](https://github.com/shaka-project/shaka-player/issues/8225)) ([c8d93a6](https://github.com/shaka-project/shaka-player/commit/c8d93a60c765cd828bce35e9561cb46155e45d78))
* **UI:** Show GB unit in StatisticsButton ([#7990](https://github.com/shaka-project/shaka-player/issues/7990)) ([8816086](https://github.com/shaka-project/shaka-player/commit/88160863c891d686105bf69ea4c1d6fc864b9399))
* **UI:** Update UI in order to support AC-4 ([#8205](https://github.com/shaka-project/shaka-player/issues/8205)) ([051da08](https://github.com/shaka-project/shaka-player/commit/051da08adcd7dd7424ae874d6f9a9fb93964f57f))
* Use audio label on ExampleBasedCriteria ([#7971](https://github.com/shaka-project/shaka-player/issues/7971)) ([b491e4a](https://github.com/shaka-project/shaka-player/commit/b491e4a23fae1b7a826384362ccf5b22e66aaa19))
* **WebOS:** Do not preload DRM on legacy EME ([#8083](https://github.com/shaka-project/shaka-player/issues/8083)) ([477bbbf](https://github.com/shaka-project/shaka-player/commit/477bbbfebc773def95c17bed61e37a0895513fb7))
* When standard load, do not wait for pending license requests to finish. ([#8219](https://github.com/shaka-project/shaka-player/issues/8219)) ([b8519f1](https://github.com/shaka-project/shaka-player/commit/b8519f1529892bced22d176aa92aa7040840e080))


### Performance Improvements

* **Ads:** Only create the listeners/timers when there are interstitials ([#8113](https://github.com/shaka-project/shaka-player/issues/8113)) ([cbcb1d8](https://github.com/shaka-project/shaka-player/commit/cbcb1d8b19c3a22008fe93023d53c4f7e14bbaf0))
* Close segmentIndex after getAllThumbnails ([#8128](https://github.com/shaka-project/shaka-player/issues/8128)) ([31373b3](https://github.com/shaka-project/shaka-player/commit/31373b3fea7c3545f52aa9ff4b3fb83498b365a4))
* Only set the timers on UITextDisplayer when there are cues ([#8114](https://github.com/shaka-project/shaka-player/issues/8114)) ([f310833](https://github.com/shaka-project/shaka-player/commit/f3108330c6f4ed369a1ff63c810c58935aafdc1b))
* Pause PlayheadObserverManager operations on pause event ([#8183](https://github.com/shaka-project/shaka-player/issues/8183)) ([870a3f0](https://github.com/shaka-project/shaka-player/commit/870a3f06b96fb5a0ab64f8f610a1ecff5fe07ed7))
* Prevent CastSender initialization on CastProxy on unsupported browsers ([#7995](https://github.com/shaka-project/shaka-player/issues/7995)) ([b4ab526](https://github.com/shaka-project/shaka-player/commit/b4ab52633a4c7cf8d9edd2bfec6874fd806222f1))
* Region timeline improvements ([#8203](https://github.com/shaka-project/shaka-player/issues/8203)) ([235fbea](https://github.com/shaka-project/shaka-player/commit/235fbea2a98e85e87a4fc2a9146c9ef6567cd828))
* Remove promises from getAllThumbnails loop ([#8118](https://github.com/shaka-project/shaka-player/issues/8118)) ([49706b9](https://github.com/shaka-project/shaka-player/commit/49706b9ea4339a757cac0d916de5c98cbba13495))
* **UI:** Avoid unnecessary calls to controls configure ([#8116](https://github.com/shaka-project/shaka-player/issues/8116)) ([356de09](https://github.com/shaka-project/shaka-player/commit/356de09850b1f920400d8d0c3a817ee1f713c1cd))
* **UI:** Improve VR performance ([#8237](https://github.com/shaka-project/shaka-player/issues/8237)) ([e672216](https://github.com/shaka-project/shaka-player/commit/e6722160f4f22f65bac09e1a737f18a0dd038b60))
* **UI:** Reduce configure calls to use shakaPlayerCastReceiverId ([#8115](https://github.com/shaka-project/shaka-player/issues/8115)) ([b3c9722](https://github.com/shaka-project/shaka-player/commit/b3c9722622fbda147ce7fd77864b59000538886f))
* Use navigator.userAgentData.platform to detect Android and Fuchsia ([#8102](https://github.com/shaka-project/shaka-player/issues/8102)) ([7704a31](https://github.com/shaka-project/shaka-player/commit/7704a31ab257fccfa04b263966521b99a6019dce))

## [4.13.0](https://github.com/shaka-project/shaka-player/compare/v4.12.0...v4.13.0) (2025-01-23)


### Features

* **ABR:** Use PiP window size when using documentPictureInPicture ([#7880](https://github.com/shaka-project/shaka-player/issues/7880)) ([c232867](https://github.com/shaka-project/shaka-player/commit/c232867053f3808fe2557ef979802fe7c593c2f1))
* **ABR:** Use PiP window size when using requestPictureInPicture ([#7882](https://github.com/shaka-project/shaka-player/issues/7882)) ([a583c4a](https://github.com/shaka-project/shaka-player/commit/a583c4a8097942f7ed919d243c3e945d9810fc82))
* Add 'downloadcompleted' event ([#7609](https://github.com/shaka-project/shaka-player/issues/7609)) ([13186bd](https://github.com/shaka-project/shaka-player/commit/13186bd403ff549d54d3d4467af3a0a0f1ce04ef)), closes [#7608](https://github.com/shaka-project/shaka-player/issues/7608)
* Add adaptation set criteria factory configuration ([#7886](https://github.com/shaka-project/shaka-player/issues/7886)) ([6e4bfdf](https://github.com/shaka-project/shaka-player/commit/6e4bfdf99c60be3ea63293115ce6e7679025b923)), closes [#7768](https://github.com/shaka-project/shaka-player/issues/7768)
* Add basic support for the Common Access Token ([#7651](https://github.com/shaka-project/shaka-player/issues/7651)) ([c10b796](https://github.com/shaka-project/shaka-player/commit/c10b796bb63955e238ec99d2bc069282f19b5c41))
* Add configuration to ignore SCTE214 supplemental codecs ([#7717](https://github.com/shaka-project/shaka-player/issues/7717)) ([e1d1d19](https://github.com/shaka-project/shaka-player/commit/e1d1d195557608ec014d5a6d27debf5f149ba4c7))
* Add downloadcompleted event description ([#7615](https://github.com/shaka-project/shaka-player/issues/7615)) ([0db5813](https://github.com/shaka-project/shaka-player/commit/0db5813bbef7e86e9817d41e7abb8c88818ddf37))
* Add new error code for missing EME support ([#7596](https://github.com/shaka-project/shaka-player/issues/7596)) ([3a83e76](https://github.com/shaka-project/shaka-player/commit/3a83e7693f54b0e0e18e00b4ff8cf6c8e9fa10f4))
* Add streaming.preferNativeDash config ([#7737](https://github.com/shaka-project/shaka-player/issues/7737)) ([27976f1](https://github.com/shaka-project/shaka-player/commit/27976f1c965d2332961af680c2ebb1ea7a8a7dc3))
* add support for multiple robustness levels in drm ([#7753](https://github.com/shaka-project/shaka-player/issues/7753)) ([88472b3](https://github.com/shaka-project/shaka-player/commit/88472b30764a6e88eb23dc694d69f0a13fbc4a0b))
* Add support for WisePlay DRM ([#7854](https://github.com/shaka-project/shaka-player/issues/7854)) ([7ef0f92](https://github.com/shaka-project/shaka-player/commit/7ef0f924c36d0b839937e9f437a5ba860827a0a0))
* Add Watermark Support to Shaka Player UI ([#7877](https://github.com/shaka-project/shaka-player/issues/7877)) ([56523e4](https://github.com/shaka-project/shaka-player/commit/56523e49bfeb461f514a0148b035c1a68f2fcbf9))
* Add watermark to uncompiled mode ([#7895](https://github.com/shaka-project/shaka-player/issues/7895)) ([14c4fe1](https://github.com/shaka-project/shaka-player/commit/14c4fe1843fb5d6f247daf2deb042ffdac154d6d))
* **Ads:** Add basic support to DASH OverlayEvent ([#7701](https://github.com/shaka-project/shaka-player/issues/7701)) ([b704af0](https://github.com/shaka-project/shaka-player/commit/b704af00664ec094142a95d6c6e7294a915bfded))
* **Ads:** Add support for images and iframes in interstitials ([#7712](https://github.com/shaka-project/shaka-player/issues/7712)) ([8db876f](https://github.com/shaka-project/shaka-player/commit/8db876f6cd81413c040a85802b11a1e79dc18c97))
* **Ads:** Add support for overlay interstitials (or non-linear ads) ([#7657](https://github.com/shaka-project/shaka-player/issues/7657)) ([70257ff](https://github.com/shaka-project/shaka-player/commit/70257ffefe609dfa0bb8888f91c2ce1d52c78f9f))
* **Ads:** Allow OverlayEvents without viewport ([#7734](https://github.com/shaka-project/shaka-player/issues/7734)) ([426090d](https://github.com/shaka-project/shaka-player/commit/426090db12cb932251ce663fb7554168e2dc2111))
* **Ads:** Expose the interstitial player ([#7793](https://github.com/shaka-project/shaka-player/issues/7793)) ([6783ce0](https://github.com/shaka-project/shaka-player/commit/6783ce099f58d129048785cb184ac1520ebb88a3))
* **Ads:** Parse non-linear VAST ads ([#7702](https://github.com/shaka-project/shaka-player/issues/7702)) ([0c7d204](https://github.com/shaka-project/shaka-player/commit/0c7d2045e9c165bdd2226c8ae6ff3991dedfa43e))
* **Ads:** Populate getAdId and getMediaUrl for interstitials ([#7922](https://github.com/shaka-project/shaka-player/issues/7922)) ([1a6a0db](https://github.com/shaka-project/shaka-player/commit/1a6a0db31e0f9f77bff889c53cf6f93de771d2af))
* **Ads:** Support HTMLResource on non-linear VAST ads ([#7710](https://github.com/shaka-project/shaka-player/issues/7710)) ([6f4d2d2](https://github.com/shaka-project/shaka-player/commit/6f4d2d249a4f829db0a627fc06746874d5c7bef4))
* Check minHdcpVersion in probeSupport ([#7809](https://github.com/shaka-project/shaka-player/issues/7809)) ([fab3faf](https://github.com/shaka-project/shaka-player/commit/fab3faff9304114fc9d228e8cb158d52e4b17143))
* CMCD v2 LTC and MSD keys ([#7412](https://github.com/shaka-project/shaka-player/issues/7412)) ([b2673fd](https://github.com/shaka-project/shaka-player/commit/b2673fdf4bf7f0be8e6c12e2ebf62275417fc934))
* Create segmentIndex when there is only one variant ([#7868](https://github.com/shaka-project/shaka-player/issues/7868)) ([3a85217](https://github.com/shaka-project/shaka-player/commit/3a85217003af78c9d2f2bd6a5f130e533935cb3a))
* **DASH:** Extract PlayReady licenseServerUri from PSSH ([#7898](https://github.com/shaka-project/shaka-player/issues/7898)) ([8fda5d8](https://github.com/shaka-project/shaka-player/commit/8fda5d86bbeaf26e938f5d851e8c1f7e066ed1b5))
* **Demo:** Allow storage of MSS-PlayReady in demo ([#7801](https://github.com/shaka-project/shaka-player/issues/7801)) ([8764169](https://github.com/shaka-project/shaka-player/commit/87641696c0a4e7e0134f9f9f92d4c68b72f6bc98))
* **Demo:** Display unhandled rejections in demo ([#7638](https://github.com/shaka-project/shaka-player/issues/7638)) ([d7e78f6](https://github.com/shaka-project/shaka-player/commit/d7e78f67ced3526025d67e3f3b70038453ea1a25))
* **HLS:** Add support for getting license server url for PlayReady ([#7790](https://github.com/shaka-project/shaka-player/issues/7790)) ([effa244](https://github.com/shaka-project/shaka-player/commit/effa244941aab59c82f5d56d88dbedb7c3c36a05))
* **net:** Add originalRequest to shaka.extern.Response ([#7857](https://github.com/shaka-project/shaka-player/issues/7857)) ([59c9989](https://github.com/shaka-project/shaka-player/commit/59c9989e49cf6efe4c33df2215e636bc6744465f))
* **Offline:** Allow downloading some clearkey content without persistent license support ([#7811](https://github.com/shaka-project/shaka-player/issues/7811)) ([50a1851](https://github.com/shaka-project/shaka-player/commit/50a1851f03a9a12f714eecd6ba0b56f04d7e21ed))
* Save CEA708 caption cues on all windows when deleting/clearing windows ([#7909](https://github.com/shaka-project/shaka-player/issues/7909)) ([19bd472](https://github.com/shaka-project/shaka-player/commit/19bd47289365db6d5f32e919a2f373d42e9ea247))
* Simplify the use of low latency ([#7748](https://github.com/shaka-project/shaka-player/issues/7748)) ([6616ff2](https://github.com/shaka-project/shaka-player/commit/6616ff202a4b00f4edb396379f894bb8591f2ab6))
* Stop setting playbackRate to 0 to control buffering state when streaming.rebufferingGoal = 0 ([#7617](https://github.com/shaka-project/shaka-player/issues/7617)) ([84b64af](https://github.com/shaka-project/shaka-player/commit/84b64af623b1ade9a976f3e48b2ae5a405803a24))
* **UI:** Add config to show the audio codec in the audio selector ([#7644](https://github.com/shaka-project/shaka-player/issues/7644)) ([ee72b89](https://github.com/shaka-project/shaka-player/commit/ee72b89f6ee3400d5b86802a5d1325772ba75460))
* **UI:** Add option to show the video codec name ([#7747](https://github.com/shaka-project/shaka-player/issues/7747)) ([075c3fd](https://github.com/shaka-project/shaka-player/commit/075c3fdbe264bdfaf0d35c41122ddbeca53f5e65))
* Update usage of minBufferTime according to the DASH spec ([#7616](https://github.com/shaka-project/shaka-player/issues/7616)) ([2260aa9](https://github.com/shaka-project/shaka-player/commit/2260aa9cf6a47eebecfc023a69be7934de77362e))
* Use MSE clearLiveSeekableRange and setLiveSeekableRange when available ([#7905](https://github.com/shaka-project/shaka-player/issues/7905)) ([87d9392](https://github.com/shaka-project/shaka-player/commit/87d9392042de1553251fb545b73a211d3077ce23))


### Bug Fixes

* Abort operations only once ([#7624](https://github.com/shaka-project/shaka-player/issues/7624)) ([d407d15](https://github.com/shaka-project/shaka-player/commit/d407d159c6173c7d64ffafd61f56872dd99fb345))
* **Ads:** Always fire CUEPOINTS_CHANGED when not using multi video elements ([#7584](https://github.com/shaka-project/shaka-player/issues/7584)) ([a4d0fc8](https://github.com/shaka-project/shaka-player/commit/a4d0fc8a5710cdfc1b45f554b901d137f7aa49c6))
* **Ads:** Always set endTime for MPD Alternate ([#7583](https://github.com/shaka-project/shaka-player/issues/7583)) ([16580ea](https://github.com/shaka-project/shaka-player/commit/16580ea6f83bfcc7ddcddb8a138691c413b2a8f3))
* **Ads:** Apply X-PLAYOUT-LIMIT to entire interstitial ([#7804](https://github.com/shaka-project/shaka-player/issues/7804)) ([e40341c](https://github.com/shaka-project/shaka-player/commit/e40341c37cb609d946353c05eeca9c45827c506f))
* **Ads:** Avoid adding custom interstitials without URI ([#7696](https://github.com/shaka-project/shaka-player/issues/7696)) ([743b451](https://github.com/shaka-project/shaka-player/commit/743b451c82467ddedc31fb46485a12cfec1a0dab))
* **Ads:** Avoid skip interstitial when is not allowed ([#7686](https://github.com/shaka-project/shaka-player/issues/7686)) ([7be22db](https://github.com/shaka-project/shaka-player/commit/7be22db167d4f76763db2201ad4776e8c8eda4d3))
* **Ads:** Calculate the mimeType in an earlier step so that there is no impact on the ad playback ([#7742](https://github.com/shaka-project/shaka-player/issues/7742)) ([c113738](https://github.com/shaka-project/shaka-player/commit/c113738a152b6532345afc9cf470f84d42874195))
* **Ads:** Disable interstitials when playing an interstitials ([#7621](https://github.com/shaka-project/shaka-player/issues/7621)) ([7401adf](https://github.com/shaka-project/shaka-player/commit/7401adf912cd5ed53c8f90a768f3e8e8fb1fb541))
* **Ads:** Don't allow play an overlay video ad using the base video ([#7740](https://github.com/shaka-project/shaka-player/issues/7740)) ([172e713](https://github.com/shaka-project/shaka-player/commit/172e71357c40b509135f85c5c6477707986b58a4))
* **Ads:** Don't dispatch cue points changed if it is an overlay ([#7695](https://github.com/shaka-project/shaka-player/issues/7695)) ([eb4a45e](https://github.com/shaka-project/shaka-player/commit/eb4a45eb449cb6a7bdee4cddc3600c6df071a582))
* **Ads:** Don't try to play Image and HTML overlay interstitials ([#7697](https://github.com/shaka-project/shaka-player/issues/7697)) ([87cbf4d](https://github.com/shaka-project/shaka-player/commit/87cbf4d90a6d9a80ff9e7168883f4d884e5d9474))
* **Ads:** Fix ad position by default ([#7659](https://github.com/shaka-project/shaka-player/issues/7659)) ([ef2c7eb](https://github.com/shaka-project/shaka-player/commit/ef2c7eb970c001f9c445227fc25eb4426d9bd012))
* **Ads:** Fix bad static overlay ad position ([#7735](https://github.com/shaka-project/shaka-player/issues/7735)) ([e4825c3](https://github.com/shaka-project/shaka-player/commit/e4825c303bdf977830a81e154565e0008bd7f79d))
* **Ads:** Fix behavior when user JUMPS across more than one interstitial ([#7667](https://github.com/shaka-project/shaka-player/issues/7667)) ([4aa9306](https://github.com/shaka-project/shaka-player/commit/4aa9306680358e653148ab6d377407667c8c3850))
* **Ads:** Fix id of X-ASSET-LIST ([#7662](https://github.com/shaka-project/shaka-player/issues/7662)) ([79b1536](https://github.com/shaka-project/shaka-player/commit/79b1536b5d8f4973a39816317663a3cc5588e199))
* **Ads:** Fix post-roll playback ([#7663](https://github.com/shaka-project/shaka-player/issues/7663)) ([9fd349a](https://github.com/shaka-project/shaka-player/commit/9fd349ab31396ccf17435b6f95a038cb864e70ec))
* **Ads:** Fix unnecessary request when using VAST ([#7660](https://github.com/shaka-project/shaka-player/issues/7660)) ([d09cd7e](https://github.com/shaka-project/shaka-player/commit/d09cd7ecb28870344abe457f77b4f1bc25869816))
* **Ads:** Fix usage of ENABLE-SKIP-AFTER and ENABLE-SKIP-FOR ([#7677](https://github.com/shaka-project/shaka-player/issues/7677)) ([8048d02](https://github.com/shaka-project/shaka-player/commit/8048d0280d9cf14789a152bc3645604f2e8a8490))
* **Ads:** Fix usage of ENABLE-SKIP-FOR in Interstitals ([#7652](https://github.com/shaka-project/shaka-player/issues/7652)) ([46ab1cb](https://github.com/shaka-project/shaka-player/commit/46ab1cb4e0b034cd63805cff708945617bcaba42))
* **Ads:** Fix VAST_INVALID_XML error code ([#7593](https://github.com/shaka-project/shaka-player/issues/7593)) ([c1e26ea](https://github.com/shaka-project/shaka-player/commit/c1e26eafe6ba9b6d2ada6f3ef17f827eb8e8c969))
* **Ads:** Limit static overlay playback to the timeline ([#7741](https://github.com/shaka-project/shaka-player/issues/7741)) ([eff0aef](https://github.com/shaka-project/shaka-player/commit/eff0aef8f7af24977b2d59c33d077466a5324dad))
* **Ads:** Only display the secondary video if necessary ([#7709](https://github.com/shaka-project/shaka-player/issues/7709)) ([072acf0](https://github.com/shaka-project/shaka-player/commit/072acf05ff5d39c09da92986e8c48a69d5b1c241))
* **Ads:** Prevent playing the same ad twice ([#7585](https://github.com/shaka-project/shaka-player/issues/7585)) ([10659c5](https://github.com/shaka-project/shaka-player/commit/10659c5db814004b07e54319debd0846e59221df))
* **Ads:** Remove iframe border in overlays ([#7738](https://github.com/shaka-project/shaka-player/issues/7738)) ([60c88eb](https://github.com/shaka-project/shaka-player/commit/60c88eb05bc5426ba327b4c2e6ad2d5279d6bd93))
* **Ads:** Stop properly interstitial ads ([#7708](https://github.com/shaka-project/shaka-player/issues/7708)) ([f186185](https://github.com/shaka-project/shaka-player/commit/f186185cff32ff81d30bca43f166cbb287e52a65))
* **Ads:** Update Alternative MPD to match the latest spec ([#7706](https://github.com/shaka-project/shaka-player/issues/7706)) ([cd78811](https://github.com/shaka-project/shaka-player/commit/cd78811753bcee5dad65c13ce769325b3d0131f5))
* **Ads:** Use region.id as id for Alternative MPD interstitial ([#7671](https://github.com/shaka-project/shaka-player/issues/7671)) ([18ed02c](https://github.com/shaka-project/shaka-player/commit/18ed02c9304dcda9fe22949ccc6f138b623a98b2))
* Allow set maxLatency and minLatency to 0 ([#7704](https://github.com/shaka-project/shaka-player/issues/7704)) ([4744d1e](https://github.com/shaka-project/shaka-player/commit/4744d1e5ecfe594f4608321987523ba06067d290))
* Allow the user to disable subtitles while paused ([#7578](https://github.com/shaka-project/shaka-player/issues/7578)) ([f41c65d](https://github.com/shaka-project/shaka-player/commit/f41c65d83018e7c92d402c301612feaad1709f6f))
* Avoid setAppendWindow when the window is Infinity ([#7923](https://github.com/shaka-project/shaka-player/issues/7923)) ([c75ebd7](https://github.com/shaka-project/shaka-player/commit/c75ebd7bcf9b76e109d30ba5e6d5e8d88766e71c))
* Avoid stack overflow when stringifying objects ([#7721](https://github.com/shaka-project/shaka-player/issues/7721)) ([90e47eb](https://github.com/shaka-project/shaka-player/commit/90e47eb58a9a184ab8161cd02ac0b009a77d174e)), closes [#7435](https://github.com/shaka-project/shaka-player/issues/7435)
* Avoid useless MSE reset when transmuxing muxed content ([#7818](https://github.com/shaka-project/shaka-player/issues/7818)) ([cc930a8](https://github.com/shaka-project/shaka-player/commit/cc930a87f86043775e2862486e1a89ae82f401ec))
* Calculate timeToFirstByte before fire the event 'downloadheadersreceived' ([#7605](https://github.com/shaka-project/shaka-player/issues/7605)) ([0fc5316](https://github.com/shaka-project/shaka-player/commit/0fc5316c5a71420ee22fc636e67935409e0b0054)), closes [#7604](https://github.com/shaka-project/shaka-player/issues/7604)
* **Cast:** Incorrect detection of MediaCapabilities on Linux Chromecast ([#7628](https://github.com/shaka-project/shaka-player/issues/7628)) ([bc0b9f2](https://github.com/shaka-project/shaka-player/commit/bc0b9f2ab4b37ffbaeddec684eae4d545413bcd7))
* **CEA:** Fix multi byte language support in CEA-708 ([#7837](https://github.com/shaka-project/shaka-player/issues/7837)) ([5b13332](https://github.com/shaka-project/shaka-player/commit/5b13332cca5aa4cbd2d25df383b20989f7ea4e07))
* **CEA:** Fix multi byte language support in CEA-708 ([#7929](https://github.com/shaka-project/shaka-player/issues/7929)) ([3856c58](https://github.com/shaka-project/shaka-player/commit/3856c583963ee958ed446f5a28b5be9322226b1b))
* Codec switch reload - apply boundaries correctly ([#7700](https://github.com/shaka-project/shaka-player/issues/7700)) ([8dd9d20](https://github.com/shaka-project/shaka-player/commit/8dd9d20267f7ccb5349291072e8e0e3ad2d3e09a)), closes [#7595](https://github.com/shaka-project/shaka-player/issues/7595)
* **DASH:** Change fallback presentation delay ([#7918](https://github.com/shaka-project/shaka-player/issues/7918)) ([b9eabe5](https://github.com/shaka-project/shaka-player/commit/b9eabe54415c5c89066fcb07b60081349c8cb0c5))
* **DASH:** Error due to deleted stream ([#7723](https://github.com/shaka-project/shaka-player/issues/7723)) ([0ca6ff7](https://github.com/shaka-project/shaka-player/commit/0ca6ff7ae61ef3b80e042b5318446bb0de30b2e3))
* **dash:** Fix $Time$ usage with SegmentTemplate ([#7849](https://github.com/shaka-project/shaka-player/issues/7849)) ([abd6d8b](https://github.com/shaka-project/shaka-player/commit/abd6d8b34c3eed58a416facb4e0434cb2032abdf))
* **DASH:** Fix Dolby Atmos detection when there is not SupplementalProperty ([#7847](https://github.com/shaka-project/shaka-player/issues/7847)) ([cf581cd](https://github.com/shaka-project/shaka-player/commit/cf581cd039db62b658f6851590b6c623bd7bf924))
* **DASH:** Fix playback after DASH period eviction ([#7603](https://github.com/shaka-project/shaka-player/issues/7603)) ([d8a14b0](https://github.com/shaka-project/shaka-player/commit/d8a14b0a45d01b49d6dc50432d8e2fcb4b0743e8))
* **DASH:** Ignore early segments in a period ([#7910](https://github.com/shaka-project/shaka-player/issues/7910)) ([c7a93d7](https://github.com/shaka-project/shaka-player/commit/c7a93d7c6c6622502daccc4d57cd8513b0bca6d3))
* **DASH:** Notify time range with the fitted timeline ([#7911](https://github.com/shaka-project/shaka-player/issues/7911)) ([a89ee1a](https://github.com/shaka-project/shaka-player/commit/a89ee1a5600b24ce86ab996b9168442247c60f59))
* Detect mov extension as video/quicktime ([#7884](https://github.com/shaka-project/shaka-player/issues/7884)) ([b0be779](https://github.com/shaka-project/shaka-player/commit/b0be77998aa6fb09dba1a570ed02a3fc076131e5))
* Detect smooth codec switch support on Apple devices ([#7678](https://github.com/shaka-project/shaka-player/issues/7678)) ([f765e05](https://github.com/shaka-project/shaka-player/commit/f765e05985968f7881893d8515705078ff80fb4f))
* Disable live sync when the stream is paused ([#7579](https://github.com/shaka-project/shaka-player/issues/7579)) ([89267cc](https://github.com/shaka-project/shaka-player/commit/89267cc2c2feabe487402283d31d700b69b6a136))
* Disable smooth codec switch on Tizen 8 ([#7614](https://github.com/shaka-project/shaka-player/issues/7614)) ([cd6aae7](https://github.com/shaka-project/shaka-player/commit/cd6aae745fad7d741642baea2d5889c09c58505f))
* Disable smooth codec switch on webOS 6 ([#7636](https://github.com/shaka-project/shaka-player/issues/7636)) ([93e6921](https://github.com/shaka-project/shaka-player/commit/93e6921b9d6f82252c8bc6d618ab1b3c11feba9d))
* **Docs:** Remove info about small/large gaps from manual ([#7762](https://github.com/shaka-project/shaka-player/issues/7762)) ([9234e44](https://github.com/shaka-project/shaka-player/commit/9234e44caf2bd80f900a0cd082747debd2e88002))
* Don't ignore the license server in manifest when another key-system has license server in configuration ([#7797](https://github.com/shaka-project/shaka-player/issues/7797)) ([ae34b68](https://github.com/shaka-project/shaka-player/commit/ae34b6806dd78f4d6637309fd5932b450f5671fa))
* Fix cast support for HLG HDR ([#7632](https://github.com/shaka-project/shaka-player/issues/7632)) ([f964708](https://github.com/shaka-project/shaka-player/commit/f9647083ad211fd7e79a4d30d5263ccb7ca605cf))
* Fix CBCS support in recent WebOS ([#7647](https://github.com/shaka-project/shaka-player/issues/7647)) ([137f256](https://github.com/shaka-project/shaka-player/commit/137f2562f0d95264bb7c73ee21f6b22f42c40e77))
* Fix change timestampOffset on discontinuities when not necessary ([#7823](https://github.com/shaka-project/shaka-player/issues/7823)) ([d3238dd](https://github.com/shaka-project/shaka-player/commit/d3238ddf150eb51c37498b2a3723b483aa0f4e3e))
* Fix ClearKey license on old CDMs ([#7816](https://github.com/shaka-project/shaka-player/issues/7816)) ([fe1f35b](https://github.com/shaka-project/shaka-player/commit/fe1f35bf3985a53c6b7f5860ffea81aa0ae0b73e))
* Fix gaps produced by the transmuxer ([#7822](https://github.com/shaka-project/shaka-player/issues/7822)) ([934bdff](https://github.com/shaka-project/shaka-player/commit/934bdff4d3c92c2032620a14e6204a50a769eb5c))
* Fix isEnded for live streams ([#7866](https://github.com/shaka-project/shaka-player/issues/7866)) ([5e5e5a8](https://github.com/shaka-project/shaka-player/commit/5e5e5a892fb6f9dfcf366c3213fa4c52d28e57f0))
* Fix isEnded when is not fullyLoaded ([#7883](https://github.com/shaka-project/shaka-player/issues/7883)) ([7e6116f](https://github.com/shaka-project/shaka-player/commit/7e6116fae5152d5e609f3105206a6151a18d267a))
* Fix missing EMSG events ([#7839](https://github.com/shaka-project/shaka-player/issues/7839)) ([e6ca059](https://github.com/shaka-project/shaka-player/commit/e6ca059e09d1da59c7461669ba97c2af6c71690c))
* Fix normalized codec for VP9 ([#7645](https://github.com/shaka-project/shaka-player/issues/7645)) ([f2061e4](https://github.com/shaka-project/shaka-player/commit/f2061e4f7386d5e7dc1c4792006bddcb090b95b8))
* Fix parameters lost during codec switch ([#7630](https://github.com/shaka-project/shaka-player/issues/7630)) ([7837b60](https://github.com/shaka-project/shaka-player/commit/7837b60a46d9faf1afd11d91710def323cb01636))
* Fix playback on Apple devices without ManagedMediaSource ([#7669](https://github.com/shaka-project/shaka-player/issues/7669)) ([ff7c465](https://github.com/shaka-project/shaka-player/commit/ff7c465cc09692428ef8394355568fd87ee43b63)), closes [#7666](https://github.com/shaka-project/shaka-player/issues/7666)
* Fix SEGMENT HEAD requests, compatibility with Cast SDK ([#7851](https://github.com/shaka-project/shaka-player/issues/7851)) ([b153a9c](https://github.com/shaka-project/shaka-player/commit/b153a9c4afc88285ff454e04874363ca70134fc1)), closes [#7600](https://github.com/shaka-project/shaka-player/issues/7600)
* Fix select spatial audio when using selectAudioLanguage ([#7846](https://github.com/shaka-project/shaka-player/issues/7846)) ([c5dc5f4](https://github.com/shaka-project/shaka-player/commit/c5dc5f4e8fd068e5b05085c67168f6d97d46273e))
* Fix setLiveSeekableRange when the seekable range is too short ([#7916](https://github.com/shaka-project/shaka-player/issues/7916)) ([30be525](https://github.com/shaka-project/shaka-player/commit/30be525aacdce356ef89d8d28e72f1ff8d122724))
* Fix support for supplemental codecs (Dolby Vision) ([#7720](https://github.com/shaka-project/shaka-player/issues/7720)) ([279e6cd](https://github.com/shaka-project/shaka-player/commit/279e6cdd01137e313bc429bd03a1e720dd52118e))
* Fix unload call after destroy ([#7690](https://github.com/shaka-project/shaka-player/issues/7690)) ([18652b6](https://github.com/shaka-project/shaka-player/commit/18652b6f36cbc78c27ff25bd2265fac10fcf78b0))
* Fix usage of keySystemsMapping ([#7736](https://github.com/shaka-project/shaka-player/issues/7736)) ([79a481e](https://github.com/shaka-project/shaka-player/commit/79a481e4ab71641a4f729cacd1a14c6314e2a63b))
* Fix video progress events accuracy ([#7654](https://github.com/shaka-project/shaka-player/issues/7654)) ([5f8e958](https://github.com/shaka-project/shaka-player/commit/5f8e958ef380610e5a1b3cd05d7693a45b5b868a))
* Follow the configured playRange for src= ([#7825](https://github.com/shaka-project/shaka-player/issues/7825)) ([b22e546](https://github.com/shaka-project/shaka-player/commit/b22e5468e08b51e148f2af34b1cad5526deb0e57))
* Forbid usage of instanceof ArrayBuffer ([#7653](https://github.com/shaka-project/shaka-player/issues/7653)) ([55b7bd0](https://github.com/shaka-project/shaka-player/commit/55b7bd0a70eb1c17e59c826571cf088f350dcb35)), closes [#6279](https://github.com/shaka-project/shaka-player/issues/6279)
* **HLS:** Assign EXT-X-TILES to segment tags ([#7864](https://github.com/shaka-project/shaka-player/issues/7864)) ([851308c](https://github.com/shaka-project/shaka-player/commit/851308c9dcc75b3ddeafb9a4eec5dc2b072c031d))
* **HLS:** Correctly identify webvtt subtitles with cmft extension ([#7791](https://github.com/shaka-project/shaka-player/issues/7791)) ([7ef5e62](https://github.com/shaka-project/shaka-player/commit/7ef5e6299a513bf3ada457f654939176d2187384))
* **HLS:** Disable audio/video correctly when loading a TS media playlist ([#7815](https://github.com/shaka-project/shaka-player/issues/7815)) ([626591e](https://github.com/shaka-project/shaka-player/commit/626591ef6b5219bb139fe9e959a8ad5ddd72e119))
* **HLS:** Disable text correctly when loading a media playlist ([#7840](https://github.com/shaka-project/shaka-player/issues/7840)) ([0fa17f6](https://github.com/shaka-project/shaka-player/commit/0fa17f66ba8e23995b5eadc0efcf20a56b22e636))
* **HLS:** Do not use EXT-X-PROGRAM-DATE-TIME on vod when there is only video or audio ([#7802](https://github.com/shaka-project/shaka-player/issues/7802)) ([fe94b6b](https://github.com/shaka-project/shaka-player/commit/fe94b6b81bc3a6e1cafbdc3a9c004e6681ea8482))
* **HLS:** Fix audio detection when there is no audio data but it appears in PMT ([#7838](https://github.com/shaka-project/shaka-player/issues/7838)) ([34b69fa](https://github.com/shaka-project/shaka-player/commit/34b69fa3b03c4cb1a0351f8ea81fd39510657b80))
* **HLS:** Fix playback of raw AAC ([#7641](https://github.com/shaka-project/shaka-player/issues/7641)) ([1d9ac65](https://github.com/shaka-project/shaka-player/commit/1d9ac659e4af256c900622b281140ff10ffa8c35))
* **HLS:** Fix subtitle timing ([#7625](https://github.com/shaka-project/shaka-player/issues/7625)) ([9e2b15e](https://github.com/shaka-project/shaka-player/commit/9e2b15ead40138485bfd9f00a8460c4e3daabc2f))
* **HLS:** Fix subtitle timing when no discontinuity but there is X-TIMESTAMP-MAP ([#7681](https://github.com/shaka-project/shaka-player/issues/7681)) ([7afe08e](https://github.com/shaka-project/shaka-player/commit/7afe08e49019c642b38269ae39021a7eb8a9167b))
* **HLS:** Fix timestamp offset for raw formats when using segments mode ([#7819](https://github.com/shaka-project/shaka-player/issues/7819)) ([bd29645](https://github.com/shaka-project/shaka-player/commit/bd29645a1ada7ed530966449eecff18c715e503a))
* **HLS:** Ignore errors when try to detect CC ([#7668](https://github.com/shaka-project/shaka-player/issues/7668)) ([5be0fc4](https://github.com/shaka-project/shaka-player/commit/5be0fc4364940356f0ab92d394331f9af84454d7))
* **HLS:** Omit daterange without START-DATE in order to avoid errors ([#7841](https://github.com/shaka-project/shaka-player/issues/7841)) ([bc0e1c6](https://github.com/shaka-project/shaka-player/commit/bc0e1c631fdcc023d192b0586e07ac0a54c0ec01))
* **Offline:** Allow downloading AES content ([#7827](https://github.com/shaka-project/shaka-player/issues/7827)) ([21bbd93](https://github.com/shaka-project/shaka-player/commit/21bbd93a50aa2c4b7f3ec7c2b2288f2abcd435b3))
* **Offline:** Allow storage of MSS streams ([#7799](https://github.com/shaka-project/shaka-player/issues/7799)) ([bc41643](https://github.com/shaka-project/shaka-player/commit/bc41643cf3d377f5668d866dec70eee0240902da))
* **Offline:** Fix download HLG tracks when using AUTO hdr level ([#7865](https://github.com/shaka-project/shaka-player/issues/7865)) ([0eedbc9](https://github.com/shaka-project/shaka-player/commit/0eedbc9a656faa6ecf0c71053a1a67268d5416dd))
* **Offline:** Fix some aborted downloads continue to download ([#7842](https://github.com/shaka-project/shaka-player/issues/7842)) ([fb8086b](https://github.com/shaka-project/shaka-player/commit/fb8086b0a3e8106ac6731b7de5ec7bfaa97833ac))
* Only create TextTrack of SimpleTextDisplayer when necessary ([#7913](https://github.com/shaka-project/shaka-player/issues/7913)) ([9e71a01](https://github.com/shaka-project/shaka-player/commit/9e71a011f2c0d1dad8d8077ef7e11eed3cfe8258))
* Prefer Dolby Vision p5 over Dolby Vision p8 ([#7745](https://github.com/shaka-project/shaka-player/issues/7745)) ([60429e9](https://github.com/shaka-project/shaka-player/commit/60429e93f9bd90a2f3448dd22958e6f70ab8028d))
* Prefer SimpleTextDisplayer on iOS ([#7569](https://github.com/shaka-project/shaka-player/issues/7569)) ([bd2c9a7](https://github.com/shaka-project/shaka-player/commit/bd2c9a7f4b13ef7b7f08d030689dab341d1200ef))
* **preload:** Wait for drm keys when preloading ([#7698](https://github.com/shaka-project/shaka-player/issues/7698)) ([a1e2f0a](https://github.com/shaka-project/shaka-player/commit/a1e2f0a2bb864a5260652b3c8442de1d774f2e41)), closes [#7520](https://github.com/shaka-project/shaka-player/issues/7520)
* **PS5:** Prevent uncaught promise rejections when requests are aborted ([#7637](https://github.com/shaka-project/shaka-player/issues/7637)) ([09cfac2](https://github.com/shaka-project/shaka-player/commit/09cfac20d1e2c74ab39deb4179aa47ac5d55e408))
* re-open the `MediaSource` if `readyState` is not open when the `init()` method is called. ([#7783](https://github.com/shaka-project/shaka-player/issues/7783)) ([6610fa3](https://github.com/shaka-project/shaka-player/commit/6610fa3e577c0c25d67b2e4cf2bb92eeeca4cd22))
* Remove useless calls to isTypeSupported ([#7817](https://github.com/shaka-project/shaka-player/issues/7817)) ([bd99632](https://github.com/shaka-project/shaka-player/commit/bd996328a5a0d2c2b797e47956695bfd8c33a231))
* Remove useless deprecation in UITextDisplayer and add some guards in SimpleTextDisplayer ([#7805](https://github.com/shaka-project/shaka-player/issues/7805)) ([fd78ec4](https://github.com/shaka-project/shaka-player/commit/fd78ec41f569ad4d1d4379b3e625116d607fd4a0))
* Silence aborted errors from PreloadManager. ([#7619](https://github.com/shaka-project/shaka-player/issues/7619)) ([f277f2c](https://github.com/shaka-project/shaka-player/commit/f277f2c8af48e5cd6d915a25f08041994b92edff)), closes [#7618](https://github.com/shaka-project/shaka-player/issues/7618)
* Silence uncaught rejection errors when closing EME sessions ([#7881](https://github.com/shaka-project/shaka-player/issues/7881)) ([bc6a79f](https://github.com/shaka-project/shaka-player/commit/bc6a79f9ebf9e73ba74027fe96ffc155d2c649c0))
* Timeout unfulfilled request to decodingInfo and requestMediaKeySystemAccess ([#7682](https://github.com/shaka-project/shaka-player/issues/7682)) ([07894ec](https://github.com/shaka-project/shaka-player/commit/07894ecf14a19ff2052d6029217c6eb201ece402)), closes [#7680](https://github.com/shaka-project/shaka-player/issues/7680)
* **Transmuxer:** Fix transmuxer with overflow data (video nalus and aac samples) between PES ([#7813](https://github.com/shaka-project/shaka-player/issues/7813)) ([77c4251](https://github.com/shaka-project/shaka-player/commit/77c4251fdcc8f4fa56ff494cc8a39cc1b5dd77a8))
* **tXml:** Fix findChildrenNS when the namespace is in the element ([#7896](https://github.com/shaka-project/shaka-player/issues/7896)) ([bcff34c](https://github.com/shaka-project/shaka-player/commit/bcff34c2c100eec35021069340cc3cdf945960cd))
* **UI:** Allow 1x playback rate when default playback rate is not x1 ([#7787](https://github.com/shaka-project/shaka-player/issues/7787)) ([724166e](https://github.com/shaka-project/shaka-player/commit/724166e3bdf6a0df65847dc7e9299e8a61202d1a))
* **UI:** Allow pause non-linear video ads ([#7699](https://github.com/shaka-project/shaka-player/issues/7699)) ([2953b6f](https://github.com/shaka-project/shaka-player/commit/2953b6f624a78f6814825a81a84ef668a6dd1da1))
* **UI:** Change to use legacy css format to support old TVs ([#7658](https://github.com/shaka-project/shaka-player/issues/7658)) ([e03dfc6](https://github.com/shaka-project/shaka-player/commit/e03dfc63f106a00132a3121c7f7a2e76401ffff1))
* **UI:** Do not show codec name when the same codec is used for the same language ([#7643](https://github.com/shaka-project/shaka-player/issues/7643)) ([87f6aa6](https://github.com/shaka-project/shaka-player/commit/87f6aa6f588149c343be56c7d52ca98c2f8f3884))
* **UI:** Fix exception while casting to mismatched player version ([#7631](https://github.com/shaka-project/shaka-player/issues/7631)) ([c9534a0](https://github.com/shaka-project/shaka-player/commit/c9534a0b654632867f11cd6521ccfd8f76e3ef86))
* **UI:** Fix handle of seek on MediaSession ([#7879](https://github.com/shaka-project/shaka-player/issues/7879)) ([57992b2](https://github.com/shaka-project/shaka-player/commit/57992b2b6311e4c7d3bb630b2675a134e691be16))
* **UI:** Fix playback rate resets when pausing or playing the video ([#7728](https://github.com/shaka-project/shaka-player/issues/7728)) ([6e382ce](https://github.com/shaka-project/shaka-player/commit/6e382ceb86f26e410fdea222b843dbee0d7f708a))
* **UI:** Hide ad counter when the ad is non-linear ([#7718](https://github.com/shaka-project/shaka-player/issues/7718)) ([effaf95](https://github.com/shaka-project/shaka-player/commit/effaf959d3ed3e7a5377c49bca61748569033e44))
* **UI:** Hide ad position when the ad is non-linear ([#7711](https://github.com/shaka-project/shaka-player/issues/7711)) ([8566836](https://github.com/shaka-project/shaka-player/commit/8566836720a1b268b460c6df0b304dfbe22f33d6))
* **UI:** Show Dolby Atmos name in the UI ([#7848](https://github.com/shaka-project/shaka-player/issues/7848)) ([a0848f7](https://github.com/shaka-project/shaka-player/commit/a0848f79ee13109968771ab95c3738db34b2b814))
* **UI:** Show presentation time when playing non-linear ads ([#7707](https://github.com/shaka-project/shaka-player/issues/7707)) ([d00ea51](https://github.com/shaka-project/shaka-player/commit/d00ea5130ea005f0e3704f4d9904cd8bf38a22c2))
* **UI:** Use trickPlay method to control the playback rate ([#7580](https://github.com/shaka-project/shaka-player/issues/7580)) ([70c2fda](https://github.com/shaka-project/shaka-player/commit/70c2fdae89143efd9078042768053d080306b2f8))
* **UI:** Video starts playing automatically when selecting a playback rate ([#7786](https://github.com/shaka-project/shaka-player/issues/7786)) ([ac568a4](https://github.com/shaka-project/shaka-player/commit/ac568a482cb2f5b84e9ff94abc744824239d6ef5))
* Use getSegmentAvailabilityStart instead of getSeekRangeStart to evict segments ([#7867](https://github.com/shaka-project/shaka-player/issues/7867)) ([11afdc8](https://github.com/shaka-project/shaka-player/commit/11afdc852cb711d22ce65354496f5f9850cd5d21))
* Use infiniteLiveStreamDuration equal to true in Safari 17 or above ([#7901](https://github.com/shaka-project/shaka-player/issues/7901)) ([5005fac](https://github.com/shaka-project/shaka-player/commit/5005fac01a4d29dcdc4f09c88df227bce16986a1))
* **Widevine:** Add default audio/video robustness for Widevine ([#7808](https://github.com/shaka-project/shaka-player/issues/7808)) ([a018f53](https://github.com/shaka-project/shaka-player/commit/a018f53307741bb22c4f077e2ed633c6b1490c58))
* **Xbox:** Simplify the use of WebView2 ([#7743](https://github.com/shaka-project/shaka-player/issues/7743)) ([775bc4e](https://github.com/shaka-project/shaka-player/commit/775bc4e44cdf52b790e5fb67c340d6fb69a20c86))


### Performance Improvements

* Improve GapJumpingController times ([#7921](https://github.com/shaka-project/shaka-player/issues/7921)) ([1b19391](https://github.com/shaka-project/shaka-player/commit/1b193916bdcf7f415a194d6d2b703d6198df4a6d))
* Improve times of probeSupport ([#7889](https://github.com/shaka-project/shaka-player/issues/7889)) ([c4931c1](https://github.com/shaka-project/shaka-player/commit/c4931c1b6de8af1a19f4c93c7efcebd606a6510d))
* Reduce calls to isTypeSupported ([#7729](https://github.com/shaka-project/shaka-player/issues/7729)) ([656d16c](https://github.com/shaka-project/shaka-player/commit/656d16c7e09069112d4172d739fc87d627c52c24))

## [4.12.0](https://github.com/shaka-project/shaka-player/compare/v4.11.0...v4.12.0) (2024-11-13)


### Features

* Add config to ignore hardware resolution ([#7572](https://github.com/shaka-project/shaka-player/issues/7572)) ([11a7b92](https://github.com/shaka-project/shaka-player/commit/11a7b926e864d8b96870acaa933589900edebe2f))
* Add manifest.disableIFrames config ([#7255](https://github.com/shaka-project/shaka-player/issues/7255)) ([7b07614](https://github.com/shaka-project/shaka-player/commit/7b076145327e7960e9dec51d24d774b9189f52a2))
* Add preferredTextFormats config ([#7523](https://github.com/shaka-project/shaka-player/issues/7523)) ([597e129](https://github.com/shaka-project/shaka-player/commit/597e129bd62b9603de6b38b5e1ea824a3d563a22))
* Add safeSeekEndOffset feature for live reposition ([#7532](https://github.com/shaka-project/shaka-player/issues/7532)) ([73524d0](https://github.com/shaka-project/shaka-player/commit/73524d021750be61479c136bd8a04e01593cf2d7))
* **Ads:** Add config to allow disable interstitials ([#7271](https://github.com/shaka-project/shaka-player/issues/7271)) ([64e45c9](https://github.com/shaka-project/shaka-player/commit/64e45c96ba468b938477b951a21a42b7d6de7d96))
* **Ads:** New HLS interstitial DATERANGE attributes for Skip Button ([#7467](https://github.com/shaka-project/shaka-player/issues/7467)) ([3107de3](https://github.com/shaka-project/shaka-player/commit/3107de3678b71cd5e70439b8419a2ccdd69f2d76))
* **Cast:** Enable storage in Android Cast devices ([#7292](https://github.com/shaka-project/shaka-player/issues/7292)) ([1434426](https://github.com/shaka-project/shaka-player/commit/1434426f2c3b9573a4480e6478ffeaa81d7e9f20))
* **DASH:** Disable xlink processing by default ([#7264](https://github.com/shaka-project/shaka-player/issues/7264)) ([d5ed8ed](https://github.com/shaka-project/shaka-player/commit/d5ed8edaf529613bcec624dc6a27e840e82ce4ea))
* **Demo:** Add new asset with DASH-FairPlay ([#7487](https://github.com/shaka-project/shaka-player/issues/7487)) ([fbc6179](https://github.com/shaka-project/shaka-player/commit/fbc6179aa6bb46163bf8a5caff5df41515be8446))
* Enable AirPlay in MSE ([#7431](https://github.com/shaka-project/shaka-player/issues/7431)) ([a6cf9cb](https://github.com/shaka-project/shaka-player/commit/a6cf9cbfd3d7e9dceeafc5fdc6903e99fbb6c8ef))
* Enable audio groups by default ([#7549](https://github.com/shaka-project/shaka-player/issues/7549)) ([5024184](https://github.com/shaka-project/shaka-player/commit/5024184363102554743ec513748ce85b5a5b3f63))
* **HLS:** Add the update period for HLS manifest ([#7498](https://github.com/shaka-project/shaka-player/issues/7498)) ([7b38ca8](https://github.com/shaka-project/shaka-player/commit/7b38ca8b4938bf4e75828549e1844645e89d357c))
* **HLS:** Make dummy streams for tags representing muxed audio ([#7343](https://github.com/shaka-project/shaka-player/issues/7343)) ([e2413ed](https://github.com/shaka-project/shaka-player/commit/e2413ed5f247088452b2fad8d408ec96db78e419))
* **i18n:** Add Belarusian translation ([#7409](https://github.com/shaka-project/shaka-player/issues/7409)) ([51d00b8](https://github.com/shaka-project/shaka-player/commit/51d00b8f082e571deb76f584f7eb39de2614d491))
* **Offline:** Allow store external text ([#7328](https://github.com/shaka-project/shaka-player/issues/7328)) ([346cf48](https://github.com/shaka-project/shaka-player/commit/346cf48a5ec88b7c62cf6d316a186c357c3a99d6))
* **Offline:** Allow store external thumbnails ([#7322](https://github.com/shaka-project/shaka-player/issues/7322)) ([013b3c7](https://github.com/shaka-project/shaka-player/commit/013b3c7f222ff74807f4beea7175bef97f595c0b))
* **preload:** Wait for prefetches when preloading ([#7533](https://github.com/shaka-project/shaka-player/issues/7533)) ([2ad1eff](https://github.com/shaka-project/shaka-player/commit/2ad1eff39ef063e026393a0e26ebc48ca3452b06)), closes [#7520](https://github.com/shaka-project/shaka-player/issues/7520)
* Remove streaming.parsePrftBox config ([#7358](https://github.com/shaka-project/shaka-player/issues/7358)) ([fc4893d](https://github.com/shaka-project/shaka-player/commit/fc4893d53818fec2af6f687076a25137160ab284))
* Support Fairplay DRM in DASH manifest. ([#7454](https://github.com/shaka-project/shaka-player/issues/7454)) ([c9f7723](https://github.com/shaka-project/shaka-player/commit/c9f7723d23c0b80eab7669c893bbe1969a818540))
* **UI:** Add close button to statistics panel ([#7482](https://github.com/shaka-project/shaka-player/issues/7482)) ([4e6e37c](https://github.com/shaka-project/shaka-player/commit/4e6e37c0ce7dc446dc19589f15542e00c813e466))
* **UI:** Added Mute button to context menu and overflow menu ([#7439](https://github.com/shaka-project/shaka-player/issues/7439)) ([e883fed](https://github.com/shaka-project/shaka-player/commit/e883fedd694688b8af585530aa0e7b407540ebca))
* **UI:** Allow configure the fullscreen mode in VisionOS ([#7540](https://github.com/shaka-project/shaka-player/issues/7540)) ([3bd0978](https://github.com/shaka-project/shaka-player/commit/3bd0978da07f560ea7049588b1dbc8ecaf38aefe))
* **UI:** Use the lang= attribute to help screen-readers recognize localized labels ([#7267](https://github.com/shaka-project/shaka-player/issues/7267)) ([3590aee](https://github.com/shaka-project/shaka-player/commit/3590aeea3d15e22e2734d888e354534b66c56845))
* Use source tags instead of src attribute ([#7406](https://github.com/shaka-project/shaka-player/issues/7406)) ([445b0ce](https://github.com/shaka-project/shaka-player/commit/445b0ce67f2b501491cc8df2399cdb177208e5e3))


### Bug Fixes

* Active track state on variantchanged and adaptation events ([#7350](https://github.com/shaka-project/shaka-player/issues/7350)) ([c15ca1d](https://github.com/shaka-project/shaka-player/commit/c15ca1dd180576b2512b03c4bcda75aaad2e3abe))
* **Ads:** Allow play interstitials on iOS fullscreen ([#7538](https://github.com/shaka-project/shaka-player/issues/7538)) ([84ae806](https://github.com/shaka-project/shaka-player/commit/84ae80675ade19e6cf542ef90481094b29a29d42))
* **Ads:** Allow play interstitials using single video element when use native HLS ([#7550](https://github.com/shaka-project/shaka-player/issues/7550)) ([fd6c322](https://github.com/shaka-project/shaka-player/commit/fd6c3223203b318f6236e227b31f234c87590a34))
* **Ads:** Allow preload and remove old interstitials when playing a interstitial ([#7465](https://github.com/shaka-project/shaka-player/issues/7465)) ([25e7620](https://github.com/shaka-project/shaka-player/commit/25e7620029dce214b0b3ba7ccfddc369f940fdc1))
* **Ads:** Disable interstitials when using AirPlay ([#7479](https://github.com/shaka-project/shaka-player/issues/7479)) ([2394ec2](https://github.com/shaka-project/shaka-player/commit/2394ec2b49d6a355a77afd529cfbaaacb04beea4))
* **Ads:** Don't load useless segments when using playoutLimit on interstitial ads ([#7469](https://github.com/shaka-project/shaka-player/issues/7469)) ([7d8510b](https://github.com/shaka-project/shaka-player/commit/7d8510b4619388bc9e1d9307202dc7299fda73f0))
* **Ads:** Fix duplicate Ads when playing interstitials through native HLS player ([#7527](https://github.com/shaka-project/shaka-player/issues/7527)) ([075713f](https://github.com/shaka-project/shaka-player/commit/075713f0e012b2287cd7b95a3219e8564cedc259))
* **Ads:** Fix JUMP implementation to avoid loop the same ad group in Interstitials ([#7329](https://github.com/shaka-project/shaka-player/issues/7329)) ([524014e](https://github.com/shaka-project/shaka-player/commit/524014e3bdff68464afffca8e6b4c36a5f9f5492))
* **Ads:** fix pre-roll identification when using src= ([#7493](https://github.com/shaka-project/shaka-player/issues/7493)) ([576e4a5](https://github.com/shaka-project/shaka-player/commit/576e4a5ea840643425e1ba530a1ef0601089149f))
* **Ads:** Limit interstitial duration to actual duration if available ([#7480](https://github.com/shaka-project/shaka-player/issues/7480)) ([ad9f2ac](https://github.com/shaka-project/shaka-player/commit/ad9f2ac039a61853ac3f0decdc55d29ebc19e044))
* **Ads:** Limit interstitial duration to actual duration if available when using src= ([#7488](https://github.com/shaka-project/shaka-player/issues/7488)) ([334a00e](https://github.com/shaka-project/shaka-player/commit/334a00e1b11f7e88ca2d32b2ff469e98a2736583))
* **Ads:** Release interstitials timer correctly ([#7373](https://github.com/shaka-project/shaka-player/issues/7373)) ([53b704f](https://github.com/shaka-project/shaka-player/commit/53b704f688dc5004e99bd50766940bedd02f16d6))
* **AirPlay:** Don't show subtitles on the player when using AirPlay ([#7514](https://github.com/shaka-project/shaka-player/issues/7514)) ([7c6dac5](https://github.com/shaka-project/shaka-player/commit/7c6dac55b628fd9723680492a4ead298a4270ae1))
* **AirPlay:** Prefer Playback Remote API for closeOpenSessions ([#7500](https://github.com/shaka-project/shaka-player/issues/7500)) ([30068a1](https://github.com/shaka-project/shaka-player/commit/30068a1cb522a6c18f47a506bb3276e4a9968f9b))
* **AirPlay:** Show AirPlay button when starting the playback with AirPlay ([#7515](https://github.com/shaka-project/shaka-player/issues/7515)) ([edb9e53](https://github.com/shaka-project/shaka-player/commit/edb9e532bab3184bf089bb462a88dea3608b65cb))
* Allow show subtitles using webkit Fullscreen API when playing native HLS ([#7539](https://github.com/shaka-project/shaka-player/issues/7539)) ([6ab6a8f](https://github.com/shaka-project/shaka-player/commit/6ab6a8f0cfc29d7919ac410e02f336b424df003f))
* Allow streaming again when we reset MSE ([#7495](https://github.com/shaka-project/shaka-player/issues/7495)) ([bc90c87](https://github.com/shaka-project/shaka-player/commit/bc90c87d2ae1ff918de280d85152cb8ba38cf8de))
* Avoid make HEAD request for image mime type ([#7332](https://github.com/shaka-project/shaka-player/issues/7332)) ([6716ff0](https://github.com/shaka-project/shaka-player/commit/6716ff00c411df5b284d0b705c0d7cd6ef2ec76e))
* Avoid notify buffered changes when segment appended is text ([#7353](https://github.com/shaka-project/shaka-player/issues/7353)) ([43314a1](https://github.com/shaka-project/shaka-player/commit/43314a1f1d1fa0c5ee18f7f388f2f76c9ad05e8a))
* calculations of channel count for DASH AudioChannelConfiguration elements. ([#7421](https://github.com/shaka-project/shaka-player/issues/7421)) ([669b7b3](https://github.com/shaka-project/shaka-player/commit/669b7b38297f240ee731bef09d1968c9ba756393))
* **DASH:** Allow mixing SegmentTemplate-SegmentTimeline with SegmentTemplate-numbering ([#7286](https://github.com/shaka-project/shaka-player/issues/7286)) ([e7229fb](https://github.com/shaka-project/shaka-player/commit/e7229fbc18ddd0dbc77548b9576d9256d4c74843))
* **DASH:** Avoid adding originalId when it is not necessary ([#7281](https://github.com/shaka-project/shaka-player/issues/7281)) ([a88be00](https://github.com/shaka-project/shaka-player/commit/a88be006536842641fc1c52298a3368461d0e7e1))
* **DASH:** Clear streamMap when period is removed from the manifest ([#7297](https://github.com/shaka-project/shaka-player/issues/7297)) ([da71e6d](https://github.com/shaka-project/shaka-player/commit/da71e6d644cc4123e6a3f5d134a8d28aad49a6f6))
* **DASH:** Clear usedPeriodIds when period is removed from the manifest ([#7305](https://github.com/shaka-project/shaka-player/issues/7305)) ([f8e3aa4](https://github.com/shaka-project/shaka-player/commit/f8e3aa4b61cd3a1a8282c7bd88ec891c8b896c27))
* **DASH:** Clone closedCaptions map in PeriodCombiner output stream ([#7309](https://github.com/shaka-project/shaka-player/issues/7309)) ([873bb24](https://github.com/shaka-project/shaka-player/commit/873bb2441abb100183dba80113f10fe191eb55d2)), closes [#7303](https://github.com/shaka-project/shaka-player/issues/7303)
* **DASH:** Clone EventStream nodes to reduce memory consumption ([#7285](https://github.com/shaka-project/shaka-player/issues/7285)) ([0023acc](https://github.com/shaka-project/shaka-player/commit/0023accf0f0b099544a4937a7651ab0fd917869e)), closes [#7148](https://github.com/shaka-project/shaka-player/issues/7148)
* **DASH:** Evict (by time) indexes in MetaSegmentIndex ([#7296](https://github.com/shaka-project/shaka-player/issues/7296)) ([69b317f](https://github.com/shaka-project/shaka-player/commit/69b317f32d22452b00c92fedf28056a44f26819a))
* **DASH:** Evict empty indexes in MetaSegmentIndex ([#7272](https://github.com/shaka-project/shaka-player/issues/7272)) ([c9998f9](https://github.com/shaka-project/shaka-player/commit/c9998f92819d08c936d4dd969d3fab3b191eb24e))
* **DASH:** Exclude text segments when calculating max segment size ([#7564](https://github.com/shaka-project/shaka-player/issues/7564)) ([3f9dec2](https://github.com/shaka-project/shaka-player/commit/3f9dec23422b16734250a3a2832cbe6c66862898))
* **DASH:** Fix HTTP redirect during manifest update ([#7339](https://github.com/shaka-project/shaka-player/issues/7339)) ([6532a7c](https://github.com/shaka-project/shaka-player/commit/6532a7c6050583f8bf6c31e39324c9eb857e5fdb))
* **DASH:** Live DASH allows segment overlap in the updated manifest for first new segments ([#7405](https://github.com/shaka-project/shaka-player/issues/7405)) ([051a8c5](https://github.com/shaka-project/shaka-player/commit/051a8c5edda97d396a283159b6e29e541784d7c6))
* **DASH:** Live to vod transition ([#7404](https://github.com/shaka-project/shaka-player/issues/7404)) ([2d14dd5](https://github.com/shaka-project/shaka-player/commit/2d14dd548073f7d05c7b3664a6412104a78dad63))
* **dash:** live to vod transition seek start ([#7347](https://github.com/shaka-project/shaka-player/issues/7347)) ([e02367c](https://github.com/shaka-project/shaka-player/commit/e02367cc1ee1a0a4dd66426341e0be389914d7cb))
* **DASH:** Release period combiner info correctly ([#7364](https://github.com/shaka-project/shaka-player/issues/7364)) ([fe2ea80](https://github.com/shaka-project/shaka-player/commit/fe2ea80ad4c7e9f6a5d297e8df3f72421552d11c))
* **DASH:** Use presentationTimeOffset in EventStream ([#7282](https://github.com/shaka-project/shaka-player/issues/7282)) ([c541b1c](https://github.com/shaka-project/shaka-player/commit/c541b1c9b4eb06d81af8262dfc8bd28141a13b29)), closes [#7277](https://github.com/shaka-project/shaka-player/issues/7277)
* Disable Encryption Scheme Polyfil On Some Devices ([#7355](https://github.com/shaka-project/shaka-player/issues/7355)) ([58f666b](https://github.com/shaka-project/shaka-player/commit/58f666ba7a1bc75baa70ab612e13caf46f70b737))
* Disable smooth codec switch if changeType is unavailable ([#7414](https://github.com/shaka-project/shaka-player/issues/7414)) ([c90d5ff](https://github.com/shaka-project/shaka-player/commit/c90d5ff82a7bd0171b3a8460c97e3283f6d4ff04))
* Do not allow MSE operations when using Remote Playback ([#7503](https://github.com/shaka-project/shaka-player/issues/7503)) ([b04caa3](https://github.com/shaka-project/shaka-player/commit/b04caa3b7461b82ba96c80ba2d349e193bd9e888))
* Do not recognize Sky Q as Apple device ([#7357](https://github.com/shaka-project/shaka-player/issues/7357)) ([e5fadab](https://github.com/shaka-project/shaka-player/commit/e5fadabca28de26c585b6f92703431c3c3515736))
* Do not reuse the same tsParser for different contentType ([#7563](https://github.com/shaka-project/shaka-player/issues/7563)) ([a020b19](https://github.com/shaka-project/shaka-player/commit/a020b1982b4844ba6d8bc94d25fcbd449548b0dd))
* Do not seek to first subtitle ([#7312](https://github.com/shaka-project/shaka-player/issues/7312)) ([0980ba3](https://github.com/shaka-project/shaka-player/commit/0980ba3e096d7e5a12bd5cbd93e9caa4fc65c9cb)), closes [#7310](https://github.com/shaka-project/shaka-player/issues/7310)
* **docs:** Add mising description of PRFT event ([#7403](https://github.com/shaka-project/shaka-player/issues/7403)) ([072f46c](https://github.com/shaka-project/shaka-player/commit/072f46c702a8557d1aba529ce7072c2f8b294614))
* Don't use info from MSE mode when using Remote Playback ([#7504](https://github.com/shaka-project/shaka-player/issues/7504)) ([e14a8eb](https://github.com/shaka-project/shaka-player/commit/e14a8eb6f76681cfbe8525b55deef0f9b0f49cb2))
* **DRM:** Fix persistent licenses not working for online playback ([#7457](https://github.com/shaka-project/shaka-player/issues/7457)) ([6088c1d](https://github.com/shaka-project/shaka-player/commit/6088c1db1af84d9f904bbfed8d745b67908e3a22))
* Evict buffer on QUOTA_EXCEEDED_ERROR error ([#7361](https://github.com/shaka-project/shaka-player/issues/7361)) ([0048e9d](https://github.com/shaka-project/shaka-player/commit/0048e9df1e57becb1c55aee2373dd518552cdfd3))
* Evict text buffer when unload the text stream ([#7360](https://github.com/shaka-project/shaka-player/issues/7360)) ([5b6652f](https://github.com/shaka-project/shaka-player/commit/5b6652f6f5cef0fba78850d19eb5c40265642e5e))
* Exclude TIMEOUT errors when disabling streams ([#7369](https://github.com/shaka-project/shaka-player/issues/7369)) ([67826ac](https://github.com/shaka-project/shaka-player/commit/67826acbe72bcfd74bf66db5d27434e6d287e0de)), closes [#7368](https://github.com/shaka-project/shaka-player/issues/7368)
* Export getFetchedPlaybackInfo ([#7418](https://github.com/shaka-project/shaka-player/issues/7418)) ([ce38dd9](https://github.com/shaka-project/shaka-player/commit/ce38dd980ee929272ceb0ffa0948eebb41c9626d)), closes [#7416](https://github.com/shaka-project/shaka-player/issues/7416)
* Fire PRFT event every time ([#7408](https://github.com/shaka-project/shaka-player/issues/7408)) ([e7f7825](https://github.com/shaka-project/shaka-player/commit/e7f78258ee843f8251beea469e3bf4c9ad83f7c8))
* Fix disable stream when no manifest ([#7497](https://github.com/shaka-project/shaka-player/issues/7497)) ([5e1fc5a](https://github.com/shaka-project/shaka-player/commit/5e1fc5a297bfbb515c2c7cce9761451e3c7a2ffd))
* Fix external image track mime type ([#7333](https://github.com/shaka-project/shaka-player/issues/7333)) ([3a146c2](https://github.com/shaka-project/shaka-player/commit/3a146c2ee6b151e21dcbd6d750d7ea1e405b8590))
* Fix metadata timing when using TS ([#7478](https://github.com/shaka-project/shaka-player/issues/7478)) ([2b56dcd](https://github.com/shaka-project/shaka-player/commit/2b56dcdc0886f715907a1f4b5c5288e3f9214fa1))
* Fix rendering of image subs when using SimpleTextDisplayer ([#7258](https://github.com/shaka-project/shaka-player/issues/7258)) ([3d0b817](https://github.com/shaka-project/shaka-player/commit/3d0b817588bc7925c4153740490b8d9ed4a1e345))
* Fix reset MSE to last independent segment ([#7494](https://github.com/shaka-project/shaka-player/issues/7494)) ([8c62370](https://github.com/shaka-project/shaka-player/commit/8c62370ec5ba2c4fac43f0b9eb7f84562d298505))
* Fix select HLG tracks when using AUTO hdr level ([#7470](https://github.com/shaka-project/shaka-player/issues/7470)) ([322ea6b](https://github.com/shaka-project/shaka-player/commit/322ea6b61674c38ec0e36c68afd9fcecf1ee00f3))
* Fix support of getAllThumbnails when using shaka.dash.TimelineSegmentIndex ([#7508](https://github.com/shaka-project/shaka-player/issues/7508)) ([0ff61a5](https://github.com/shaka-project/shaka-player/commit/0ff61a52b71a5a79a7faa38e7c3b8f4a0a5901ea))
* Fix Windows detection ([#7476](https://github.com/shaka-project/shaka-player/issues/7476)) ([fac9d84](https://github.com/shaka-project/shaka-player/commit/fac9d8472db7c0a579043b8d5cc84f7abc3628a8))
* **HLS:** Allow sync live streams without PROGRAM-DATE-TIME ([#7340](https://github.com/shaka-project/shaka-player/issues/7340)) ([db27227](https://github.com/shaka-project/shaka-player/commit/db27227c7326b7e66f5390170ac92f15f5b77aec))
* **HLS:** Avoid disabling muxed audio streams ([#7351](https://github.com/shaka-project/shaka-player/issues/7351)) ([53cea44](https://github.com/shaka-project/shaka-player/commit/53cea44791e39fe02ac5c5ebcfb87a2ee19a853f))
* **HLS:** Fix uncaught error in slow network scenario ([#7321](https://github.com/shaka-project/shaka-player/issues/7321)) ([68e579b](https://github.com/shaka-project/shaka-player/commit/68e579b6b0ba63a59af777193f07b06a1bca644e))
* **HLS:** Ignore DATERANGE with errors instead of fire an error ([#7499](https://github.com/shaka-project/shaka-player/issues/7499)) ([b2b4238](https://github.com/shaka-project/shaka-player/commit/b2b423890c91957fa8b3302081e5b1079b8f6e54))
* Install polyfills for Comcast X1 devices ([#7529](https://github.com/shaka-project/shaka-player/issues/7529)) ([2b2df4b](https://github.com/shaka-project/shaka-player/commit/2b2df4b2e24bc04709b44251e80df0890114a286))
* **MSS:** Don't allow prefetch segments with self-generated data ([#7485](https://github.com/shaka-project/shaka-player/issues/7485)) ([d502e9b](https://github.com/shaka-project/shaka-player/commit/d502e9b6896b6168fcb05b6aec3604e5ee22ae01))
* **MSS:** Fix playback of some MSS streams ([#7517](https://github.com/shaka-project/shaka-player/issues/7517)) ([6d0ee51](https://github.com/shaka-project/shaka-player/commit/6d0ee517a552a7087cfeb2d65481ab0b450c945e))
* **MSS:** Fix timeline repetitions ([#7484](https://github.com/shaka-project/shaka-player/issues/7484)) ([b1d3a3a](https://github.com/shaka-project/shaka-player/commit/b1d3a3ac8700305c52e5a723927f719879896cd7))
* **offline:** Text segments are downloaded before audio&video ([#7336](https://github.com/shaka-project/shaka-player/issues/7336)) ([e28a07e](https://github.com/shaka-project/shaka-player/commit/e28a07eaae61fbb0fd1f88cb9d00944f4da8777e))
* only use lastSegmentReference for knowing if variant changed ([#7537](https://github.com/shaka-project/shaka-player/issues/7537)) ([abfc0b2](https://github.com/shaka-project/shaka-player/commit/abfc0b2ac2e0bce206cfda26cbdd9fd36a60a2ec))
* **preload:** Resolve manifest promise sooner ([#7380](https://github.com/shaka-project/shaka-player/issues/7380)) ([c548315](https://github.com/shaka-project/shaka-player/commit/c54831500d47b509e777145e0ff55565533cc72e))
* **preload:** Set manifest before initializing DRM ([#7359](https://github.com/shaka-project/shaka-player/issues/7359)) ([b9ba66f](https://github.com/shaka-project/shaka-player/commit/b9ba66f211cc2c8ec372f441d0690c81406b65b9))
* **PS4/5:** Disable smooth codec switch on PS4/5 ([#7413](https://github.com/shaka-project/shaka-player/issues/7413)) ([7268a2b](https://github.com/shaka-project/shaka-player/commit/7268a2b64dfe74c9171316e49472b0ad399bc46e))
* Reduce calls to EME by ignoring MIME type in MediaKeySystemAccess cache ([#7374](https://github.com/shaka-project/shaka-player/issues/7374)) ([6a4e95b](https://github.com/shaka-project/shaka-player/commit/6a4e95bfaeddc6794ba043956d2c8a7b66e3f276)), closes [#7325](https://github.com/shaka-project/shaka-player/issues/7325)
* Reset MSE when we disconnect from Remote Playback ([#7506](https://github.com/shaka-project/shaka-player/issues/7506)) ([cf22042](https://github.com/shaka-project/shaka-player/commit/cf2204200e8ffec7ec27e3e0fe4bcfa78b5c33b7))
* Seek delay for Cast Nest hub ([#7423](https://github.com/shaka-project/shaka-player/issues/7423)) ([d454514](https://github.com/shaka-project/shaka-player/commit/d454514a1fadd965cd4b411f2a9f5c643de502f0))
* **Tizen:** Adding gapPadding to gap manager to solve Tizen issue ([#7331](https://github.com/shaka-project/shaka-player/issues/7331)) ([330e487](https://github.com/shaka-project/shaka-player/commit/330e4876f29c53bcdfc0e25f730d24502611780d))
* **TTML:** Fix absence of conversion of alpha (transparency) from 0-255 -&gt; 0-1 ([#7280](https://github.com/shaka-project/shaka-player/issues/7280)) ([fdf68d1](https://github.com/shaka-project/shaka-player/commit/fdf68d1994d5c0b561d2d5e68db1e9860f7eba0e)), closes [#7279](https://github.com/shaka-project/shaka-player/issues/7279)
* **TTML:** Fix subtitles not rendered due to complaint about xml:id ([#7270](https://github.com/shaka-project/shaka-player/issues/7270)) ([257de7f](https://github.com/shaka-project/shaka-player/commit/257de7fed392d84a5e19f997b78b1d539d07b6e8))
* **UI:** Disable fullscreen button conditionally when playing ads ([#7534](https://github.com/shaka-project/shaka-player/issues/7534)) ([1497148](https://github.com/shaka-project/shaka-player/commit/1497148eee1f2b32fa81b82a9e6455ba18dc82bf))
* **UI:** Disable save frame when using remote playback ([#7433](https://github.com/shaka-project/shaka-player/issues/7433)) ([263c6a6](https://github.com/shaka-project/shaka-player/commit/263c6a6a0f5df7fc2399c804e8e54f06b0f04bc7))
* **UI:** Display the font-family correctly in some cases ([#7266](https://github.com/shaka-project/shaka-player/issues/7266)) ([96f8914](https://github.com/shaka-project/shaka-player/commit/96f8914116ef4af69e333f1ad22ca167cd44e591))
* **UI:** Don't enable StatisticsButton when create overflow menu ([#7481](https://github.com/shaka-project/shaka-player/issues/7481)) ([ba36958](https://github.com/shaka-project/shaka-player/commit/ba369584bdd74e6c717f4e956c6e53b0422f190b))
* **UI:** Don't try to add MediaSessionHandler for PiP when it's not available ([#7376](https://github.com/shaka-project/shaka-player/issues/7376)) ([e71dca2](https://github.com/shaka-project/shaka-player/commit/e71dca214613b18379b8bc5c0b85fcec075ac301))
* **UI:** Fix "Live" label in some languages ([#7560](https://github.com/shaka-project/shaka-player/issues/7560)) ([8dae6e4](https://github.com/shaka-project/shaka-player/commit/8dae6e4e4058c82bd06835856d151f4c69893024))
* **UI:** Fix auto-load with source tags ([#7430](https://github.com/shaka-project/shaka-player/issues/7430)) ([0f2ee89](https://github.com/shaka-project/shaka-player/commit/0f2ee89df96baecbd3f0b62e59e8860993bd2461))
* **UI:** Fix mediaSession metadata update on Firefox ([#7375](https://github.com/shaka-project/shaka-player/issues/7375)) ([6884721](https://github.com/shaka-project/shaka-player/commit/6884721b0e45304b19da6eb900680e6468120e03))
* **UI:** Fix missing tracks in resolution selector ([#7352](https://github.com/shaka-project/shaka-player/issues/7352)) ([1314377](https://github.com/shaka-project/shaka-player/commit/131437734cad6c97b686a850c1b6dca33f0e7050))
* **UI:** Fix name for Dolby Digital Plus ([#7541](https://github.com/shaka-project/shaka-player/issues/7541)) ([a01b5fd](https://github.com/shaka-project/shaka-player/commit/a01b5fd449f5494beaba9c4b62efb5749be306c6))
* **UI:** Fix remote button availability and icon ([#7513](https://github.com/shaka-project/shaka-player/issues/7513)) ([c8bcfdb](https://github.com/shaka-project/shaka-player/commit/c8bcfdb7e9722bb73517e70fc9188eb675699b98))
* **UI:** Fix set MediaSession info when no previous Metadata ([#7521](https://github.com/shaka-project/shaka-player/issues/7521)) ([b00a2c3](https://github.com/shaka-project/shaka-player/commit/b00a2c3f3e286a0eca3ebc96bdc87dd836974410))
* **UI:** Fix the position of save video frame in the overflow menu ([#7438](https://github.com/shaka-project/shaka-player/issues/7438)) ([85282ce](https://github.com/shaka-project/shaka-player/commit/85282ceb4897f5bbb30ff6ef2959db9d5a4c6d36))
* **UI:** Hidden cursor correctly ([#7464](https://github.com/shaka-project/shaka-player/issues/7464)) ([3338579](https://github.com/shaka-project/shaka-player/commit/333857923e3ce1289ae19d4a6d01f31d8be95980))
* **UI:** Hidden cursor correctly when no touch screen ([#7458](https://github.com/shaka-project/shaka-player/issues/7458)) ([6e62cfa](https://github.com/shaka-project/shaka-player/commit/6e62cfa004f152e523c73904d79333a3b63a2a40))
* **UI:** Remove buffering spinner when playing a client side ad ([#7507](https://github.com/shaka-project/shaka-player/issues/7507)) ([b980f67](https://github.com/shaka-project/shaka-player/commit/b980f6785c9492a78c3615c1bc36a99d7ee0a952))
* **UI:** Remove spinner and client side ad container elements when calling destroy ([#7320](https://github.com/shaka-project/shaka-player/issues/7320)) ([3d51cb3](https://github.com/shaka-project/shaka-player/commit/3d51cb3c42d075d3b265990eb30f2d9c9fb9e5c8))
* **UI:** Restore missing AirPlay button ([#7389](https://github.com/shaka-project/shaka-player/issues/7389)) ([96da45a](https://github.com/shaka-project/shaka-player/commit/96da45a1823bd01cd79cc012b821c415fadf197a))
* **WebVTT:** Fix display italic subtitles with end align ([#7559](https://github.com/shaka-project/shaka-player/issues/7559)) ([781a27d](https://github.com/shaka-project/shaka-player/commit/781a27df8083ad5c6dc9c5c05a125befea71eff7))
* **WebVTT:** Fix mapNativeCueToShakaCue in Chromium browsers ([#7273](https://github.com/shaka-project/shaka-player/issues/7273)) ([76376e9](https://github.com/shaka-project/shaka-player/commit/76376e97f181bae042e23ff2c6e1e0df8b9185d7))


### Performance Improvements

* **Ads:** Reduce latency for interstitial to start playing ([#7525](https://github.com/shaka-project/shaka-player/issues/7525)) ([5ee6a4d](https://github.com/shaka-project/shaka-player/commit/5ee6a4d2f54141af4f71e38d5e0d14a3949c6ebc))
* **Ads:** Reduce latency for interstitial to start playing ([#7528](https://github.com/shaka-project/shaka-player/issues/7528)) ([6303924](https://github.com/shaka-project/shaka-player/commit/6303924dca9a071f4c610da4111773f21cac8e28))
* **DASH:** Create segment indexes only on new periods ([#7294](https://github.com/shaka-project/shaka-player/issues/7294)) ([173a814](https://github.com/shaka-project/shaka-player/commit/173a814e5baf2927ecacd3f340cdb1d4d02b242c))
* **DASH:** Delete old matchedStreams ([#7301](https://github.com/shaka-project/shaka-player/issues/7301)) ([d559366](https://github.com/shaka-project/shaka-player/commit/d5593661682c130fb8f9be1fb4cd4756b8653925))
* **DASH:** Delete old matchedStreams when using trickmodeVideo ([#7306](https://github.com/shaka-project/shaka-player/issues/7306)) ([4ab3dea](https://github.com/shaka-project/shaka-player/commit/4ab3dea8c1c089840c2b00b7759ca5af1ce448b0))
* Improve performance when parsing EMSG ([#7557](https://github.com/shaka-project/shaka-player/issues/7557)) ([cb66f47](https://github.com/shaka-project/shaka-player/commit/cb66f471a2c4fe1bf3341b6f8af36729f2cbbac7))
* Only use tXml parent when necessary ([#7304](https://github.com/shaka-project/shaka-player/issues/7304)) ([7ceffc0](https://github.com/shaka-project/shaka-player/commit/7ceffc0db7670b8c6afec9e1d271d86764425b1a))

## [4.11.0](https://github.com/shaka-project/shaka-player/compare/v4.10.0...v4.11.0) (2024-09-04)


### Features

* **ABR:** Add preferNetworkInformationBandwidth config ([#7090](https://github.com/shaka-project/shaka-player/issues/7090)) ([6425b91](https://github.com/shaka-project/shaka-player/commit/6425b91320b3c8cc1ff858aa2f0b4052a3690f6c))
* Add getFetchedPlaybackInfo method ([#7074](https://github.com/shaka-project/shaka-player/issues/7074)) ([ef02763](https://github.com/shaka-project/shaka-player/commit/ef02763b52a6b58f84176ee1283fcb8fecb6ab54))
* Add public method for parsing cue payload ([#6992](https://github.com/shaka-project/shaka-player/issues/6992)) ([eeadace](https://github.com/shaka-project/shaka-player/commit/eeadace2beb03d57af35de2130e396e7d4356a7d))
* Add video codec preference array at same resolution and bitrate ([#7204](https://github.com/shaka-project/shaka-player/issues/7204)) ([28523a3](https://github.com/shaka-project/shaka-player/commit/28523a356401d742496ec1e153d49ea4e6d61ddf))
* Add width/height to getFetchedPlaybackInfo ([#7107](https://github.com/shaka-project/shaka-player/issues/7107)) ([e58ac70](https://github.com/shaka-project/shaka-player/commit/e58ac70e00c7c0b6467d65f22d9155c7911f4f3f)), closes [#6725](https://github.com/shaka-project/shaka-player/issues/6725)
* **Ads:** Add basic VAST support without IMA ([#7052](https://github.com/shaka-project/shaka-player/issues/7052)) ([c59922b](https://github.com/shaka-project/shaka-player/commit/c59922bae593b780dac2a0cdcba41691567b66a7))
* **Ads:** Add basic VMAP support without IMA ([#7054](https://github.com/shaka-project/shaka-player/issues/7054)) ([a6f3999](https://github.com/shaka-project/shaka-player/commit/a6f39995c4b20db2e62ab74d83b8fda18e7a59e3))
* **Ads:** Added advanced type to ad requests ([#7196](https://github.com/shaka-project/shaka-player/issues/7196)) ([f5b78dc](https://github.com/shaka-project/shaka-player/commit/f5b78dc88ab15fbc23a1133578d6db9597a76c55))
* **Ads:** Allow the use of custom interstitials ads ([#6991](https://github.com/shaka-project/shaka-player/issues/6991)) ([9e1f4e7](https://github.com/shaka-project/shaka-player/commit/9e1f4e7b8c5240f0c189fe2a344360da5859ec0e))
* Allow set the videoContainer in the Player constructor ([#6953](https://github.com/shaka-project/shaka-player/issues/6953)) ([a35028c](https://github.com/shaka-project/shaka-player/commit/a35028c3bc3179bf17f5e893bac10dfff6809890))
* **CEA:** Support alignment in CEA-608 ([#7022](https://github.com/shaka-project/shaka-player/issues/7022)) ([11a2cc5](https://github.com/shaka-project/shaka-player/commit/11a2cc5db240d6bd3803d37cddf7e3d6e0724ee2))
* **CMCD:** Implement new streaming format from CMCDv2 ([#7216](https://github.com/shaka-project/shaka-player/issues/7216)) ([8842648](https://github.com/shaka-project/shaka-player/commit/88426487a7efab97156c9b1d7f41b5ce1fb7b633))
* **DASH:** Add DVB Font downloads ([#6971](https://github.com/shaka-project/shaka-player/issues/6971)) ([789101c](https://github.com/shaka-project/shaka-player/commit/789101cbbae63a85a49838ef0df85141df6e8f2a))
* **DASH:** Add support for urn:mpeg:dash:ssr:2023 with SegmentTemplate $Number$ ([#6745](https://github.com/shaka-project/shaka-player/issues/6745)) ([3cb40bf](https://github.com/shaka-project/shaka-player/commit/3cb40bf516d3533dbcacaef3631c41f423eda7be))
* **DASH:** MPD Alternate support ([#7055](https://github.com/shaka-project/shaka-player/issues/7055)) ([93f2d96](https://github.com/shaka-project/shaka-player/commit/93f2d96a4527ea35a62b749752bbca2e2d6c289c))
* **DASH:** Support Annex I: Flexible Insertion of URL Parameters ([#7086](https://github.com/shaka-project/shaka-player/issues/7086)) ([a5adb39](https://github.com/shaka-project/shaka-player/commit/a5adb397139cd2f55cb238725aa18cb3891ef742))
* **DASH:** Support DVB fonts with relative urls ([#6974](https://github.com/shaka-project/shaka-player/issues/6974)) ([5849e25](https://github.com/shaka-project/shaka-player/commit/5849e2579d32cd0ab76bb5215f22372ce15d2416))
* **DASH:** Support trick-mode per resolution ([#7224](https://github.com/shaka-project/shaka-player/issues/7224)) ([cb5aae4](https://github.com/shaka-project/shaka-player/commit/cb5aae47c036a58c12aadb46954a52680e713a82))
* Dispatch MediaSourceRecovered event ([#7198](https://github.com/shaka-project/shaka-player/issues/7198)) ([fd5b09c](https://github.com/shaka-project/shaka-player/commit/fd5b09c1bf425a280bb61262140b53da124aa32a))
* Export addFont method ([#6975](https://github.com/shaka-project/shaka-player/issues/6975)) ([afc3e59](https://github.com/shaka-project/shaka-player/commit/afc3e59c61978b3a2fec19cbe8d52f895e462a28))
* **HLS:** Add I-Frame playlist support ([#7230](https://github.com/shaka-project/shaka-player/issues/7230)) ([67859c9](https://github.com/shaka-project/shaka-player/commit/67859c987c90ebdd3982e00b7f1df718b0ea6898))
* **HLS:** Add support for EXT-X-START ([#6938](https://github.com/shaka-project/shaka-player/issues/6938)) ([d63df14](https://github.com/shaka-project/shaka-player/commit/d63df145aacbf09f9a4c99c54e22a09c10432d9e))
* **HLS:** Deprecate useSafariBehaviorForLive config ([#6978](https://github.com/shaka-project/shaka-player/issues/6978)) ([aaeafa4](https://github.com/shaka-project/shaka-player/commit/aaeafa451c98c0afc6bb5c7bdc7a54319b7402c5))
* **net:** Add minimum bytes for progress events ([#7117](https://github.com/shaka-project/shaka-player/issues/7117)) ([d36ff65](https://github.com/shaka-project/shaka-player/commit/d36ff6553c174682d8d12b91a54669b6439ed768))
* Parse TS frameRate ([#6998](https://github.com/shaka-project/shaka-player/issues/6998)) ([f4f9b05](https://github.com/shaka-project/shaka-player/commit/f4f9b05e63b55385a6f6e0b53f4d5f52e37fcb3c))
* **preload:** Add isPreload to net filter context ([#7170](https://github.com/shaka-project/shaka-player/issues/7170)) ([5723a2b](https://github.com/shaka-project/shaka-player/commit/5723a2bbe46e0030e0e6a454afb7c5341544171f))
* Render native cues using text displayer ([#6985](https://github.com/shaka-project/shaka-player/issues/6985)) ([6c0c63d](https://github.com/shaka-project/shaka-player/commit/6c0c63d38ca8a41a734559aa62d88af18e6d5b9c))
* Store bandwidth info inside references. ([#6825](https://github.com/shaka-project/shaka-player/issues/6825)) ([b4e04b6](https://github.com/shaka-project/shaka-player/commit/b4e04b6616bccc2e04a05416dc41538da5a32e54))
* **TTML:** Add support for IMSC1 (CMAF) image subtitle ([#6968](https://github.com/shaka-project/shaka-player/issues/6968)) ([3b62296](https://github.com/shaka-project/shaka-player/commit/3b6229616e7fab5aab412acf7a16511c4f926c9f))
* **UI:** Add chapter button ([#7018](https://github.com/shaka-project/shaka-player/issues/7018)) ([87bf738](https://github.com/shaka-project/shaka-player/commit/87bf738ece4081e4ed4ea2fa52467e6d09cb542d))
* **UI:** Add MediaSession management ([#7188](https://github.com/shaka-project/shaka-player/issues/7188)) ([3026ba5](https://github.com/shaka-project/shaka-player/commit/3026ba518b21017bbb8b99d5d69f5c73f7b7f927))


### Bug Fixes

* **ABR:** Do not adapt between spatial & non spatial audio ([#7067](https://github.com/shaka-project/shaka-player/issues/7067)) ([1dc5c87](https://github.com/shaka-project/shaka-player/commit/1dc5c8719cc5308c552b5a05ccd6e517f143edc0))
* **ABR:** Fix restrictToElementSize running while abr disabled ([#7153](https://github.com/shaka-project/shaka-player/issues/7153)) ([aea85b0](https://github.com/shaka-project/shaka-player/commit/aea85b04b6f603bd2c4550b31d8b48a14ff0ffab))
* **ABR:** Not change to another quality without respecting a min time ([#6979](https://github.com/shaka-project/shaka-player/issues/6979)) ([a5095a8](https://github.com/shaka-project/shaka-player/commit/a5095a80d34ecf04b3f919d780d956be00369e0a))
* Add more info in getVariantTracks for muxed streams ([#7181](https://github.com/shaka-project/shaka-player/issues/7181)) ([d63c44a](https://github.com/shaka-project/shaka-player/commit/d63c44afba8e217238d2e4eb25b27778f4fd3cb1))
* Add null check for current reference ([#7184](https://github.com/shaka-project/shaka-player/issues/7184)) ([f5aceed](https://github.com/shaka-project/shaka-player/commit/f5aceeddb3824487dfc4355158bfcfd5cee7a378))
* Adjust timing of mediaqualitychanged event when safe margin is set ([#7114](https://github.com/shaka-project/shaka-player/issues/7114)) ([f6ac236](https://github.com/shaka-project/shaka-player/commit/f6ac236f99f840a2ab5f82fc3138f490ee72a6d3))
* **Ads:** Detect correctly interstitial preroll when using native HLS playback in Safari ([#7093](https://github.com/shaka-project/shaka-player/issues/7093)) ([9912798](https://github.com/shaka-project/shaka-player/commit/9912798137a05af9c2a1d67a85d911b3ec472607))
* **Ads:** Don't show duplicate SKIP UI in IMA CS ([#7084](https://github.com/shaka-project/shaka-player/issues/7084)) ([9337143](https://github.com/shaka-project/shaka-player/commit/9337143856058c7f3773268556b875c4afa5e309))
* **Ads:** Fix back to live for native HLS when interstitial endTime is Infinity ([#7095](https://github.com/shaka-project/shaka-player/issues/7095)) ([18aea54](https://github.com/shaka-project/shaka-player/commit/18aea54f6e4a1013bc8fe4075f11b4662aa705c8))
* **Ads:** Fix mangled properties when using X-ASSET-LIST ([#7002](https://github.com/shaka-project/shaka-player/issues/7002)) ([ade19cb](https://github.com/shaka-project/shaka-player/commit/ade19cb2601a954c372dbc111a5088b54fbb3b87))
* **Ads:** Fix playback of preroll interstitial when the currentTime is 0 ([#7092](https://github.com/shaka-project/shaka-player/issues/7092)) ([0cdeb65](https://github.com/shaka-project/shaka-player/commit/0cdeb65799c262203ef5e94e273da1e3575cb1e1))
* **Ads:** Fix timelineRange detection in HLS interstitials ([#7091](https://github.com/shaka-project/shaka-player/issues/7091)) ([d79f8e2](https://github.com/shaka-project/shaka-player/commit/d79f8e2ce387b91ef79bb9a99a620b5310e17bdd))
* **Ads:** Only allow play the preroll once ([#7096](https://github.com/shaka-project/shaka-player/issues/7096)) ([0248268](https://github.com/shaka-project/shaka-player/commit/024826811d0ac5aff853df5123389a50759cf16a))
* Allow dispatch metadata event with cueTime equal to 0 ([#7098](https://github.com/shaka-project/shaka-player/issues/7098)) ([dcdecf9](https://github.com/shaka-project/shaka-player/commit/dcdecf9de0447b336e361b557364e7c7a60c0dd1))
* Allow recover normal stream when trick play stream fails ([#7234](https://github.com/shaka-project/shaka-player/issues/7234)) ([2638ada](https://github.com/shaka-project/shaka-player/commit/2638ada153ef477bbe5414c9050701a56ec91cda))
* Allow reference mimeType change in StreamingEngine ([#7061](https://github.com/shaka-project/shaka-player/issues/7061)) ([bf6632e](https://github.com/shaka-project/shaka-player/commit/bf6632e325e4690d4242c33236f7f5a984e1c83e))
* Apply playRange config to src= ([#7168](https://github.com/shaka-project/shaka-player/issues/7168)) ([7cf332e](https://github.com/shaka-project/shaka-player/commit/7cf332e3a9ed1cbf14d22e720d07922e70df542d))
* Avoid clear buffer when select the same audio track ([#6959](https://github.com/shaka-project/shaka-player/issues/6959)) ([b953a75](https://github.com/shaka-project/shaka-player/commit/b953a75474f52f79d3f6ade0a2a18cb30e56cd9e))
* Avoid reset iterator when seek into the buffer ([#7004](https://github.com/shaka-project/shaka-player/issues/7004)) ([dc34ec4](https://github.com/shaka-project/shaka-player/commit/dc34ec484a241c420eb6216a1151ffc7ed3c4817))
* **CEA:** Always init CEA parser with new init segment ([#7102](https://github.com/shaka-project/shaka-player/issues/7102)) ([61e570e](https://github.com/shaka-project/shaka-player/commit/61e570efa4056a913c523ef7a66511314e353eb1))
* **CEA:** Offset text CEA-608 that are out of viewport ([#7024](https://github.com/shaka-project/shaka-player/issues/7024)) ([230f6e0](https://github.com/shaka-project/shaka-player/commit/230f6e0095e74ea1f88a43c0da099d20d6ddfd41))
* Compare normalized codecs in codec switching checks ([#7143](https://github.com/shaka-project/shaka-player/issues/7143)) ([01545f4](https://github.com/shaka-project/shaka-player/commit/01545f4c3eb540d6cc32c11a91874d53ddf92386))
* Correct the behavior to defer closeSegmentIndex() calls during updates ([#7217](https://github.com/shaka-project/shaka-player/issues/7217)) ([7ba7e61](https://github.com/shaka-project/shaka-player/commit/7ba7e618d0991e0c31b9c126919c411aa35c2a97))
* **DASH:** Allow play all time fastSwitching tracks ([#7180](https://github.com/shaka-project/shaka-player/issues/7180)) ([4abfc5a](https://github.com/shaka-project/shaka-player/commit/4abfc5ac82927afa16ffdde270dd73ff42281f82))
* **DASH:** Clear streamMap when period is removed from the manifest ([#7202](https://github.com/shaka-project/shaka-player/issues/7202)) ([c5df88b](https://github.com/shaka-project/shaka-player/commit/c5df88b49542f324154adf0a5655a66d1da32d9a))
* **DASH:** Fix allPartialSegments signal when using L3D ([#7179](https://github.com/shaka-project/shaka-player/issues/7179)) ([a1d3927](https://github.com/shaka-project/shaka-player/commit/a1d392764067cef57906cc007c7c7f46117da472))
* **DASH:** Fix codec/mimeType for single text file ([#7075](https://github.com/shaka-project/shaka-player/issues/7075)) ([4728d08](https://github.com/shaka-project/shaka-player/commit/4728d082d7249970884a0457dec02a441936332f))
* **DASH:** Fix creation of multiperiod trickmode streams ([#7229](https://github.com/shaka-project/shaka-player/issues/7229)) ([ebab340](https://github.com/shaka-project/shaka-player/commit/ebab340d9aae7fddc1193f8598271ddedcd7f1c7))
* **DASH:** Fix EventStream Elements creation ([#7194](https://github.com/shaka-project/shaka-player/issues/7194)) ([bd06fe7](https://github.com/shaka-project/shaka-player/commit/bd06fe7a3d405b3705596b7a6fbf9e1334d6410c))
* **DASH:** Fix MPD Patch when SegmentTemplate is shared between Representations ([#7218](https://github.com/shaka-project/shaka-player/issues/7218)) ([b2502fd](https://github.com/shaka-project/shaka-player/commit/b2502fd0a0093dc9acddb8b18c7e87ef061098c6)), closes [#7214](https://github.com/shaka-project/shaka-player/issues/7214)
* **DASH:** Fix period combining when roles are equal ([#7065](https://github.com/shaka-project/shaka-player/issues/7065)) ([38c691b](https://github.com/shaka-project/shaka-player/commit/38c691beb51fc0bceafee3fbb72248598ca98376))
* **DASH:** Fix transitions from 'dynamic' to 'static' ([#7029](https://github.com/shaka-project/shaka-player/issues/7029)) ([3ba94b8](https://github.com/shaka-project/shaka-player/commit/3ba94b82ea43dcca71e129be0c24b1ee792f66d6))
* **DASH:** Improve memory usage with live streams ([#7039](https://github.com/shaka-project/shaka-player/issues/7039)) ([d1435c7](https://github.com/shaka-project/shaka-player/commit/d1435c74591859b16bf5063433b386d364d8331e))
* **DASH:** Patch manifest Adaptationset indexing, [@n](https://github.com/n)=&lt;Numbering&gt; and [@t](https://github.com/t)=<time> ([#7131](https://github.com/shaka-project/shaka-player/issues/7131)) ([0f2cea4](https://github.com/shaka-project/shaka-player/commit/0f2cea42eede4f8f4823fe9f6c9e25dfdecb45d3))
* **DASH:** Prioritize highest bandwidth in PeriodCombiner ([#7045](https://github.com/shaka-project/shaka-player/issues/7045)) ([29ed0a8](https://github.com/shaka-project/shaka-player/commit/29ed0a84f2bad98d59e34ad76436947ff4c90a32))
* **DASH:** Use proper namespace when mapping TXml node to Element ([#7240](https://github.com/shaka-project/shaka-player/issues/7240)) ([cd2fc71](https://github.com/shaka-project/shaka-player/commit/cd2fc715dc3586b80af1b8efa6664c31cce7e02d))
* Defer `closeSegmentIndex()` for old streams during ABR switches when segment fetches are ongoing ([#7157](https://github.com/shaka-project/shaka-player/issues/7157)) ([4cff18d](https://github.com/shaka-project/shaka-player/commit/4cff18dd3c0ac4f20662deb4e2e21b14d977306a))
* Destroy correctly unused transmuxer ([#7059](https://github.com/shaka-project/shaka-player/issues/7059)) ([f161a1c](https://github.com/shaka-project/shaka-player/commit/f161a1cd8f4d044a49b29d91f2819621c30d2dfd))
* Disable CC with disableText config ([#7078](https://github.com/shaka-project/shaka-player/issues/7078)) ([f9040ce](https://github.com/shaka-project/shaka-player/commit/f9040ce2fbd78ff9ad9780ae0f50321a9efd1c6c))
* Disable seek retry cooldown on most platforms ([#7010](https://github.com/shaka-project/shaka-player/issues/7010)) ([dcc60f9](https://github.com/shaka-project/shaka-player/commit/dcc60f9ea99689b855120a75aad52315e33cd71c))
* Do not minify CodecSwitchingStrategy enum keys ([#7200](https://github.com/shaka-project/shaka-player/issues/7200)) ([f718139](https://github.com/shaka-project/shaka-player/commit/f718139810fae603fbe7e3700fc80866efa202c2))
* Don't throw an error when trying to disable a trick mode stream ([#7235](https://github.com/shaka-project/shaka-player/issues/7235)) ([92f70ee](https://github.com/shaka-project/shaka-player/commit/92f70eeb081e5be1058dfd6e39029403ec6d544d))
* Dont use inaccurateManifestTolerance for sequenceMode ([#7207](https://github.com/shaka-project/shaka-player/issues/7207)) ([b119c03](https://github.com/shaka-project/shaka-player/commit/b119c0311292dde479d747d0a76c4a499db5338e))
* Dont use trick play track for liveSync feature ([#7219](https://github.com/shaka-project/shaka-player/issues/7219)) ([b7481f2](https://github.com/shaka-project/shaka-player/commit/b7481f2bc92892c40b708f7ed33909f975481c02))
* Exclude future segments in notifyTimeRange calculations ([#6970](https://github.com/shaka-project/shaka-player/issues/6970)) ([62881f6](https://github.com/shaka-project/shaka-player/commit/62881f6aad4d3da540325977b101759ff26f6b94))
* Filter duplicate cues on text displayer append ([#6949](https://github.com/shaka-project/shaka-player/issues/6949)) ([fa9feb3](https://github.com/shaka-project/shaka-player/commit/fa9feb346f0a9dac1a86bdd364868a48c88c058f))
* Fire the correct error code in src= mode in some situations ([#7167](https://github.com/shaka-project/shaka-player/issues/7167)) ([a7a307c](https://github.com/shaka-project/shaka-player/commit/a7a307c513bc6c538c0dee200aff846501c075e1))
* Fix bad warning when use selectAudioLanguage ([#6999](https://github.com/shaka-project/shaka-player/issues/6999)) ([fbf1ad0](https://github.com/shaka-project/shaka-player/commit/fbf1ad0c896fb3458daa4875f3cb613321edd1a6))
* Fix ended state in stateHistory ([#7189](https://github.com/shaka-project/shaka-player/issues/7189)) ([f6be619](https://github.com/shaka-project/shaka-player/commit/f6be6190121342dd9521a0aa32810809d9750a52))
* Fix error thrown after catching null error ([#7177](https://github.com/shaka-project/shaka-player/issues/7177)) ([b4dc2ad](https://github.com/shaka-project/shaka-player/commit/b4dc2adf43c43cc5c34bd4032859ef30bb68d659))
* Fix horizontal alignment of WebVTT in UITextDisplayer ([#7169](https://github.com/shaka-project/shaka-player/issues/7169)) ([efac129](https://github.com/shaka-project/shaka-player/commit/efac12984fe40e3d92341bc44d20b05085497b69))
* Fix ID3 timing when included in EMSG ([#7099](https://github.com/shaka-project/shaka-player/issues/7099)) ([eb36c0d](https://github.com/shaka-project/shaka-player/commit/eb36c0d264d67bcd0fe99f06cd6c76b3dcfd61c2))
* Fix iteration of document.fonts ([#6976](https://github.com/shaka-project/shaka-player/issues/6976)) ([c70586c](https://github.com/shaka-project/shaka-player/commit/c70586cfda34f5963a4bfc63dafa3d29c7b33308))
* Fix MSE polyfill for iOS ([#7049](https://github.com/shaka-project/shaka-player/issues/7049)) ([fcd87aa](https://github.com/shaka-project/shaka-player/commit/fcd87aa327c8d55ba9a2fae6f1b0b371725f1b70))
* Fix NaN and empty objects in getNonDefaultConfiguration ([#6956](https://github.com/shaka-project/shaka-player/issues/6956)) ([52e3864](https://github.com/shaka-project/shaka-player/commit/52e3864fd06ab7f3acb6d7bab87cc1a25b7ff7f1))
* Fix normalized codec for VVC ([#7201](https://github.com/shaka-project/shaka-player/issues/7201)) ([8ca1b74](https://github.com/shaka-project/shaka-player/commit/8ca1b741986b7c47ca2873fe424cf8d32c6df215))
* Fix skip interstitials with another ID but same URL ([#7050](https://github.com/shaka-project/shaka-player/issues/7050)) ([8b70bb6](https://github.com/shaka-project/shaka-player/commit/8b70bb6c388be9f9fb96bd79b00d4dddc7744e03))
* Fix support for Dolby Vision based in VVC ([#7212](https://github.com/shaka-project/shaka-player/issues/7212)) ([cdbbe23](https://github.com/shaka-project/shaka-player/commit/cdbbe232b1521aa2caafbf1d2c4ef93c768f1339))
* Fix type passed to isTypeSupported in some cases ([#7233](https://github.com/shaka-project/shaka-player/issues/7233)) ([3e3953d](https://github.com/shaka-project/shaka-player/commit/3e3953deb3e38bd7d4a954e027ff4a79de03db64))
* Fix UITextDisplayer desync & null pointer exception ([#7199](https://github.com/shaka-project/shaka-player/issues/7199)) ([247753d](https://github.com/shaka-project/shaka-player/commit/247753d8314a9ecc42ee8c4a71cfac327edaff50))
* **HLS:** A/V sync regression for HLS live ([#6987](https://github.com/shaka-project/shaka-player/issues/6987)) ([da6c605](https://github.com/shaka-project/shaka-player/commit/da6c6058f92637f30466fd45ce67d9b21647d4f7))
* **HLS:** A/V sync regression for HLS with different segment sizes ([#7015](https://github.com/shaka-project/shaka-player/issues/7015)) ([83955ee](https://github.com/shaka-project/shaka-player/commit/83955eecfd1412e0201ade97b2511f48d6b67ba4))
* **HLS:** Add HLS_EMPTY_MEDIA_PLAYLIST error ([#6951](https://github.com/shaka-project/shaka-player/issues/6951)) ([b3df270](https://github.com/shaka-project/shaka-player/commit/b3df270a3efe2886cb87007c6b543dd8c0a2bb6a))
* **HLS:** Calculate the delay based on the sum of the segment lengths ([#7209](https://github.com/shaka-project/shaka-player/issues/7209)) ([abdabb0](https://github.com/shaka-project/shaka-player/commit/abdabb05b6896d285d51d246899d39dd87f7365c))
* **HLS:** Check that segment 0 exists ([#7208](https://github.com/shaka-project/shaka-player/issues/7208)) ([d744ef8](https://github.com/shaka-project/shaka-player/commit/d744ef82e97fa1085da4a7095716115f0ca79960))
* **HLS:** Expose tilesLayout properly for live ([#7123](https://github.com/shaka-project/shaka-player/issues/7123)) ([388050c](https://github.com/shaka-project/shaka-player/commit/388050cbd2213cacf9c31f4518a6a8a8528a350d))
* **HLS:** Fix filtering video/audio streams without bandwidth ([#7008](https://github.com/shaka-project/shaka-player/issues/7008)) ([64430ed](https://github.com/shaka-project/shaka-player/commit/64430edb23c589ea587eed754a102e2b3bbb9031))
* **HLS:** Fix load AES media playlist ([#7012](https://github.com/shaka-project/shaka-player/issues/7012)) ([3bd032c](https://github.com/shaka-project/shaka-player/commit/3bd032c9d67fc8f7ddf4fbc4cc68760491a07d15))
* **HLS:** Fix parsing of width and height when using media playlist ([#6989](https://github.com/shaka-project/shaka-player/issues/6989)) ([cec6166](https://github.com/shaka-project/shaka-player/commit/cec616695f4f5134d4e8734059125eac034c8450))
* **HLS:** Fix use of EXT-X-MEDIA when not using Content Steering ([#7166](https://github.com/shaka-project/shaka-player/issues/7166)) ([fcacb95](https://github.com/shaka-project/shaka-player/commit/fcacb95094be9647d8cabfcfe0546c18e755b6d2))
* **HLS:** Propagate bandwidth to stream in audio-only and video-only ([#7006](https://github.com/shaka-project/shaka-player/issues/7006)) ([1f5badf](https://github.com/shaka-project/shaka-player/commit/1f5badf320fcf2f245fbf8cc8174de9537cf9b7b))
* **HLS:** Remove init segment on formats without init segment ([#7060](https://github.com/shaka-project/shaka-player/issues/7060)) ([c576bc3](https://github.com/shaka-project/shaka-player/commit/c576bc39bd85fd9af8aed69dc01901b36c1bd656))
* honor autoShowText on non-audio streams ([#6977](https://github.com/shaka-project/shaka-player/issues/6977)) ([ef15d13](https://github.com/shaka-project/shaka-player/commit/ef15d1334237dd638ed5cecb31c29cbfc08e9568))
* **net:** Remove `AbortController` polyfill ([#7149](https://github.com/shaka-project/shaka-player/issues/7149)) ([65e6681](https://github.com/shaka-project/shaka-player/commit/65e66813aa69eb61e35c670fa09704327718c29f))
* Offset text regions that are out of viewport ([#6986](https://github.com/shaka-project/shaka-player/issues/6986)) ([ca7fd6e](https://github.com/shaka-project/shaka-player/commit/ca7fd6ed6a0a1ebd44131f97ad3f0a13471b0094))
* Only check encryptionScheme when is not null and not empty string ([#7079](https://github.com/shaka-project/shaka-player/issues/7079)) ([c62c5b5](https://github.com/shaka-project/shaka-player/commit/c62c5b5131704c5a177b703a7c1b0698d776d6f2))
* Pass correct adaptation value to MediaSourceEngine ([#7111](https://github.com/shaka-project/shaka-player/issues/7111)) ([0ff0578](https://github.com/shaka-project/shaka-player/commit/0ff05787882b98de234ff392a777c32f9ded49ee))
* **PeriodCombiner:** Use normalized codec to remove duplicates ([#7032](https://github.com/shaka-project/shaka-player/issues/7032)) ([0669d24](https://github.com/shaka-project/shaka-player/commit/0669d2433e0aca35479f30f419f9d939732d647a))
* **Prefetch:** Use the same references time for evict and prefetchSegmentsByTime ([#7003](https://github.com/shaka-project/shaka-player/issues/7003)) ([9fcaf4d](https://github.com/shaka-project/shaka-player/commit/9fcaf4d19c578f056e1a68e0f25b518f70b85d4d))
* properly map region height/width when applying anchors ([#7105](https://github.com/shaka-project/shaka-player/issues/7105)) ([ac9a6ca](https://github.com/shaka-project/shaka-player/commit/ac9a6ca6d394da890c3ca3e76c7e5a065f63fb43))
* Repeated initial segment load & cancellations ([#7147](https://github.com/shaka-project/shaka-player/issues/7147)) ([3f3bbc6](https://github.com/shaka-project/shaka-player/commit/3f3bbc69851f7372e32168f9e130126632d0dd32))
* Revert change that caused a lot of warning with "cannot find endTime" and hls playback errors ([#7239](https://github.com/shaka-project/shaka-player/issues/7239)) ([e522921](https://github.com/shaka-project/shaka-player/commit/e522921bc275da81e96ef98f4316ece62b6f5423))
* Revert change that caused stalls with "cannot find endTime" ([#7213](https://github.com/shaka-project/shaka-player/issues/7213)) ([2d2bddd](https://github.com/shaka-project/shaka-player/commit/2d2bddd7f1c6e6d6261a22560003f74861645d31))
* **SimpleTextDisplayer:** Do not disable metadata & chapters tracks ([#6948](https://github.com/shaka-project/shaka-player/issues/6948)) ([c6d834e](https://github.com/shaka-project/shaka-player/commit/c6d834ed367efeba520a5c91d3d289d41a2f2475))
* **SSA:** Support files with line breaks that are not necessary ([#6947](https://github.com/shaka-project/shaka-player/issues/6947)) ([88431b6](https://github.com/shaka-project/shaka-player/commit/88431b6f3d71a84dd203ecd3d3837629fbfb95e4))
* **Stats:** Fix bytesDownloaded when using src= ([#7223](https://github.com/shaka-project/shaka-player/issues/7223)) ([1faada6](https://github.com/shaka-project/shaka-player/commit/1faada692483b552b21705ca5b39d64632e150af))
* **Stats:** Fix completionPercent for Live ([#6957](https://github.com/shaka-project/shaka-player/issues/6957)) ([d719328](https://github.com/shaka-project/shaka-player/commit/d719328ffaee752eba2f1d45299b60ec499ee57d))
* **Transmuxer:** Fix init segment between discontinuities ([#7042](https://github.com/shaka-project/shaka-player/issues/7042)) ([6850f68](https://github.com/shaka-project/shaka-player/commit/6850f687533d70a1560e3675ce6aba34bf10798b))
* **TTML:** Fix font styles parsing ([#6969](https://github.com/shaka-project/shaka-player/issues/6969)) ([f56f7ba](https://github.com/shaka-project/shaka-player/commit/f56f7ba9ca18271467e6fa917021959d2dd68efb))
* **ttml:** Handle escaped special characters. ([#7047](https://github.com/shaka-project/shaka-player/issues/7047)) ([90668c2](https://github.com/shaka-project/shaka-player/commit/90668c20e08d5a86ad010a2cf50e8d9638240ad2)), closes [#7044](https://github.com/shaka-project/shaka-player/issues/7044)
* **TTML:** Show background color with image subtitles ([#6967](https://github.com/shaka-project/shaka-player/issues/6967)) ([e68fd55](https://github.com/shaka-project/shaka-player/commit/e68fd55c440c1010aaf45eb650edcdf7684d3012))
* **UI:** Don't display NaN stats ([#6958](https://github.com/shaka-project/shaka-player/issues/6958)) ([7c33192](https://github.com/shaka-project/shaka-player/commit/7c33192a07b7ec7046adef607d177422789e7fe5))
* **UI:** Fix ad markers set before full initialization ([#7089](https://github.com/shaka-project/shaka-player/issues/7089)) ([1d5c7d2](https://github.com/shaka-project/shaka-player/commit/1d5c7d2a6497a5a7aaccea5818e74e80cf52907c))
* **UI:** Fix display seekbar and time when the seekrange is infinite ([#7182](https://github.com/shaka-project/shaka-player/issues/7182)) ([867f8b2](https://github.com/shaka-project/shaka-player/commit/867f8b2d160fdf1b54ebfeea1fd8a2f88e093fb9))
* **UI:** Fix font-family override in UITextDisplayer ([#7249](https://github.com/shaka-project/shaka-player/issues/7249)) ([3d33277](https://github.com/shaka-project/shaka-player/commit/3d3327785f447d2116a715b8ceeeca5aa44e6977))
* **UI:** Fix resolution label when the stream has not resolution ([#7043](https://github.com/shaka-project/shaka-player/issues/7043)) ([089518c](https://github.com/shaka-project/shaka-player/commit/089518c0e18fa9dd3f7fee2b9e5dfd95426dc6df))
* **UI:** Fix seek preview time in VoD ([#7027](https://github.com/shaka-project/shaka-player/issues/7027)) ([226c740](https://github.com/shaka-project/shaka-player/commit/226c7403116e9f0565b09cb87b7284ee4f06b3e4))
* **UI:** fix wrong french in translation ([#6982](https://github.com/shaka-project/shaka-player/issues/6982)) ([2d6c2af](https://github.com/shaka-project/shaka-player/commit/2d6c2afa252f57f1dc769ffe17f86060a14dc594))
* **UI:** Only show frame rate if there are several frame rates ([#7190](https://github.com/shaka-project/shaka-player/issues/7190)) ([d4249b1](https://github.com/shaka-project/shaka-player/commit/d4249b1b9cc4b5e6ad1def292e6e9280c8c4d6f3))
* **UI:** Remove not loaded font ([#7242](https://github.com/shaka-project/shaka-player/issues/7242)) ([47f686f](https://github.com/shaka-project/shaka-player/commit/47f686faad05471bcd224e6db6bf820fc3b67afb))
* **UI:** Show all resolutions when there are only one audio. ([#7017](https://github.com/shaka-project/shaka-player/issues/7017)) ([2a2c9cd](https://github.com/shaka-project/shaka-player/commit/2a2c9cd92d90d842805c73c3c5a171b042a0cdcd))
* **UI:** Show the ad marker in the seek bar when there are some intersections ([#6990](https://github.com/shaka-project/shaka-player/issues/6990)) ([247037e](https://github.com/shaka-project/shaka-player/commit/247037e5370c6194111331edde72082f01c22b1e))
* Unify maxDisabledTime behaviour ([#7077](https://github.com/shaka-project/shaka-player/issues/7077)) ([8e13e91](https://github.com/shaka-project/shaka-player/commit/8e13e91ba62300f0513be3e1852a82bf3f003e75))
* **WebVTT:** Fix rendering of WebVTT in UITextDisplayer ([#7023](https://github.com/shaka-project/shaka-player/issues/7023)) ([22a7c49](https://github.com/shaka-project/shaka-player/commit/22a7c497b046ab339d692c92387bf7a1cdef1800))
* **WebVTT:** Re-add rollover logic ([#7104](https://github.com/shaka-project/shaka-player/issues/7104)) ([0708379](https://github.com/shaka-project/shaka-player/commit/0708379badb5c5cf49c66e753e1544f973838cbc))
* **Xbox:** Fix screen resolution detection ([#6988](https://github.com/shaka-project/shaka-player/issues/6988)) ([4d2aa24](https://github.com/shaka-project/shaka-player/commit/4d2aa24b6b0a3d99f42f01a7d49fb8de34988000))
* **Xbox:** Override Dolby Vision codecs ([#7115](https://github.com/shaka-project/shaka-player/issues/7115)) ([2c399e0](https://github.com/shaka-project/shaka-player/commit/2c399e0f9f7aa42f7d1cac5a2b42b3603da58d5c))
* **Xbox:** Support screen resolution detection on Xbox when using WebView2 ([#7144](https://github.com/shaka-project/shaka-player/issues/7144)) ([d93a019](https://github.com/shaka-project/shaka-player/commit/d93a019454d7dc77ae31ae2ad637aab5bbf2c840)), closes [#7141](https://github.com/shaka-project/shaka-player/issues/7141)


### Performance Improvements

* **DRM:** compare init data only when config flag is set ([#6952](https://github.com/shaka-project/shaka-player/issues/6952)) ([be22e5b](https://github.com/shaka-project/shaka-player/commit/be22e5b0ce4093aedc434f81206a29eaad12c5ec))
* **HLS:** do not loop twice when processing nalus ([#6954](https://github.com/shaka-project/shaka-player/issues/6954)) ([a779d31](https://github.com/shaka-project/shaka-player/commit/a779d31efcf7c9f1db6b306165722c3b7d6ed1e6))

## [4.10.0](https://github.com/shaka-project/shaka-player/compare/v4.9.0...v4.10.0) (2024-07-01)


### Features

* add an audiotrackchanged event for when label, language, or roles of an audio track change ([#6913](https://github.com/shaka-project/shaka-player/issues/6913)) ([8825af7](https://github.com/shaka-project/shaka-player/commit/8825af7b719d60b944da5a5f0aa26cf16c460e47))
* Add audio codec to `selectAudioLanguage()` ([#6723](https://github.com/shaka-project/shaka-player/issues/6723)) ([48bdf17](https://github.com/shaka-project/shaka-player/commit/48bdf176cbb65091d76a348250ce03f87a0c44ae))
* Add dontChooseCodecs config ([#6759](https://github.com/shaka-project/shaka-player/issues/6759)) ([5067d5c](https://github.com/shaka-project/shaka-player/commit/5067d5cf5f83175b28510c01fdff26dcfd52bef0))
* Add isLowLatency to shaka.extern.Manifest ([#6842](https://github.com/shaka-project/shaka-player/issues/6842)) ([e020814](https://github.com/shaka-project/shaka-player/commit/e0208148cbe112b19df8dabddcf0bff7c32b4e97))
* add liveSyncTargetLatency option and deprecate liveSyncMinLatency and liveSyncMaxLatency options ([#6822](https://github.com/shaka-project/shaka-player/issues/6822)) ([277afbf](https://github.com/shaka-project/shaka-player/commit/277afbf894d1db22f95db71c3f9f8695c4e14423))
* Add option to disable continue loading live stream manifest when paused ([#6916](https://github.com/shaka-project/shaka-player/issues/6916)) ([0ea31b4](https://github.com/shaka-project/shaka-player/commit/0ea31b46e6a9f61749a34cad8e989221193d48c1))
* Add segment URIs to segment-related errors ([#6714](https://github.com/shaka-project/shaka-player/issues/6714)) ([8d680e5](https://github.com/shaka-project/shaka-player/commit/8d680e56b4dc8c0dfcdb10a85294d64f9be175d8)), closes [#6712](https://github.com/shaka-project/shaka-player/issues/6712)
* **Ads:** Add averageLoadTime and errors to ad stats ([#6828](https://github.com/shaka-project/shaka-player/issues/6828)) ([037d4cb](https://github.com/shaka-project/shaka-player/commit/037d4cbb7e9d629db16dc0794e778375746ce84d))
* **Ads:** Add content resume/pause requested events ([#6738](https://github.com/shaka-project/shaka-player/issues/6738)) ([9b47b8f](https://github.com/shaka-project/shaka-player/commit/9b47b8f74fc53cd437ea5747d58c5501c17c6716))
* **Ads:** Add CUE ONCE support in Interstitials ([#6785](https://github.com/shaka-project/shaka-player/issues/6785)) ([c72493a](https://github.com/shaka-project/shaka-player/commit/c72493a41b143583250d00b42f0fb107fbcb94da))
* **Ads:** Add CUE PRE and POST support in Interstitials ([#6799](https://github.com/shaka-project/shaka-player/issues/6799)) ([4ea9a44](https://github.com/shaka-project/shaka-player/commit/4ea9a4471d751146ba8f93b8476dd179d1396718))
* **Ads:** Add CUEPOINTS_CHANGED event to interstitials ([#6791](https://github.com/shaka-project/shaka-player/issues/6791)) ([9b25ff5](https://github.com/shaka-project/shaka-player/commit/9b25ff5bc1206b7acb884735c9c93cc1e5238a7c))
* **Ads:** Add support for interstitials when using src= ([#6777](https://github.com/shaka-project/shaka-player/issues/6777)) ([59304b8](https://github.com/shaka-project/shaka-player/commit/59304b820841bc4f03ba4718816eed759557a6bf))
* **Ads:** Add support for X-TIMELINE-OCCUPIES ([#6806](https://github.com/shaka-project/shaka-player/issues/6806)) ([7844fed](https://github.com/shaka-project/shaka-player/commit/7844fedf21efb96fdbfc5eb2e271a0d2bb365e41))
* **Ads:** Fill loadTime stats in interstitials ([#6817](https://github.com/shaka-project/shaka-player/issues/6817)) ([28d3c98](https://github.com/shaka-project/shaka-player/commit/28d3c98415239a894a6ff15e6c4ccbc7cee344ba))
* **Ads:** Fix playback of interstitials in iOS ([#6776](https://github.com/shaka-project/shaka-player/issues/6776)) ([363989c](https://github.com/shaka-project/shaka-player/commit/363989c77044347ab7fbd369c317c3fc81da9275))
* **Ads:** Improve preload timing on interstitials ([#6792](https://github.com/shaka-project/shaka-player/issues/6792)) ([4638775](https://github.com/shaka-project/shaka-player/commit/46387754ca494fcd0ae6cd560b9b8e3c6e3656ef))
* **Ads:** Improve resume times when the interstial uses two video elements ([#6774](https://github.com/shaka-project/shaka-player/issues/6774)) ([5bfe37f](https://github.com/shaka-project/shaka-player/commit/5bfe37f3c5a29ce8fc31ba602118262c5f0ab35e))
* **Ads:** Remove circular dependency ([#6868](https://github.com/shaka-project/shaka-player/issues/6868)) ([e39defb](https://github.com/shaka-project/shaka-player/commit/e39defb6f76bfbc9e30d7a1105261469b817708f))
* **CEA:** Add CEA support for VVC/H.266 ([#6912](https://github.com/shaka-project/shaka-player/issues/6912)) ([a3d09a9](https://github.com/shaka-project/shaka-player/commit/a3d09a9431da80971f38ff9cde002cf9906475a9))
* **DASH:** add  `MPD_PATCH` advanced request type ([#6787](https://github.com/shaka-project/shaka-player/issues/6787)) ([2f3a1eb](https://github.com/shaka-project/shaka-player/commit/2f3a1ebf944705b6b0aa9e464e19b79e232e2a2a))
* Dynamic target latency ([#6858](https://github.com/shaka-project/shaka-player/issues/6858)) ([68b4777](https://github.com/shaka-project/shaka-player/commit/68b4777feb425c5c500626eca2b26fdedd4d007e))
* Export getMaxSegmentEndTime and getAvailabilityTimeOffset in PresentationTimeline ([#6839](https://github.com/shaka-project/shaka-player/issues/6839)) ([680c0f1](https://github.com/shaka-project/shaka-player/commit/680c0f1dc9cfc673be6318c366af716d9c697436))
* Fix processing EXT-X-DATERANGE on live streams ([#6740](https://github.com/shaka-project/shaka-player/issues/6740)) ([4820565](https://github.com/shaka-project/shaka-player/commit/48205651441842655ea9facafa22358df0fc79cb))
* Fix useNativeHlsOnSafari deprecation ([#6935](https://github.com/shaka-project/shaka-player/issues/6935)) ([b71d0a1](https://github.com/shaka-project/shaka-player/commit/b71d0a1c93d013c12dd2e906c5147025a45c2c2b))
* **HLS:** Add HLS interstitial support ([#6761](https://github.com/shaka-project/shaka-player/issues/6761)) ([60e6847](https://github.com/shaka-project/shaka-player/commit/60e6847e39a01a6382eb35d37f0a606635c7be0e))
* **HLS:** Add support for EXT-X-DATERANGE ([#6718](https://github.com/shaka-project/shaka-player/issues/6718)) ([2ec6444](https://github.com/shaka-project/shaka-player/commit/2ec64442e2b43fdfdf5a20f63d4367dc3d531892))
* **HLS:** Add support for MediaQualityInfo events ([#6927](https://github.com/shaka-project/shaka-player/issues/6927)) ([0895e2e](https://github.com/shaka-project/shaka-player/commit/0895e2e7716812f12250fc1d5df2051704442c1e))
* **HLS:** Add support to variable substitution in EXT-X-DATERANGE ([#6751](https://github.com/shaka-project/shaka-player/issues/6751)) ([3b2477f](https://github.com/shaka-project/shaka-player/commit/3b2477f42c5d1fdd131e651a2ded1eb98c5fe514))
* **HLS:** Allow disable streams when the media playlist fails ([#6807](https://github.com/shaka-project/shaka-player/issues/6807)) ([c866d7b](https://github.com/shaka-project/shaka-player/commit/c866d7b4676922d6d0cec8bd44403d0afdbdd6e4))
* **hls:** expose manifest skd uri on drmInfo ([#6857](https://github.com/shaka-project/shaka-player/issues/6857)) ([644677c](https://github.com/shaka-project/shaka-player/commit/644677ca864ca06a360edad38c2089649aa2493f))
* **HLS:** Ignore EXT-X-DATERANGE in the past ([#6757](https://github.com/shaka-project/shaka-player/issues/6757)) ([8d7dd37](https://github.com/shaka-project/shaka-player/commit/8d7dd37cfbd2579582c7242b0c8d1f5ac244eeeb))
* **HLS:** Only process DATE-RANGE in AUDIO and VIDEO playlists ([#6793](https://github.com/shaka-project/shaka-player/issues/6793)) ([a1c91ae](https://github.com/shaka-project/shaka-player/commit/a1c91aeaf9b58f2938f1eb2c97d2e4982765a447))
* **HLS:** Use PLANNED-DURATION to determine the end time ([#6800](https://github.com/shaka-project/shaka-player/issues/6800)) ([bf5a103](https://github.com/shaka-project/shaka-player/commit/bf5a1036261047520ed7e8715c37b2b1b9b57225))
* move live sync options into their own object ([#6845](https://github.com/shaka-project/shaka-player/issues/6845)) ([da0bc4d](https://github.com/shaka-project/shaka-player/commit/da0bc4da4e267bae5d0ed35c82ac1c5ac782a1a6))
* **MSS:** Add support for MediaQualityInfo events ([#6923](https://github.com/shaka-project/shaka-player/issues/6923)) ([767cbed](https://github.com/shaka-project/shaka-player/commit/767cbede2ca9a87fcf68c4f60b2b499bb16a9650))
* Parse dvvC box for Dolby Vision support ([#6866](https://github.com/shaka-project/shaka-player/issues/6866)) ([69fe20f](https://github.com/shaka-project/shaka-player/commit/69fe20f43af7a21926f8cf9fa50c6f757fa5b247))
* **preload:** Add new method destroyAllPreloads ([#6756](https://github.com/shaka-project/shaka-player/issues/6756)) ([b500799](https://github.com/shaka-project/shaka-player/commit/b500799b97abf41299b6cca81ef58412348f82f6))
* **Stats:** Add `manifestGapCount` to stats ([#6804](https://github.com/shaka-project/shaka-player/issues/6804)) ([8a678f3](https://github.com/shaka-project/shaka-player/commit/8a678f374ddc36ce8e4125b6d6359188d516ce3c)), closes [#6789](https://github.com/shaka-project/shaka-player/issues/6789)
* **Stats:** Add `manifestPeriodCount` to stats ([#6798](https://github.com/shaka-project/shaka-player/issues/6798)) ([65b0b8d](https://github.com/shaka-project/shaka-player/commit/65b0b8dd2114ccabf6eef1fd4b52fa4f93aa7ad9)), closes [#6788](https://github.com/shaka-project/shaka-player/issues/6788)
* **Stats:** add size of the manifest to player stats ([#6783](https://github.com/shaka-project/shaka-player/issues/6783)) ([d0d5843](https://github.com/shaka-project/shaka-player/commit/d0d5843d8c0b1dee4b101efc00f9db71c81a549d))
* **Stats:** count non fatal errors ([#6781](https://github.com/shaka-project/shaka-player/issues/6781)) ([081afde](https://github.com/shaka-project/shaka-player/commit/081afde932ec27fde2d694d5289fc6f34a349244))
* **UI:** Add ad statistics button ([#6827](https://github.com/shaka-project/shaka-player/issues/6827)) ([ea82028](https://github.com/shaka-project/shaka-player/commit/ea8202805a6122b630e0085a1c1862134b01f613))
* **UI:** Add new stats to context menu ([#6814](https://github.com/shaka-project/shaka-player/issues/6814)) ([8395b91](https://github.com/shaka-project/shaka-player/commit/8395b912a70fc57699417ec9236c25f3190885ef))
* **UI:** Add save video frame button ([#6926](https://github.com/shaka-project/shaka-player/issues/6926)) ([19cfbf9](https://github.com/shaka-project/shaka-player/commit/19cfbf966fa956609a8341b204c6d51e72bfbdb1))
* **UI:** Highlight current time when hovered on seek bar ([#6870](https://github.com/shaka-project/shaka-player/issues/6870)) ([f46dbdc](https://github.com/shaka-project/shaka-player/commit/f46dbdc0197eae3fa4c654d801081726fbf16072))
* **UI:** Initialize interstitials by default when using UI ([#6797](https://github.com/shaka-project/shaka-player/issues/6797)) ([31d0445](https://github.com/shaka-project/shaka-player/commit/31d0445f8325c645eb919fb2c879126c14b04865))


### Bug Fixes

* `getPresentationStartTimeAsDate()` should return time unaffected by clock drift ([#6790](https://github.com/shaka-project/shaka-player/issues/6790)) ([0820491](https://github.com/shaka-project/shaka-player/commit/082049156482598f160dbf4878c1d8a3d5ef379b))
* `selectAudioLanguage()` should ignore unplayable variants ([#6805](https://github.com/shaka-project/shaka-player/issues/6805)) ([95590ad](https://github.com/shaka-project/shaka-player/commit/95590adefddfc0e7b5c5d0c65dbc3864cf9c2375))
* **ABR:** Add a guard when variant is null ([#6928](https://github.com/shaka-project/shaka-player/issues/6928)) ([3be95a8](https://github.com/shaka-project/shaka-player/commit/3be95a83ad8b01fa20a2ec938f7a956de6c32d4c))
* **ABR:** Fix variant choose when two variants have the same bandwidth but different resolution ([#6760](https://github.com/shaka-project/shaka-player/issues/6760)) ([a053dd2](https://github.com/shaka-project/shaka-player/commit/a053dd25137c9d1fed1303c7a2024231752baa54))
* **Ads:** Fix duplicate interstitials when using src= ([#6784](https://github.com/shaka-project/shaka-player/issues/6784)) ([3949686](https://github.com/shaka-project/shaka-player/commit/394968617efab6b21a42fffe2ac2c683fcf12e1d))
* **Ads:** Fix interstitial ad values when the ad is loading ([#6782](https://github.com/shaka-project/shaka-player/issues/6782)) ([08e8111](https://github.com/shaka-project/shaka-player/commit/08e81118cffef307ad9f47408f0db42d8b31b502))
* **Ads:** Fix skip functionality in MediaTailor ([#6910](https://github.com/shaka-project/shaka-player/issues/6910)) ([339bab4](https://github.com/shaka-project/shaka-player/commit/339bab44ec58cfdf288e7e9532f4c92b34568e65))
* Allow use startTime equal to 0 in HLS live streams using src= ([#6843](https://github.com/shaka-project/shaka-player/issues/6843)) ([224c1b9](https://github.com/shaka-project/shaka-player/commit/224c1b916a8689118d4f708eaec8fed1c8068bb1))
* Avoid filter manifest when the DRM is not initialized ([#6737](https://github.com/shaka-project/shaka-player/issues/6737)) ([80139b0](https://github.com/shaka-project/shaka-player/commit/80139b0ba714fb233b5631b0e75f3432eec0ff39))
* Avoid firing SEGMENT_MISSING when there is an alternative ([#6881](https://github.com/shaka-project/shaka-player/issues/6881)) ([aed859b](https://github.com/shaka-project/shaka-player/commit/aed859b05fe6c2ee668bff281c2baabe245c6ff7))
* **CEA:** CEA-608 is not rendered in some cases (multiples TRAF boxes) ([#6878](https://github.com/shaka-project/shaka-player/issues/6878)) ([a3e1fdd](https://github.com/shaka-project/shaka-player/commit/a3e1fdd0f82f4cb78d0925ca906b3a67ac863061))
* **CMCD:** Fix reset CMCD on unload ([#6821](https://github.com/shaka-project/shaka-player/issues/6821)) ([7bea10c](https://github.com/shaka-project/shaka-player/commit/7bea10c18d4e2afbc26826d8cead49eb5d61daf8))
* **CS:** Fix IMA integration ([#6907](https://github.com/shaka-project/shaka-player/issues/6907)) ([9b1ef04](https://github.com/shaka-project/shaka-player/commit/9b1ef046df31b968498dff6d423e349f9ee13597))
* **DASH:** Allow play when SegmentTimeline has a duration 0 "S" element ([#6896](https://github.com/shaka-project/shaka-player/issues/6896)) ([3e45e66](https://github.com/shaka-project/shaka-player/commit/3e45e66af23573e3c2d3dfea8879452e370fa04d))
* Do not export functions in getNonDefaultConfiguration ([#6739](https://github.com/shaka-project/shaka-player/issues/6739)) ([93c6123](https://github.com/shaka-project/shaka-player/commit/93c612392cc5f1bb7f4f7e72fa9f7c298c2074f9))
* Don't clear the buffer when disable a stream ([#6931](https://github.com/shaka-project/shaka-player/issues/6931)) ([5dac2c0](https://github.com/shaka-project/shaka-player/commit/5dac2c051cc58b9e10d713d70f1e31fe2f18792c))
* **DRM:** close properly webkit media key sessions ([#6775](https://github.com/shaka-project/shaka-player/issues/6775)) ([309bd72](https://github.com/shaka-project/shaka-player/commit/309bd72046acbdfb0f0ded81a599012f125d2e33))
* **DRM:** Probe robustness only for modern PlayReady keysystem ([#6851](https://github.com/shaka-project/shaka-player/issues/6851)) ([96f248c](https://github.com/shaka-project/shaka-player/commit/96f248cb7175ca6a2cfe8fbb5f40080c0e8b9be0))
* ensure all timelineregionenter events are fired ([#6713](https://github.com/shaka-project/shaka-player/issues/6713)) ([76863f2](https://github.com/shaka-project/shaka-player/commit/76863f2a5880ec793c0f7ebc11d187330b9f7651)), closes [#6711](https://github.com/shaka-project/shaka-player/issues/6711)
* Exclude fetch polyfill from fetch plugin ([#6838](https://github.com/shaka-project/shaka-player/issues/6838)) ([8bb2d6e](https://github.com/shaka-project/shaka-player/commit/8bb2d6e11a704fc6d1c5b2f3b7895bad37c2f75b))
* Fix AC-4 codec string in MediaSourceEngine ([#6780](https://github.com/shaka-project/shaka-player/issues/6780)) ([8fb31c1](https://github.com/shaka-project/shaka-player/commit/8fb31c1777ab6e7afade3fd82ee918bfee4867a9))
* Fix audio properties detection ([#6867](https://github.com/shaka-project/shaka-player/issues/6867)) ([e204bf6](https://github.com/shaka-project/shaka-player/commit/e204bf65c6b4c96c6735ba893c163eeb3a1390f7))
* Fix continues to play a few seconds after reaching playRangeEnd ([#6861](https://github.com/shaka-project/shaka-player/issues/6861)) ([9f5b5a5](https://github.com/shaka-project/shaka-player/commit/9f5b5a5aa9097f31c9b299ce149bf46eb73cd4dc))
* Fix green screen issue on Edge with mixed content ([#6719](https://github.com/shaka-project/shaka-player/issues/6719)) ([d5b1863](https://github.com/shaka-project/shaka-player/commit/d5b18631575171eaed4bba31aecb472471dd96df))
* Fix initial track selection in src= when using HLS ([#6803](https://github.com/shaka-project/shaka-player/issues/6803)) ([a65a6f8](https://github.com/shaka-project/shaka-player/commit/a65a6f8b20606d5c092e3f13f56d931dcb967249))
* Fix normalized codec for Dolby Vision ([#6865](https://github.com/shaka-project/shaka-player/issues/6865)) ([465a69a](https://github.com/shaka-project/shaka-player/commit/465a69aedb5a73b31dff028711aaef1f2cf41fb9))
* Fix timestampOffset when is greater than baseMediaDecodeTime ([#6849](https://github.com/shaka-project/shaka-player/issues/6849)) ([3eb85f9](https://github.com/shaka-project/shaka-player/commit/3eb85f938d707dc6a161db523e60b3568e379d2f))
* Generate the correct codec for AV1 HDR ([#6879](https://github.com/shaka-project/shaka-player/issues/6879)) ([1c863c8](https://github.com/shaka-project/shaka-player/commit/1c863c8510c3250c30cceaffcf1d5ccfeef8894f))
* **HLS:** Allow detect mimeType from non-gap segments ([#6892](https://github.com/shaka-project/shaka-player/issues/6892)) ([14ce038](https://github.com/shaka-project/shaka-player/commit/14ce038a636041e8eb4168870ceb61f5ceaecd6d))
* **HLS:** Allow disable initial variant if necessary ([#6940](https://github.com/shaka-project/shaka-player/issues/6940)) ([3416054](https://github.com/shaka-project/shaka-player/commit/3416054bb559b4c288fa63ce8952e92e78337402))
* **HLS:** Avoid get basic info when the first segment is a gap ([#6882](https://github.com/shaka-project/shaka-player/issues/6882)) ([f217344](https://github.com/shaka-project/shaka-player/commit/f2173440c8a7fd651089d35f37c4a6d6c2fb7820))
* **HLS:** Avoid make a HEAD request of gap segments ([#6880](https://github.com/shaka-project/shaka-player/issues/6880)) ([c90bc5f](https://github.com/shaka-project/shaka-player/commit/c90bc5f563ac9ecf11a7194dffc76f137b9618ce))
* **HLS:** Disable stream when the media live playlist is stuck ([#6900](https://github.com/shaka-project/shaka-player/issues/6900)) ([c555b38](https://github.com/shaka-project/shaka-player/commit/c555b38459654c1cdc8245784fa58c4bc5d38fec))
* **HLS:** Fix AC-4 codec selection in HLS ([#6818](https://github.com/shaka-project/shaka-player/issues/6818)) ([bf15b24](https://github.com/shaka-project/shaka-player/commit/bf15b24fc2d19f574895940a24f23838d8f6cac7))
* **HLS:** Fix get basic info from segments ([#6898](https://github.com/shaka-project/shaka-player/issues/6898)) ([02331e1](https://github.com/shaka-project/shaka-player/commit/02331e1064f2a0eb1d63492fefae6703d591f13f))
* **HLS:** Fix getAvailableSegment_ function ([#6915](https://github.com/shaka-project/shaka-player/issues/6915)) ([7bbf612](https://github.com/shaka-project/shaka-player/commit/7bbf6124aba3f96ed68227e615c2e067a0ba5a97))
* **HLS:** Fix MPEG-H codec selection in HLS ([#6901](https://github.com/shaka-project/shaka-player/issues/6901)) ([3db66b3](https://github.com/shaka-project/shaka-player/commit/3db66b3fb011ee0f585e8c2256c30b7579a08468))
* **HLS:** Fix seekRange when using delta playlist ([#6758](https://github.com/shaka-project/shaka-player/issues/6758)) ([7bcb86e](https://github.com/shaka-project/shaka-player/commit/7bcb86e5103ecc6d4ce09498899650493fb88557))
* **HLS:** Identify EXT-X-GAP with segment tags ([#6884](https://github.com/shaka-project/shaka-player/issues/6884)) ([4ff0859](https://github.com/shaka-project/shaka-player/commit/4ff0859f4bb3e1c37a4649a3f3dd4d505af6b027))
* **HLS:** Ignore query params in the uri of EXT-X-SESSION-KEY tags ([#6755](https://github.com/shaka-project/shaka-player/issues/6755)) ([c3e6450](https://github.com/shaka-project/shaka-player/commit/c3e64508c18f7d0fbc47a95d22862903788289e3))
* ignore buffered content less than 1e-4s ([#6802](https://github.com/shaka-project/shaka-player/issues/6802)) ([d6fcf66](https://github.com/shaka-project/shaka-player/commit/d6fcf66f5e5726550bb9e3101f9f36d240f97c42))
* Only request initialization segment when it's necessary ([#6929](https://github.com/shaka-project/shaka-player/issues/6929)) ([2f762ec](https://github.com/shaka-project/shaka-player/commit/2f762ec0940e883e5650b56267dc00e9a64a4d2b))
* **Prefetch:** cache iterator to avoid precision issues ([#6899](https://github.com/shaka-project/shaka-player/issues/6899)) ([b5f1ee9](https://github.com/shaka-project/shaka-player/commit/b5f1ee9f49d46bb1e914276fc676291aed9a3829))
* **Prefetch:** Ensure prefetched segments are continuous ([#6908](https://github.com/shaka-project/shaka-player/issues/6908)) ([db679e0](https://github.com/shaka-project/shaka-player/commit/db679e028273e24c10c6bc4057479ac4f2047b17))
* **preload:** Fix error handling ([#6753](https://github.com/shaka-project/shaka-player/issues/6753)) ([9d1fe4a](https://github.com/shaka-project/shaka-player/commit/9d1fe4abd59e182237d8cb30ac06ef87cd899515))
* **preload:** Fix memory leak with preload feature ([#6894](https://github.com/shaka-project/shaka-player/issues/6894)) ([88d2a02](https://github.com/shaka-project/shaka-player/commit/88d2a0227bc23ae2e02d45fd3fc27cd3d3e3f66d)), closes [#6883](https://github.com/shaka-project/shaka-player/issues/6883)
* **preload:** Fix preload error reporting ([#6746](https://github.com/shaka-project/shaka-player/issues/6746)) ([95422b1](https://github.com/shaka-project/shaka-player/commit/95422b17d62964f45528061b678651081910c184))
* **preload:** Fix preload load latency logic. ([#6890](https://github.com/shaka-project/shaka-player/issues/6890)) ([878bf62](https://github.com/shaka-project/shaka-player/commit/878bf62a21be8e2516016549c0e42617e7221030)), closes [#6871](https://github.com/shaka-project/shaka-player/issues/6871)
* **PS4:** Fix serverCertificate defaulted to null ([#6716](https://github.com/shaka-project/shaka-player/issues/6716)) ([6f84e41](https://github.com/shaka-project/shaka-player/commit/6f84e411ed7bf4647b94e90a5f63ac0d43d39d30))
* Support for Zenterio ([#6717](https://github.com/shaka-project/shaka-player/issues/6717)) ([97910dc](https://github.com/shaka-project/shaka-player/commit/97910dc8a9d658eee70c204f509c0adddc2cbb7a))
* **TTML:** Extended subtitle codec support ([#6832](https://github.com/shaka-project/shaka-player/issues/6832)) ([601098b](https://github.com/shaka-project/shaka-player/commit/601098bad14dd533b3de99d767c68f0db9921715)), closes [#6831](https://github.com/shaka-project/shaka-player/issues/6831)
* **TTML:** Fix timing parsing when using 1dp ([#6830](https://github.com/shaka-project/shaka-player/issues/6830)) ([3783ffd](https://github.com/shaka-project/shaka-player/commit/3783ffd44b7d31bd2bbeea1aebecf608ac42e2a2)), closes [#6829](https://github.com/shaka-project/shaka-player/issues/6829)
* **UI:** Don't show presentation time in ads ([#6752](https://github.com/shaka-project/shaka-player/issues/6752)) ([2e4ace5](https://github.com/shaka-project/shaka-player/commit/2e4ace593618b0c0bf68f2d67af01a846e5992f7))
* **UI:** Fix resolution sorting ([#6742](https://github.com/shaka-project/shaka-player/issues/6742)) ([aaf4b63](https://github.com/shaka-project/shaka-player/commit/aaf4b633995f91feecf6d77f7c96e7dba7c23206))
* **UI:** UI does not update after loading a new stream ([#6721](https://github.com/shaka-project/shaka-player/issues/6721)) ([d9242cd](https://github.com/shaka-project/shaka-player/commit/d9242cd09c2fae52f8c6842e2a97864fc05c3cd5))
* **UI:** update French translations ([#6873](https://github.com/shaka-project/shaka-player/issues/6873)) ([620756b](https://github.com/shaka-project/shaka-player/commit/620756b2ea03b342370af8ad7e583f4d258b6937))
* **UI:** update Polish translations ([#6846](https://github.com/shaka-project/shaka-player/issues/6846)) ([2c610a4](https://github.com/shaka-project/shaka-player/commit/2c610a42b4e97593d2acbf671d6bb703acd05145))
* **UI:** update Portuguese translations ([#6874](https://github.com/shaka-project/shaka-player/issues/6874)) ([1fed8b7](https://github.com/shaka-project/shaka-player/commit/1fed8b7863382f906bb8f407127f4c918c22dcba))
* **UI:** update Spanish translations ([#6875](https://github.com/shaka-project/shaka-player/issues/6875)) ([34cc33c](https://github.com/shaka-project/shaka-player/commit/34cc33cfb7360c6426bf7106bfa647f904eb38a5))

## [4.9.0](https://github.com/shaka-project/shaka-player/compare/v4.8.0...v4.9.0) (2024-05-30)


### Features

* **ABR:** Add cacheLoadThreshold config ([#6657](https://github.com/shaka-project/shaka-player/issues/6657)) ([f374173](https://github.com/shaka-project/shaka-player/commit/f3741737ac111cec665ef391495831aa5fe277ac))
* Add a new setting to allow remove based on channels count ([#6600](https://github.com/shaka-project/shaka-player/issues/6600)) ([0206e5a](https://github.com/shaka-project/shaka-player/commit/0206e5af8e4e1ea1415a8144470b0f12689ef9aa))
* Add config for add headers to license requests ([#6650](https://github.com/shaka-project/shaka-player/issues/6650)) ([e7b893b](https://github.com/shaka-project/shaka-player/commit/e7b893b74e5d2234120a8d5dfd9a8b9d2fc8d4d9))
* add config to clear decodingInfo cache on unload ([#6678](https://github.com/shaka-project/shaka-player/issues/6678)) ([e0eeb5b](https://github.com/shaka-project/shaka-player/commit/e0eeb5b77d4887d3fa54ca66236543d7d0df4a57))
* Add getNonDefaultConfiguration ([#6620](https://github.com/shaka-project/shaka-player/issues/6620)) ([907e6ba](https://github.com/shaka-project/shaka-player/commit/907e6bab287a61f160f2a3f6f942c44c325d96e6))
* Add response URI to BAD_HTTP_STATUS error ([#6561](https://github.com/shaka-project/shaka-player/issues/6561)) ([ed93987](https://github.com/shaka-project/shaka-player/commit/ed939872e13f33d6c65b6b70e4c5eb5499fa171a))
* Add support for probing encryption scheme support ([#6506](https://github.com/shaka-project/shaka-player/issues/6506)) ([2dea350](https://github.com/shaka-project/shaka-player/commit/2dea350d7483ba2c68b900e983a37562c15b8257))
* **Ads:** Implement skip ad functionality in Media Tailor ([#6598](https://github.com/shaka-project/shaka-player/issues/6598)) ([1429763](https://github.com/shaka-project/shaka-player/commit/1429763c975d5eef3c1fb70cf43394aa1646caca))
* **Ads:** Support CS on devices that don't support multiple media elements ([#6575](https://github.com/shaka-project/shaka-player/issues/6575)) ([520930c](https://github.com/shaka-project/shaka-player/commit/520930c6650cc95dd773ea9486176c62f097b9bc))
* Check encryptionScheme against MCap ([#6484](https://github.com/shaka-project/shaka-player/issues/6484)) ([ec29f82](https://github.com/shaka-project/shaka-player/commit/ec29f82592fdec9e189fc87a25704fabffb7d404))
* **DASH:** Add manifest.dash.enableFastSwitching config ([#6500](https://github.com/shaka-project/shaka-player/issues/6500)) ([2fc0c93](https://github.com/shaka-project/shaka-player/commit/2fc0c935c42cc5ef93e2a3c8644b7d0216cfad7b))
* **DASH:** Add MPD Chaining support ([#6641](https://github.com/shaka-project/shaka-player/issues/6641)) ([82c5149](https://github.com/shaka-project/shaka-player/commit/82c5149375745d6abbc5ebd1cde3c0632973ed62))
* **DASH:** Add MPD Patch support ([#5247](https://github.com/shaka-project/shaka-player/issues/5247)) ([d38aabf](https://github.com/shaka-project/shaka-player/commit/d38aabf04db86ed1297f3952cc3dc8f3366d747c))
* **DASH:** Parse and use target latency ([#6683](https://github.com/shaka-project/shaka-player/issues/6683)) ([9060ab0](https://github.com/shaka-project/shaka-player/commit/9060ab0a347fa6ea16f4f102470a82a039ee0034))
* **DASH:** Support Dolby Vision profile 8.x (HEVC) and 10.x (AV1) ([#6590](https://github.com/shaka-project/shaka-player/issues/6590)) ([e480bf0](https://github.com/shaka-project/shaka-player/commit/e480bf0ed4835fa1725f17135dc6caca71800b3e))
* Expose the maximum hardware resolution through probeSupport() ([#6569](https://github.com/shaka-project/shaka-player/issues/6569)) ([5da5de2](https://github.com/shaka-project/shaka-player/commit/5da5de2800a9190e3daf29fdec2e49c5108f268d))
* **HLS:** Build closed captions metadata on-the-fly ([#6700](https://github.com/shaka-project/shaka-player/issues/6700)) ([082f897](https://github.com/shaka-project/shaka-player/commit/082f89770165963cda5797bbe51966c72f6d4535))
* Improve default retry delay for Low Latency ([#6514](https://github.com/shaka-project/shaka-player/issues/6514)) ([5f8e7fd](https://github.com/shaka-project/shaka-player/commit/5f8e7fdd055b5ec09d7baff96138ee9b445c00ac))
* Optionally force HTTP content URIs ([#6649](https://github.com/shaka-project/shaka-player/issues/6649)) ([dda713a](https://github.com/shaka-project/shaka-player/commit/dda713aa71289da7282dfc131bdc870b78c918c7))
* Parse colorGamut and use it in MCap ([#6663](https://github.com/shaka-project/shaka-player/issues/6663)) ([329d42a](https://github.com/shaka-project/shaka-player/commit/329d42ad56b23d4b075349de72672d16f4d4bb80))
* Preload AES key when the key is available in EXT-X-SESSION-KEY ([#6495](https://github.com/shaka-project/shaka-player/issues/6495)) ([57cb6ad](https://github.com/shaka-project/shaka-player/commit/57cb6ad595d75ae0b36b9bb1ed99f896941c72ba))
* **Preload:** Add detachAndSavePreload method ([#6630](https://github.com/shaka-project/shaka-player/issues/6630)) ([0a68e93](https://github.com/shaka-project/shaka-player/commit/0a68e934fde7016286ed40e23eb5f41df59c63bd))
* Set autoCorrectDrift to false by default for low latency streaming ([#6549](https://github.com/shaka-project/shaka-player/issues/6549)) ([3d1c546](https://github.com/shaka-project/shaka-player/commit/3d1c5467e6c936c4620ae930332c62eeabe54841))
* Set maxDisabledTime to 1 by default for low latency streaming ([#6617](https://github.com/shaka-project/shaka-player/issues/6617)) ([1cdbbe0](https://github.com/shaka-project/shaka-player/commit/1cdbbe0f30c36ca95b6b0f6c1696af3d6c192844))
* **UI:** List bandwidth for duplicate resolutions ([#6548](https://github.com/shaka-project/shaka-player/issues/6548)) ([a9d5dc3](https://github.com/shaka-project/shaka-player/commit/a9d5dc399168cb8f9ab5ab0abdbef41e31e2942d)), closes [#6494](https://github.com/shaka-project/shaka-player/issues/6494)


### Bug Fixes

* Add timeout to fullyLoaded in src= ([#6676](https://github.com/shaka-project/shaka-player/issues/6676)) ([64e4fd8](https://github.com/shaka-project/shaka-player/commit/64e4fd8e922224d7acadf67f51d92330167c9c57))
* **Ads:** Fix CS destroy ([#6624](https://github.com/shaka-project/shaka-player/issues/6624)) ([0e9c2d8](https://github.com/shaka-project/shaka-player/commit/0e9c2d89671cdda434cd05d2edd0989bcc54ba21))
* Ban smooth codec switching on Tizen 5 & 6 ([#6686](https://github.com/shaka-project/shaka-player/issues/6686)) ([c541515](https://github.com/shaka-project/shaka-player/commit/c541515995f630573fa545f8478e65fb15585019))
* **Cast:** Incorrect detection of MediaCapabilities on Chromecast ([#6656](https://github.com/shaka-project/shaka-player/issues/6656)) ([00c5c1d](https://github.com/shaka-project/shaka-player/commit/00c5c1da1652622a3098b64e50ec74d214534597))
* **CEA:** Fix stream detection when the stream has not control codes ([#6703](https://github.com/shaka-project/shaka-player/issues/6703)) ([dd5658b](https://github.com/shaka-project/shaka-player/commit/dd5658bc3beaa0182c3e9e522a65f0a1b6e8773f))
* **CEA:** Ignore XDS control codes ([#6702](https://github.com/shaka-project/shaka-player/issues/6702)) ([f69694a](https://github.com/shaka-project/shaka-player/commit/f69694a37f2b3b44a761cdf98937c4a3e9e1f3cb))
* **CEA:** reset PTS on new init segment ([#6606](https://github.com/shaka-project/shaka-player/issues/6606)) ([024cb9b](https://github.com/shaka-project/shaka-player/commit/024cb9b96658e9fa9cf436d16e0888c8d6ffac23))
* **CEA:** reset PTS on new init segment ([#6671](https://github.com/shaka-project/shaka-player/issues/6671)) ([bcc6791](https://github.com/shaka-project/shaka-player/commit/bcc6791c5f96333999056e8f884761c32e100402))
* Clear preload array before awaiting destroy ([#6584](https://github.com/shaka-project/shaka-player/issues/6584)) ([be60f40](https://github.com/shaka-project/shaka-player/commit/be60f40cd71b5782d8386c73a0d426fa8e60dded))
* **DASH:** decrease memory preasure on manifest with SegmentReference by updating old initSegmentReference ([#6499](https://github.com/shaka-project/shaka-player/issues/6499)) ([2dd85e4](https://github.com/shaka-project/shaka-player/commit/2dd85e4e23773bd4ca353f38706066fc0415d231))
* **DASH:** Firefox multi-period/multi-codec bug ([#6691](https://github.com/shaka-project/shaka-player/issues/6691)) ([b3cacad](https://github.com/shaka-project/shaka-player/commit/b3cacadd162d2d0768d003e392c2c5611713354a)), closes [#6690](https://github.com/shaka-project/shaka-player/issues/6690)
* **DASH:** Fix get partial current position for LL when using SegmentTemplate@duration ([#6516](https://github.com/shaka-project/shaka-player/issues/6516)) ([6c47f8b](https://github.com/shaka-project/shaka-player/commit/6c47f8be65d19f4539dd1807f62822ab7258aab4))
* **DASH:** Fix unescape UTCTiming uris ([#6501](https://github.com/shaka-project/shaka-player/issues/6501)) ([27109fe](https://github.com/shaka-project/shaka-player/commit/27109feafac652348949bbea05e0a2a91bbb734b))
* **DASH:** Fix update of SegmentTemplate with $number$ for LL ([#6687](https://github.com/shaka-project/shaka-player/issues/6687)) ([c574be4](https://github.com/shaka-project/shaka-player/commit/c574be43770fa9be3e67e4912999eaa9dfdc582d))
* Destroy preload managers on player destroy ([#6576](https://github.com/shaka-project/shaka-player/issues/6576)) ([265784e](https://github.com/shaka-project/shaka-player/commit/265784eae16e32ae5695bafe77dc522ca9c7728d))
* Disallow Object.fromEntries in Tizen ([#6634](https://github.com/shaka-project/shaka-player/issues/6634)) ([11272a3](https://github.com/shaka-project/shaka-player/commit/11272a3feeb6214f50f94b9e8e6fee90b81f3519))
* Do not assume 1080p Cast devices, some are 720p ([#6562](https://github.com/shaka-project/shaka-player/issues/6562)) ([4498dcd](https://github.com/shaka-project/shaka-player/commit/4498dcde28995e3909714dcfdd996970922df038))
* Enable SMOOTH codec switching on Fuchsia cast devices ([#6609](https://github.com/shaka-project/shaka-player/issues/6609)) ([f1d620c](https://github.com/shaka-project/shaka-player/commit/f1d620cb23d6556d8a044c036f1c4db0f8c8f977))
* Fix COLR box parsing ([#6699](https://github.com/shaka-project/shaka-player/issues/6699)) ([2b358c5](https://github.com/shaka-project/shaka-player/commit/2b358c5c8eb879237ae43ea2a7147cea8ea9fae8))
* Fix default value of liveSyncMinPlaybackRate ([#6685](https://github.com/shaka-project/shaka-player/issues/6685)) ([a219e2f](https://github.com/shaka-project/shaka-player/commit/a219e2f3376444ee522f51d081ece5c9fc1ad45d))
* Fix deprecation warning for manifestPreprocessor that is always logged ([#6496](https://github.com/shaka-project/shaka-player/issues/6496)) ([0873d1e](https://github.com/shaka-project/shaka-player/commit/0873d1ecdd94d3a9b5562c29445c3c52e180d76d))
* Fix flac detection in Safari ([#6497](https://github.com/shaka-project/shaka-player/issues/6497)) ([0e00d65](https://github.com/shaka-project/shaka-player/commit/0e00d6551fbe60efefe3e47581aec25da6972511))
* Fix inefficient buffering behavior with negative trick play rate ([#6489](https://github.com/shaka-project/shaka-player/issues/6489)) ([a57002b](https://github.com/shaka-project/shaka-player/commit/a57002b4869348c62fbd9da4cc898558e14a2449))
* Fix init segment equality in Segment Prefetch ([#6537](https://github.com/shaka-project/shaka-player/issues/6537)) ([ce7cef4](https://github.com/shaka-project/shaka-player/commit/ce7cef4d00f63077f01e6c3f74dbf1ab3526be6b))
* Fix internal network filter for HEAD requests ([#6660](https://github.com/shaka-project/shaka-player/issues/6660)) ([d816e7c](https://github.com/shaka-project/shaka-player/commit/d816e7c04247e189eb70b0ea17103c9827db3997))
* Fix MCap checking when using src= ([#6675](https://github.com/shaka-project/shaka-player/issues/6675)) ([54234f1](https://github.com/shaka-project/shaka-player/commit/54234f1e7adc919b22b27f8302eaf3d099da9f94))
* Fix multi-codec filtering on DASH live ([#6647](https://github.com/shaka-project/shaka-player/issues/6647)) ([9071002](https://github.com/shaka-project/shaka-player/commit/90710023466dcad4d1d14a2869ae50e8da4e93ee))
* Fix numBytesRemaining when the request is done ([#6653](https://github.com/shaka-project/shaka-player/issues/6653)) ([812163a](https://github.com/shaka-project/shaka-player/commit/812163a9862ae0da3550bb95bda481cc28f13a71))
* Fix Opus support in Safari ([#6607](https://github.com/shaka-project/shaka-player/issues/6607)) ([0a4c9d1](https://github.com/shaka-project/shaka-player/commit/0a4c9d1973cb191d434acfa4f355261fd6b96f38))
* Fix progress events for VOD when using vodDynamicPlaybackRate ([#6688](https://github.com/shaka-project/shaka-player/issues/6688)) ([95d3c4a](https://github.com/shaka-project/shaka-player/commit/95d3c4a039aeb774d87bc662018c26c2a04681ca))
* Fix seeking timeouts ([#6539](https://github.com/shaka-project/shaka-player/issues/6539)) ([fda3c8f](https://github.com/shaka-project/shaka-player/commit/fda3c8f7e7f3ae60bedac96fc7e0db2d7adf6a0d)), closes [#5202](https://github.com/shaka-project/shaka-player/issues/5202)
* Fix tXml conversion to DOMElement ([#6538](https://github.com/shaka-project/shaka-player/issues/6538)) ([d494068](https://github.com/shaka-project/shaka-player/commit/d4940681dd40a88e3f89b6ba423a3456b4abd38e))
* Handle non existing navigator.platform string ([#6517](https://github.com/shaka-project/shaka-player/issues/6517)) ([#6518](https://github.com/shaka-project/shaka-player/issues/6518)) ([f337e06](https://github.com/shaka-project/shaka-player/commit/f337e06bdab676048eb9d0aa5faf172a09d06a1c))
* **HLS:** Fix bad detection in some MediaPlaylist ([#6608](https://github.com/shaka-project/shaka-player/issues/6608)) ([c5af5c7](https://github.com/shaka-project/shaka-player/commit/c5af5c776fba48c52d793421bbf73bcfd62f7f0a))
* **HLS:** Fix HLS load when using #EXT-X-I-FRAME-STREAM-INF without resolution ([#6680](https://github.com/shaka-project/shaka-player/issues/6680)) ([e51cd3b](https://github.com/shaka-project/shaka-player/commit/e51cd3b744e9a3b2d0170e302fd8d7143c15e170))
* **HLS:** Fix mimetype checking when using SUPPLEMENTAL-CODECS ([#6597](https://github.com/shaka-project/shaka-player/issues/6597)) ([5a90547](https://github.com/shaka-project/shaka-player/commit/5a90547160fdebdaeb46e8669843b946ac530d08)), closes [#6586](https://github.com/shaka-project/shaka-player/issues/6586)
* **HLS:** Support request byterange on media playlist detection ([#6629](https://github.com/shaka-project/shaka-player/issues/6629)) ([d66446f](https://github.com/shaka-project/shaka-player/commit/d66446f54fa55b0b15c4e6dc2feb18ff4af05012))
* Issue with compiler minifying webOS device properties ([#6558](https://github.com/shaka-project/shaka-player/issues/6558)) ([61ce88b](https://github.com/shaka-project/shaka-player/commit/61ce88b2f52cfa079595c89a3a6a39b1c055dc6c))
* Make UITextDisplayer constructor backward compatible ([#6532](https://github.com/shaka-project/shaka-player/issues/6532)) ([d564be8](https://github.com/shaka-project/shaka-player/commit/d564be8e8903ca1e825303a1f3c1e8369b2a5297))
* patch `setServerCertificate()` on older Tizens & webOS ([#6696](https://github.com/shaka-project/shaka-player/issues/6696)) ([9e26166](https://github.com/shaka-project/shaka-player/commit/9e26166c40a65997c30e79f9773d8a177385d360))
* **preload:** Copy net filters to preload manager ([#6709](https://github.com/shaka-project/shaka-player/issues/6709)) ([1cfb53e](https://github.com/shaka-project/shaka-player/commit/1cfb53e6482fd41620663d2daf56ab541ad83241)), closes [#6698](https://github.com/shaka-project/shaka-player/issues/6698)
* Re-add setting playbackRate to 0 to control buffering state ([#6546](https://github.com/shaka-project/shaka-player/issues/6546)) ([8232c60](https://github.com/shaka-project/shaka-player/commit/8232c600ce2fe6b62a76f19e900cf75a65565085))
* Remove preloaded segment when segment has network error ([#6515](https://github.com/shaka-project/shaka-player/issues/6515)) ([2f5062a](https://github.com/shaka-project/shaka-player/commit/2f5062a41724dad77bdf35591e9936657f4f1f25))
* **UI:** Allow show same resolution with different video bandwidth ([#6536](https://github.com/shaka-project/shaka-player/issues/6536)) ([9fb9b26](https://github.com/shaka-project/shaka-player/commit/9fb9b26b94a85fea3244a4c6b63fc0f7b22adba3))
* **UI:** Fix dragging the seek bar seeks and pans the view in VR mode ([#6677](https://github.com/shaka-project/shaka-player/issues/6677)) ([e3f85eb](https://github.com/shaka-project/shaka-player/commit/e3f85eb0edb8edd6c26f4d2b97d609bb08187df5))
* **UI:** Fix unhandled error when playing VR ([#6679](https://github.com/shaka-project/shaka-player/issues/6679)) ([35cd411](https://github.com/shaka-project/shaka-player/commit/35cd411ca3d7f957bdd8c47155b30720d643b927))
* Xbox - round gap jumping values ([#6695](https://github.com/shaka-project/shaka-player/issues/6695)) ([5b6e340](https://github.com/shaka-project/shaka-player/commit/5b6e340f592649695a0ac068d1cb7e34c767f301))

## [4.8.0](https://github.com/shaka-project/shaka-player/compare/v4.7.0...v4.8.0) (2024-04-26)


### Features

* **ABR:** Additional request information for ABR Managers ([#6313](https://github.com/shaka-project/shaka-player/issues/6313)) ([6c4333c](https://github.com/shaka-project/shaka-player/commit/6c4333c56506a67384672bc0cb7ac05e26025f14))
* add `mediaSource.addExtraFeaturesToSourceBuffer` ([#6362](https://github.com/shaka-project/shaka-player/issues/6362)) ([d0aa697](https://github.com/shaka-project/shaka-player/commit/d0aa69724bbdb257b1f3d7825e3ab3e6acce4b3f)), closes [#6358](https://github.com/shaka-project/shaka-player/issues/6358)
* add a live sync panic mode ([#6149](https://github.com/shaka-project/shaka-player/issues/6149)) ([65981e2](https://github.com/shaka-project/shaka-player/commit/65981e2aaea659f87e1133365239369ccb501764))
* add an option specifying when source buffer removals happen ([#6242](https://github.com/shaka-project/shaka-player/issues/6242)) ([93d616e](https://github.com/shaka-project/shaka-player/commit/93d616e9543b0c54f8b65695e713b9f710d1623b))
* Add bytesDownloaded to stats ([#6469](https://github.com/shaka-project/shaka-player/issues/6469)) ([d532bf4](https://github.com/shaka-project/shaka-player/commit/d532bf44c7a417c9fa61ae30f23c60fb026eaa99))
* Add config to set live stream duration to Infinity ([#6207](https://github.com/shaka-project/shaka-player/issues/6207)) ([de2957e](https://github.com/shaka-project/shaka-player/commit/de2957e8fa417f1bf741b2cb4da5f68adf3cc221))
* Add disableTextPrefetch config ([#6197](https://github.com/shaka-project/shaka-player/issues/6197)) ([202f308](https://github.com/shaka-project/shaka-player/commit/202f3082fd792f0d3346d4691fc8b64b44db46e0))
* Add encryptionScheme support on MCap polyfill ([#6482](https://github.com/shaka-project/shaka-player/issues/6482)) ([5a0e60a](https://github.com/shaka-project/shaka-player/commit/5a0e60ac0b63fa6219362ab48f96d002983559c5))
* Add encryptionScheme to shaka.extern.DrmInfo ([#6480](https://github.com/shaka-project/shaka-player/issues/6480)) ([c6c39df](https://github.com/shaka-project/shaka-player/commit/c6c39dfafc80ab2b02e4dd91c7451227e95bb0a1))
* add includeKeys to CMCD config to allow filtering of CMCD data ([#6248](https://github.com/shaka-project/shaka-player/issues/6248)) ([5a025fb](https://github.com/shaka-project/shaka-player/commit/5a025fbccd538d3e95a3fe6a878a398c93d4ae9e))
* Add Opus TS transmuxer ([#6387](https://github.com/shaka-project/shaka-player/issues/6387)) ([3b5a71c](https://github.com/shaka-project/shaka-player/commit/3b5a71c5bf34c88b3b020e558fbecdbeb69d1e64))
* Add preload system to player ([#5897](https://github.com/shaka-project/shaka-player/issues/5897)) ([489b11a](https://github.com/shaka-project/shaka-player/commit/489b11a959cfb1ec50a430baabf61821869b1b04)), closes [#880](https://github.com/shaka-project/shaka-player/issues/880)
* Add segmentData info to SegmentReference ([#6370](https://github.com/shaka-project/shaka-player/issues/6370)) ([2bb6dbc](https://github.com/shaka-project/shaka-player/commit/2bb6dbc56d1ed58071052487632c1f217f70471a))
* Add support for Dolby Vision based on AVC and AV1 ([#6154](https://github.com/shaka-project/shaka-player/issues/6154)) ([c100053](https://github.com/shaka-project/shaka-player/commit/c100053532d6ca40f07f4492b3deb34aeda68281))
* Add TextDisplayer config ([#6477](https://github.com/shaka-project/shaka-player/issues/6477)) ([de2a2d8](https://github.com/shaka-project/shaka-player/commit/de2a2d885f50ecdbebef9f5886bc90b232a20533))
* Add unloadAndSavePreload ([#6214](https://github.com/shaka-project/shaka-player/issues/6214)) ([0d929ca](https://github.com/shaka-project/shaka-player/commit/0d929caedb47c000c0e6f2cfa637d3698bcaf55f))
* **Ads:** Add ability to set tracking URL for Media Tailor ([#6365](https://github.com/shaka-project/shaka-player/issues/6365)) ([b51e661](https://github.com/shaka-project/shaka-player/commit/b51e6615ed43ed875928296fe97a13ba8ba2b561))
* **Ads:** Skip play detection in some devices ([#6443](https://github.com/shaka-project/shaka-player/issues/6443)) ([91f74e7](https://github.com/shaka-project/shaka-player/commit/91f74e793e411986363c410e6c3a929a82baa09c))
* Change default preferredKeySystems for Xbox and PS4 ([#6471](https://github.com/shaka-project/shaka-player/issues/6471)) ([cff3d84](https://github.com/shaka-project/shaka-player/commit/cff3d848dac711ef96606f0d3484383aeae81efc))
* **CMCD:** Add support to dl, nrr and nor parameters ([#6171](https://github.com/shaka-project/shaka-player/issues/6171)) ([8a9f17d](https://github.com/shaka-project/shaka-player/commit/8a9f17d48bef85a184d63648d47b86cc5c175375))
* **CMCD:** Add support to rtp parameter ([#6184](https://github.com/shaka-project/shaka-player/issues/6184)) ([038e894](https://github.com/shaka-project/shaka-player/commit/038e894e82a5636dd7ca6661b34770201a894edf))
* **DASH:** Add signalling the last segment number in Period ([#6416](https://github.com/shaka-project/shaka-player/issues/6416)) ([07a3241](https://github.com/shaka-project/shaka-player/commit/07a32419d3069dbf65fda8d9c56244175f934a4a))
* **DASH:** Allow PeriodCombiner for using streams once ([#6097](https://github.com/shaka-project/shaka-player/issues/6097)) ([5e3db78](https://github.com/shaka-project/shaka-player/commit/5e3db78a5e545960cf135200ca415f877ff84457))
* **DASH:** update period as part of configuration ([#6419](https://github.com/shaka-project/shaka-player/issues/6419)) ([bdabddc](https://github.com/shaka-project/shaka-player/commit/bdabddcc6b597e35b0c6aea9dedf837298efbce3))
* **demo:** Add new demo asset for multi-mimeType/codec feature ([#6349](https://github.com/shaka-project/shaka-player/issues/6349)) ([067d9ce](https://github.com/shaka-project/shaka-player/commit/067d9ce80f71b899be28c41b49b4bad17cb20427)), closes [#6010](https://github.com/shaka-project/shaka-player/issues/6010)
* **Demo:** Show APIC(ID3) as poster for audio only streams ([#6122](https://github.com/shaka-project/shaka-player/issues/6122)) ([291b497](https://github.com/shaka-project/shaka-player/commit/291b4971f92634970e26bd6b50a331e3abe2bfad))
* Detect maximum HW resolution automatically on some platforms ([#6180](https://github.com/shaka-project/shaka-player/issues/6180)) ([278c7bc](https://github.com/shaka-project/shaka-player/commit/278c7bc8cf8d4c8bfc12d4252300b9fc6095c4a0))
* Escape html codes when getting node contents ([#6198](https://github.com/shaka-project/shaka-player/issues/6198)) ([a1c1620](https://github.com/shaka-project/shaka-player/commit/a1c1620f09a35b53ce93feb098b5fd6388c5c3f8))
* Evict instead delete on prefetch ([#6404](https://github.com/shaka-project/shaka-player/issues/6404)) ([0fc5814](https://github.com/shaka-project/shaka-player/commit/0fc5814c6af20a861e4be22bd25dc09990821592))
* Expose PresentationTimeline segment availability duration through Player ([#6075](https://github.com/shaka-project/shaka-player/issues/6075)) ([8ff5b59](https://github.com/shaka-project/shaka-player/commit/8ff5b5916c474836e201dbec5fecede0bb4c40b2))
* **HLS:** Add AES-256 and AES-256-CTR support ([#6002](https://github.com/shaka-project/shaka-player/issues/6002)) ([c3380ce](https://github.com/shaka-project/shaka-player/commit/c3380ced14df146d8a7c5164bcdeb54136f33e48))
* **HLS:** Add automatically keyId-key for identity format ([#6308](https://github.com/shaka-project/shaka-player/issues/6308)) ([d251649](https://github.com/shaka-project/shaka-player/commit/d2516498d2add42cf3157b9a6b0a3fa475ade653))
* **HLS:** Add ignoreManifestProgramDateTimeForTypes ([#6372](https://github.com/shaka-project/shaka-player/issues/6372)) ([03bb463](https://github.com/shaka-project/shaka-player/commit/03bb463a724483c88df818b11c807a0fdc11cccb))
* **HLS:** Add support for SUPPLEMENTAL-CODECS ([#6155](https://github.com/shaka-project/shaka-player/issues/6155)) ([8d6ad7e](https://github.com/shaka-project/shaka-player/commit/8d6ad7ed64b27d5fb5f481dcc41cb068875999dc))
* **HLS:** Create segmentIndex when there is only one variant ([#6383](https://github.com/shaka-project/shaka-player/issues/6383)) ([3ba7492](https://github.com/shaka-project/shaka-player/commit/3ba7492584d1db3742720248ed897a47cbb6bb5d))
* Make getPlayheadTimeAsDate and getPresentationStartTimeAsDate available for VOD ([#6417](https://github.com/shaka-project/shaka-player/issues/6417)) ([986071b](https://github.com/shaka-project/shaka-player/commit/986071b7688536a1906cb3abdc17489d9cdd0eb9))
* Parse avcC, hvcC and dvcC boxes ([#6146](https://github.com/shaka-project/shaka-player/issues/6146)) ([b8520ed](https://github.com/shaka-project/shaka-player/commit/b8520ed9778b52c898a9d572b4892a8634b07376))
* Parse colr box ([#6438](https://github.com/shaka-project/shaka-player/issues/6438)) ([b8b1aa6](https://github.com/shaka-project/shaka-player/commit/b8b1aa648bfcf5b7a530d4ef6cb2f0a48c3e6337))
* Parse vpcC and av1C boxes ([#6157](https://github.com/shaka-project/shaka-player/issues/6157)) ([151b29c](https://github.com/shaka-project/shaka-player/commit/151b29c3c70381f4db761502b56377d43b5feff8))
* Parse XPath ([#6470](https://github.com/shaka-project/shaka-player/issues/6470)) ([0883c32](https://github.com/shaka-project/shaka-player/commit/0883c32ce650b1fc4c47453fc4f1cf22e281cca1))
* Prefer MSE HLS over native HLS in Apple platform when not encrypted ([#6188](https://github.com/shaka-project/shaka-player/issues/6188)) ([fc38aee](https://github.com/shaka-project/shaka-player/commit/fc38aeebe364a28efc710917745dcfa4b1fd3c14))
* prefetch audio languages. ([#6139](https://github.com/shaka-project/shaka-player/issues/6139)) ([a8ab0c8](https://github.com/shaka-project/shaka-player/commit/a8ab0c824b7e777e429401c294b7629d23cc0f78)), closes [#6128](https://github.com/shaka-project/shaka-player/issues/6128)
* Remove com.adobe.primetime keysystem ([#6189](https://github.com/shaka-project/shaka-player/issues/6189)) ([47602c6](https://github.com/shaka-project/shaka-player/commit/47602c6f5eda7ad5c5768f418c3825c40bf4ddcf))
* Rename aes128Key to aesKey to allow aes256 in the future ([#5990](https://github.com/shaka-project/shaka-player/issues/5990)) ([31c06ca](https://github.com/shaka-project/shaka-player/commit/31c06ca1891512ed4280a34c6a1f17df76bbfe1e))
* Replace native DOM Parser with a more performant one ([#6063](https://github.com/shaka-project/shaka-player/issues/6063)) ([7116a34](https://github.com/shaka-project/shaka-player/commit/7116a34ec207a42921fe1c6404d5e3af404dc294))
* SegmentIndex minimal interface ([#6095](https://github.com/shaka-project/shaka-player/issues/6095)) ([f064811](https://github.com/shaka-project/shaka-player/commit/f064811e21a678fbd0c73e6a2d1704d8b39b5165))
* Set updateIntervalSeconds to 0.1 by default for low latency streaming ([#6403](https://github.com/shaka-project/shaka-player/issues/6403)) ([9838622](https://github.com/shaka-project/shaka-player/commit/98386222599380b0034c17f336f7eb677ecd5a3c))
* **text:** Add MediaSource.modifyCueCallback ([#6167](https://github.com/shaka-project/shaka-player/issues/6167)) ([bd944d1](https://github.com/shaka-project/shaka-player/commit/bd944d15dbfb7a8ee2db92e605bdf978d79b014a))
* **text:** Add time context to modifyCueCallback ([#6252](https://github.com/shaka-project/shaka-player/issues/6252)) ([03633e4](https://github.com/shaka-project/shaka-player/commit/03633e47bb3036c2b5fbd60461c7171c1e4ea0ee))
* Trigger an event with spatial video info ([#6437](https://github.com/shaka-project/shaka-player/issues/6437)) ([d8d96c8](https://github.com/shaka-project/shaka-player/commit/d8d96c8546cd21e9f74ed1f3ee820963c2800cdb))
* **UI:** Add config for refreshTickInSeconds ([#6386](https://github.com/shaka-project/shaka-player/issues/6386)) ([dbdef5d](https://github.com/shaka-project/shaka-player/commit/dbdef5df3a405637c4109fd6d07b952ddc94b863))
* **UI:** Allow show/hide ui programmatically ([#6117](https://github.com/shaka-project/shaka-player/issues/6117)) ([4e599cb](https://github.com/shaka-project/shaka-player/commit/4e599cb4a46ca7851b74a9ddf2d722884d3d4db8))
* **UI:** Disable forward and rewind with arrows while seekbar not active ([#6049](https://github.com/shaka-project/shaka-player/issues/6049)) ([c189922](https://github.com/shaka-project/shaka-player/commit/c189922f8d921bf91b88ca5af3bedd71cb3b77e9))
* **UI:** Hide resolution overflow menu button if there's only one choice ([#6004](https://github.com/shaka-project/shaka-player/issues/6004)) ([8649e7e](https://github.com/shaka-project/shaka-player/commit/8649e7ebbdb173d70741ec5e7400bbcbf2019710))
* **UI:** Separate trackLabelFormat settings for text tracks and audio tracks ([#6052](https://github.com/shaka-project/shaka-player/issues/6052)) ([a94a602](https://github.com/shaka-project/shaka-player/commit/a94a60213dd7e84473c3f3c8bcfef861a6c939b8))
* **UI:** UI support for VR content ([#6450](https://github.com/shaka-project/shaka-player/issues/6450)) ([95c6a7d](https://github.com/shaka-project/shaka-player/commit/95c6a7dda3852860b709de0bbd93870f15b4e139))
* **UI:** Use the same logic to group variants into audio and quality selectors ([#6069](https://github.com/shaka-project/shaka-player/issues/6069)) ([eabfc47](https://github.com/shaka-project/shaka-player/commit/eabfc472aefd7419e9d6c7189524ca920d83ec33))
* **UI:** Use the same logic to group variants into audio and quality selectors ([#6096](https://github.com/shaka-project/shaka-player/issues/6096)) ([c596677](https://github.com/shaka-project/shaka-player/commit/c596677e4a3e59390225324e95968d0555c352d0))
* Update for LCEVC Integration with new features added. ([#6263](https://github.com/shaka-project/shaka-player/issues/6263)) ([7b717e5](https://github.com/shaka-project/shaka-player/commit/7b717e513d46d9b27982db0e432beda8f9b09cd2))
* vod dynamic playback rate buffer control ([#6172](https://github.com/shaka-project/shaka-player/issues/6172)) ([8fc292b](https://github.com/shaka-project/shaka-player/commit/8fc292bc28a99e715e4fa453b17865eecdb2e4b5))
* **WebVTT:** Handle badly formed VTT ([#6147](https://github.com/shaka-project/shaka-player/issues/6147)) ([335eab0](https://github.com/shaka-project/shaka-player/commit/335eab08ba5eb4970e1ff51f1f211dce25321fe6))
* **WebVTT:** Remove un-needed VTT payload normalisation ([#6145](https://github.com/shaka-project/shaka-player/issues/6145)) ([ee600c4](https://github.com/shaka-project/shaka-player/commit/ee600c4fd555850ffdc98a958627401a1c04b03d))


### Bug Fixes

* AC-3 audio codec support on Tizen ([#6166](https://github.com/shaka-project/shaka-player/issues/6166)) ([08cc34a](https://github.com/shaka-project/shaka-player/commit/08cc34a5322a4fdbabe4d80cf6b1c2a1d473f794))
* Add LOAS-AAC detection in TS ([#6390](https://github.com/shaka-project/shaka-player/issues/6390)) ([535d386](https://github.com/shaka-project/shaka-player/commit/535d386ec80576fbb9882fabde3ff0c912253942))
* Add ManagedMediaSource support in MediaSource polyfill ([#6361](https://github.com/shaka-project/shaka-player/issues/6361)) ([12bf642](https://github.com/shaka-project/shaka-player/commit/12bf6428e00b93cc2cf9cefcf4db39fe9c749ee3))
* add missing properties to PlayButton type ([#6130](https://github.com/shaka-project/shaka-player/issues/6130)) ([8f0db8e](https://github.com/shaka-project/shaka-player/commit/8f0db8e89d1964f1f576a9f87b4added61c8136f))
* Add Opus and AV1 detection in TS ([#6385](https://github.com/shaka-project/shaka-player/issues/6385)) ([bc23fff](https://github.com/shaka-project/shaka-player/commit/bc23fffd8adc6c71eacab5f81fea73df2ca790c4))
* **Ads:** Fix ad pausing when using customPlayheadTracker ([#6444](https://github.com/shaka-project/shaka-player/issues/6444)) ([2d42933](https://github.com/shaka-project/shaka-player/commit/2d42933ea1a468eff207ed7f8b8aa73abe34618d))
* **Ads:** Fix initial ads configuration ([#6176](https://github.com/shaka-project/shaka-player/issues/6176)) ([5b141eb](https://github.com/shaka-project/shaka-player/commit/5b141eb76ac5bfb8300cdf42489ca68f7cb5bfe9))
* **Ads:** Fix muting/unmuting ads won't affect video and vice versa ([#6073](https://github.com/shaka-project/shaka-player/issues/6073)) ([01a217f](https://github.com/shaka-project/shaka-player/commit/01a217f0fd9a375647d78e2f41faab912a1c7ab7))
* **Ads:** Fix VMAP won't play in muted autoplay ([#6046](https://github.com/shaka-project/shaka-player/issues/6046)) ([a8bbbce](https://github.com/shaka-project/shaka-player/commit/a8bbbcef7b4c03b6b841a72ac564cb8e58ae804b))
* Allow by default variants without pssh in the manifest ([#6144](https://github.com/shaka-project/shaka-player/issues/6144)) ([e1cd031](https://github.com/shaka-project/shaka-player/commit/e1cd031625c5a73cc964a8d1b039f9f10f8d52ab))
* APL set-top box wrongly identifies as an Apple device. ([#6026](https://github.com/shaka-project/shaka-player/issues/6026)) ([7f5005d](https://github.com/shaka-project/shaka-player/commit/7f5005db23e2f280cee9b695d5d6432e0d402024))
* auto cancel trickPlay on live as specified ([#6100](https://github.com/shaka-project/shaka-player/issues/6100)) ([45505b0](https://github.com/shaka-project/shaka-player/commit/45505b074389c4716b6fab50cde07e176c701aca))
* avoid uiTextDisplayer.destroy crashing if called more than once ([#6022](https://github.com/shaka-project/shaka-player/issues/6022)) ([42c235d](https://github.com/shaka-project/shaka-player/commit/42c235d12318706494194fb6024f00ce161473f1))
* call to load in MediaElement using src= in HLS Safari ([#6478](https://github.com/shaka-project/shaka-player/issues/6478)) ([064c3b7](https://github.com/shaka-project/shaka-player/commit/064c3b70db8de6fd2e7195a73451cf5252e98413))
* **Cast:** Don't pause local video until the cast connection is established ([#6359](https://github.com/shaka-project/shaka-player/issues/6359)) ([ac833da](https://github.com/shaka-project/shaka-player/commit/ac833da3dc7669ba66d074f8e09129389d7bb045))
* **Cast:** Force TS content to be transmuxed on Chromecast ([#6262](https://github.com/shaka-project/shaka-player/issues/6262)) ([b8905bd](https://github.com/shaka-project/shaka-player/commit/b8905bd8d44217b80dee8bb93ad306f55c145764)), closes [#5278](https://github.com/shaka-project/shaka-player/issues/5278)
* Change quality only when adding the last partial segment and it is fast switching ([#6114](https://github.com/shaka-project/shaka-player/issues/6114)) ([48626f2](https://github.com/shaka-project/shaka-player/commit/48626f2ae0187ed12e1edbd7d8ec0be6a1cf699a))
* clear listeners when resetting media source ([#6449](https://github.com/shaka-project/shaka-player/issues/6449)) ([ab36ce7](https://github.com/shaka-project/shaka-player/commit/ab36ce73431cc801035b547f2c7f5fbd3fa2e921))
* **CMCD:** Allow reconfigure session ID ([#6177](https://github.com/shaka-project/shaka-player/issues/6177)) ([3537dc0](https://github.com/shaka-project/shaka-player/commit/3537dc0a68eeb22890ffc7e658e5eb940eb1fd43))
* **CMCD:** allow session id to be configured ([#6192](https://github.com/shaka-project/shaka-player/issues/6192)) ([78c12a6](https://github.com/shaka-project/shaka-player/commit/78c12a6265430c80568ac28193b762edce193d1f))
* **CMCD:** Fix CMCD for some mimetypes in src= ([#6178](https://github.com/shaka-project/shaka-player/issues/6178)) ([33b40cf](https://github.com/shaka-project/shaka-player/commit/33b40cfcce6909f8d05c53753fdb22d7c6606b8d))
* Correct playhead when seek beyond seekRange ([#6304](https://github.com/shaka-project/shaka-player/issues/6304)) ([a6d27a9](https://github.com/shaka-project/shaka-player/commit/a6d27a915c61d3a248927ae5676d39d1c47678f3))
* **DASH:** Check if periodCombiner_ exists before configuring ([#5998](https://github.com/shaka-project/shaka-player/issues/5998)) ([bb64cb1](https://github.com/shaka-project/shaka-player/commit/bb64cb1f0cf94624e8c4d1243c5c327b15792e1e))
* **DASH:** Fix bad error on DASH DAI ([#6047](https://github.com/shaka-project/shaka-player/issues/6047)) ([a371f43](https://github.com/shaka-project/shaka-player/commit/a371f434acca086e7e38959ef7067277c6e4a014))
* **DASH:** Fix PERIOD_FLATTENING_FAILED on fastswitching streams ([#6113](https://github.com/shaka-project/shaka-player/issues/6113)) ([af12b0b](https://github.com/shaka-project/shaka-player/commit/af12b0b3f0375241fcbd38761a7408e0a0f10ec0))
* **DASH:** Fix precision issue on some platforms ([#6258](https://github.com/shaka-project/shaka-player/issues/6258)) ([4a0d1ca](https://github.com/shaka-project/shaka-player/commit/4a0d1ca06fe54975a344c9bb745d908b2588f566))
* **DASH:** Fix support for multi-mimeType variants ([#6348](https://github.com/shaka-project/shaka-player/issues/6348)) ([1da5da9](https://github.com/shaka-project/shaka-player/commit/1da5da9790b8ba2e3e7b3d548b2e47f08e474379))
* **DASH:** Set delay to 0 for LL streams ([#6406](https://github.com/shaka-project/shaka-player/issues/6406)) ([b7b2fc9](https://github.com/shaka-project/shaka-player/commit/b7b2fc999406692716df55adae4fcca501d2a031))
* **DASH:** Update dash manifest when minimumUpdatePeriod = 0 ([#6187](https://github.com/shaka-project/shaka-player/issues/6187)) ([a332070](https://github.com/shaka-project/shaka-player/commit/a3320707b9344a84242bcdc413f1bbf23bfa49e9))
* **DASH:** Use labels to stitch streams across periods ([#6121](https://github.com/shaka-project/shaka-player/issues/6121)) ([0de7af9](https://github.com/shaka-project/shaka-player/commit/0de7af94cd995b29496705523e10cfd004c9e554))
* **Demo:** Allow play MP4 and TS in legacy iOS devices ([#6051](https://github.com/shaka-project/shaka-player/issues/6051)) ([f0751cd](https://github.com/shaka-project/shaka-player/commit/f0751cdae606f1423c56e99574a603848a0f9b2a))
* **Demo:** Fix MSS assets ([#6194](https://github.com/shaka-project/shaka-player/issues/6194)) ([844c208](https://github.com/shaka-project/shaka-player/commit/844c208d14fdfdbbba8fd1889134be80d6e89ddb))
* **demo:** Remove max height of demo config tabs ([#6324](https://github.com/shaka-project/shaka-player/issues/6324)) ([4655271](https://github.com/shaka-project/shaka-player/commit/465527186fbe94802752cdf41b6a000b479b0b01))
* Disable smooth codec switching in Edge Windows ([#6384](https://github.com/shaka-project/shaka-player/issues/6384)) ([fdc7c6c](https://github.com/shaka-project/shaka-player/commit/fdc7c6c2eb02603e0778d1d8fe84aeaae788d531))
* do not append blank codec strings ([#6093](https://github.com/shaka-project/shaka-player/issues/6093)) ([ed0aa22](https://github.com/shaka-project/shaka-player/commit/ed0aa22c48a3d90da990e86665e43468782bf66b)), closes [#6092](https://github.com/shaka-project/shaka-player/issues/6092)
* Do not make LICENSE_REQUEST_FAILED fatal if other keys are successful ([#6457](https://github.com/shaka-project/shaka-player/issues/6457)) ([a6c748a](https://github.com/shaka-project/shaka-player/commit/a6c748ad1e1df5239f743d129f0f8f54037cbe73))
* Do not use `replaceAll` in XPath parsing ([#6473](https://github.com/shaka-project/shaka-player/issues/6473)) ([bf17a34](https://github.com/shaka-project/shaka-player/commit/bf17a3401e35076b77ba2d44ceb96efc8be5c83a))
* don't double wrap URIs for HLS key requests ([#6246](https://github.com/shaka-project/shaka-player/issues/6246)) ([948660b](https://github.com/shaka-project/shaka-player/commit/948660b3590bbfacc53bdfb339f36c17dfaf338c))
* Don't retry MSE errors on startup ([#6112](https://github.com/shaka-project/shaka-player/issues/6112)) ([de7d8d3](https://github.com/shaka-project/shaka-player/commit/de7d8d3c4b38867f4547862a13d4beb10f0eff3d))
* Don't update captions when video is paused ([#6474](https://github.com/shaka-project/shaka-player/issues/6474)) ([2f653f1](https://github.com/shaka-project/shaka-player/commit/2f653f132b98499e5a28c7b3884021d47596fbee))
* ENCRYPTED CONTENT WITHOUT DRM INFO on comcast X1 due to safari blocklist ([#6034](https://github.com/shaka-project/shaka-player/issues/6034)) ([3bf0664](https://github.com/shaka-project/shaka-player/commit/3bf0664457708d0b43de8512ce5eeee8260e9f8a))
* Fix cea608 whitespace rendering ([#6329](https://github.com/shaka-project/shaka-player/issues/6329)) ([8cf9d59](https://github.com/shaka-project/shaka-player/commit/8cf9d59eac6f4ceafb66f7dc59317e372dbbc059)), closes [#6328](https://github.com/shaka-project/shaka-player/issues/6328)
* Fix compiler issue in Mp4BoxParsers ([#6312](https://github.com/shaka-project/shaka-player/issues/6312)) ([5badb6a](https://github.com/shaka-project/shaka-player/commit/5badb6aa2b8968224ce18c944cf98f39d5442270))
* Fix detection of flac support on Safari ([#6250](https://github.com/shaka-project/shaka-player/issues/6250)) ([bb712c0](https://github.com/shaka-project/shaka-player/commit/bb712c02835f1214be5f23c7f37891eb206ee8e1)), closes [#6249](https://github.com/shaka-project/shaka-player/issues/6249)
* Fix detection of spatial rendering support in Cast ([#6138](https://github.com/shaka-project/shaka-player/issues/6138)) ([4e47acd](https://github.com/shaka-project/shaka-player/commit/4e47acda0cfc704a7efba8962f3c2e8bea333f5a))
* Fix DRM workaround for Xbox with Dolby Vision boxes ([#6201](https://github.com/shaka-project/shaka-player/issues/6201)) ([d938837](https://github.com/shaka-project/shaka-player/commit/d9388378e7b6a3ef940f72b3bea5dfc3ba17cf11))
* Fix duplicate init segment download when using startAtSegmentBoundary ([#6479](https://github.com/shaka-project/shaka-player/issues/6479)) ([da7863d](https://github.com/shaka-project/shaka-player/commit/da7863ddbc8e29edcdf6f12e3ca8a8829e581d6e))
* Fix ENCA box parsing ([#6298](https://github.com/shaka-project/shaka-player/issues/6298)) ([bca9f25](https://github.com/shaka-project/shaka-player/commit/bca9f2514bc2f3ccd2a43d19907721d06d7379c7))
* Fix encryptionScheme for FairPlay ([#6483](https://github.com/shaka-project/shaka-player/issues/6483)) ([bf9787a](https://github.com/shaka-project/shaka-player/commit/bf9787a436dd6bb25b375fc305ad9092d8ba96ec))
* Fix exceptions in StreamingEngine when reloading ([#6466](https://github.com/shaka-project/shaka-player/issues/6466)) ([d570ae1](https://github.com/shaka-project/shaka-player/commit/d570ae151f84197cf2cea5cddf63bf33a8f897a7)), closes [#6458](https://github.com/shaka-project/shaka-player/issues/6458)
* Fix gitpkg.now.sh dependencies ([#6211](https://github.com/shaka-project/shaka-player/issues/6211)) ([62ab048](https://github.com/shaka-project/shaka-player/commit/62ab04895ae0e83872dc8f5143eec6ed76f29d5e))
* fix handling of multiple CC tracks ([#6076](https://github.com/shaka-project/shaka-player/issues/6076)) ([44cb8a2](https://github.com/shaka-project/shaka-player/commit/44cb8a2ed8bd5d24d90e8c2213351eef2f22841e))
* Fix HLS segment index errors and x-program-date-time errors since v4.7.4 ([fd6b3d0](https://github.com/shaka-project/shaka-player/commit/fd6b3d0d6673c552e7e6ef995fc1e379918c702d))
* Fix liveLatency in stats ([#5982](https://github.com/shaka-project/shaka-player/issues/5982)) ([00c918f](https://github.com/shaka-project/shaka-player/commit/00c918f2cce8bef5646487465adce47a4be2fb9a))
* Fix nalu parsing in TS ([#6137](https://github.com/shaka-project/shaka-player/issues/6137)) ([df8dbb9](https://github.com/shaka-project/shaka-player/commit/df8dbb9caaa2391c14288782884546c5c7b4ac69))
* Fix PES rollover in TS ([#6363](https://github.com/shaka-project/shaka-player/issues/6363)) ([e8f37f0](https://github.com/shaka-project/shaka-player/commit/e8f37f0d6c9bbcc800d17302069b2bc4e62b0f33))
* Fix playback stuck on initial gap ([#6340](https://github.com/shaka-project/shaka-player/issues/6340)) ([292ef20](https://github.com/shaka-project/shaka-player/commit/292ef20d80019191a98f64a5f6106f92277991a4)), closes [#6339](https://github.com/shaka-project/shaka-player/issues/6339)
* Fix reusing region elements in UITextDisplayer ([#6476](https://github.com/shaka-project/shaka-player/issues/6476)) ([4302a6b](https://github.com/shaka-project/shaka-player/commit/4302a6bf174cef52e3eb569340c82c2babc20c82))
* Fix SAR when transmuxing ([#6309](https://github.com/shaka-project/shaka-player/issues/6309)) ([b5d69f0](https://github.com/shaka-project/shaka-player/commit/b5d69f067a80fee2857cea7aabe31757b5a1f112))
* Fix SegmentPrefetch in some cases ([#6199](https://github.com/shaka-project/shaka-player/issues/6199)) ([b508d48](https://github.com/shaka-project/shaka-player/commit/b508d482c64542c4708734274fe47a3142ada028))
* Fix support of getAllThumbnails when using DASH multi-period ([#6464](https://github.com/shaka-project/shaka-player/issues/6464)) ([6905c74](https://github.com/shaka-project/shaka-player/commit/6905c74122dd6f5ff7f3b399e3d0717450a37bd6))
* Fix transmuxer when some PES has the same pts and dts value ([#5985](https://github.com/shaka-project/shaka-player/issues/5985)) ([165feac](https://github.com/shaka-project/shaka-player/commit/165feacb00b960aa3929b8980554155e86784af1))
* Fix uncaught global OBJECT_DESTROYED errors ([#6460](https://github.com/shaka-project/shaka-player/issues/6460)) ([32d7054](https://github.com/shaka-project/shaka-player/commit/32d7054474eebbc2a5abbae0385bfc37c8ea5be9))
* Fix untrusted types in MediaTailorAdManager ([#5996](https://github.com/shaka-project/shaka-player/issues/5996)) ([2f06039](https://github.com/shaka-project/shaka-player/commit/2f06039193b28b3d59ace8ad938ee657ddccdaee))
* Fix waiting for empty init datas ([#6292](https://github.com/shaka-project/shaka-player/issues/6292)) ([118f47f](https://github.com/shaka-project/shaka-player/commit/118f47f1ea6f83e11c5304ce5ae3b36ccb2be8f3)), closes [#6228](https://github.com/shaka-project/shaka-player/issues/6228)
* Fix webOS 4 & 5 utility methods ([#6463](https://github.com/shaka-project/shaka-player/issues/6463)) ([8c549f3](https://github.com/shaka-project/shaka-player/commit/8c549f34272ea3838dd1b703fb7ccb09d3b32de0))
* Fix wrong aspect ratio in transmuxed videos ([#6170](https://github.com/shaka-project/shaka-player/issues/6170)) ([eb1fef8](https://github.com/shaka-project/shaka-player/commit/eb1fef888b771588e05ff443d78f630a28f29bf0))
* **HLS:** Avoid duplicate AES request when using the same info ([#6118](https://github.com/shaka-project/shaka-player/issues/6118)) ([1671a3e](https://github.com/shaka-project/shaka-player/commit/1671a3e98c1218c3a23f0baa430e04c8a899b468))
* **HLS:** Avoid duplicate AES requests ([#6399](https://github.com/shaka-project/shaka-player/issues/6399)) ([ea740ba](https://github.com/shaka-project/shaka-player/commit/ea740ba2468f3b035d463ea9933aa7eeccf5c748))
* **HLS:** Ban unsupported combinations of SAMPLE-AES encryption ([#6295](https://github.com/shaka-project/shaka-player/issues/6295)) ([edbac36](https://github.com/shaka-project/shaka-player/commit/edbac3622933c041164a42e494c3895c67b6b2dc))
* **HLS:** Fix bad init segment request with byterange when using media playlist ([#6297](https://github.com/shaka-project/shaka-player/issues/6297)) ([6a8f972](https://github.com/shaka-project/shaka-player/commit/6a8f972b5d14a24086349b71ccf7f86a83fc1ab4))
* **HLS:** Fix bad warning when playing HLS-AES128 ([#6434](https://github.com/shaka-project/shaka-player/issues/6434)) ([17df192](https://github.com/shaka-project/shaka-player/commit/17df192289a74d80ec87e13a6cc1bd3bf588ba84))
* **HLS:** Fix clear init segment mapping ([#6000](https://github.com/shaka-project/shaka-player/issues/6000)) ([8a44111](https://github.com/shaka-project/shaka-player/commit/8a44111ec8e59139ceb5b5c267f2eb39f9477fab))
* **HLS:** Fix IAMF codec selection in HLS ([#6389](https://github.com/shaka-project/shaka-player/issues/6389)) ([c59a3b8](https://github.com/shaka-project/shaka-player/commit/c59a3b83a33c7ae58b5ab25c7572584e813cf48d))
* **HLS:** Fix labelling of captions in Safari ([#6426](https://github.com/shaka-project/shaka-player/issues/6426)) ([35dd543](https://github.com/shaka-project/shaka-player/commit/35dd5433eddcb1fddba45ec1f6152de1cc20e81b))
* **HLS:** Fix playback of muxed TS content in Safari ([#6045](https://github.com/shaka-project/shaka-player/issues/6045)) ([1b675cb](https://github.com/shaka-project/shaka-player/commit/1b675cb58efe90657291e47edd3ffeab493da733))
* **HLS:** Fix SAMPLE-AES playback ([#6402](https://github.com/shaka-project/shaka-player/issues/6402)) ([af88a32](https://github.com/shaka-project/shaka-player/commit/af88a32d0842be6164f1162733129255af00df79))
* **HLS:** Fix variant synchronization in HLS after selectVariantTrack ([#5984](https://github.com/shaka-project/shaka-player/issues/5984)) ([8da033f](https://github.com/shaka-project/shaka-player/commit/8da033f7c90cc38bdc06500c8f22c5b5f3823584))
* **HLS:** Fix VVC codec selection in HLS ([#6156](https://github.com/shaka-project/shaka-player/issues/6156)) ([701ec9b](https://github.com/shaka-project/shaka-player/commit/701ec9bece38d202c08db7910130616ee4be11f8))
* **HLS:** getPlayheadTimeAsDate() differs from X-EXT-PROGRAM-DATE-TIME ([#6059](https://github.com/shaka-project/shaka-player/issues/6059)) ([776b69d](https://github.com/shaka-project/shaka-player/commit/776b69dcb99e1f5dbd22181e40c22898f0b8e47a))
* **HLS:** getPlayheadTimeAsDate() differs from X-EXT-PROGRAM-DATE-TIME ([#6371](https://github.com/shaka-project/shaka-player/issues/6371)) ([c615cf4](https://github.com/shaka-project/shaka-player/commit/c615cf459a13703244595fa34198814cf330e162))
* **HLS:** Live recovery after disconnects ([#6048](https://github.com/shaka-project/shaka-player/issues/6048)) ([8476631](https://github.com/shaka-project/shaka-player/commit/847663145390f5fc0a9378c3a663ae0dbf7b506b))
* **HLS:** Only offset segment ref times when needed w/ EXT-X-MEDIA-SEQUENCE ([#6378](https://github.com/shaka-project/shaka-player/issues/6378)) ([bca6252](https://github.com/shaka-project/shaka-player/commit/bca62521bf7f8ce08b66bd31681d07a724e4dbfc))
* **HLS:** Reset textSequenceModeOffset on discontinuity ([#6388](https://github.com/shaka-project/shaka-player/issues/6388)) ([966302d](https://github.com/shaka-project/shaka-player/commit/966302d447e896f8b67ef9ea865b62775589b7b1))
* **HLS:** Set the bandwidth correctly for audio/video-only variants ([#6165](https://github.com/shaka-project/shaka-player/issues/6165)) ([658386b](https://github.com/shaka-project/shaka-player/commit/658386bf936341230c3c3015293b5f89801d0d54))
* Improved HEAD request fail test when fallback-ing to GET request ([#6044](https://github.com/shaka-project/shaka-player/issues/6044)) ([b45877d](https://github.com/shaka-project/shaka-player/commit/b45877d17bb52b7d8455ce06f010408414822979))
* Include text bandwidth in stats ([#6109](https://github.com/shaka-project/shaka-player/issues/6109)) ([4823dfe](https://github.com/shaka-project/shaka-player/commit/4823dfefea0c497adca145e50fe4500d16fc4b19))
* Install by default shaka.polyfill.PatchedMediaKeysApple when there is no unprefixed EME support ([#6053](https://github.com/shaka-project/shaka-player/issues/6053)) ([5b5b2ce](https://github.com/shaka-project/shaka-player/commit/5b5b2ce1746ea888e163dddb3d36125f03100102))
* log prefetch miss for missing segments ([#6012](https://github.com/shaka-project/shaka-player/issues/6012)) ([a70136d](https://github.com/shaka-project/shaka-player/commit/a70136d31de062367a462c6b9934616e2a029a6e))
* Looser tolerance for ending trick play at edge of seek range. ([#6422](https://github.com/shaka-project/shaka-player/issues/6422)) ([9f603ad](https://github.com/shaka-project/shaka-player/commit/9f603adefb36be001aef0c2fbea632aae4e61277)), closes [#6421](https://github.com/shaka-project/shaka-player/issues/6421)
* **offline:** Fix server certificate error when trying to delete stored content ([#6080](https://github.com/shaka-project/shaka-player/issues/6080)) ([e1eb003](https://github.com/shaka-project/shaka-player/commit/e1eb0032566547b45f3d0ae288f7186618bf7e7f))
* **offline:** Fix store persistent licenses with drm info in the pssh ([#6143](https://github.com/shaka-project/shaka-player/issues/6143)) ([5acc773](https://github.com/shaka-project/shaka-player/commit/5acc7733647009d395a0ad8d399b4d18d045b2b3))
* player Dropping Variant (better codec available) when it should not ([#6163](https://github.com/shaka-project/shaka-player/issues/6163)) ([07ebdb1](https://github.com/shaka-project/shaka-player/commit/07ebdb1d2cebe20bbaa32a3d37ebf5efd1a287e7))
* **preload:** Fix load interruption ([#6271](https://github.com/shaka-project/shaka-player/issues/6271)) ([d795a00](https://github.com/shaka-project/shaka-player/commit/d795a00d6caf133020b8a0a35fac6d5daa65c733)), closes [#6225](https://github.com/shaka-project/shaka-player/issues/6225)
* **preload:** Fix timing of call to stopQueuingLatePhaseQueuedOperations ([#6238](https://github.com/shaka-project/shaka-player/issues/6238)) ([fd57e7f](https://github.com/shaka-project/shaka-player/commit/fd57e7f48a01ffbdf296d48b80089078b410eac7)), closes [#6225](https://github.com/shaka-project/shaka-player/issues/6225)
* **preload:** Only start preload if manager exists ([#6222](https://github.com/shaka-project/shaka-player/issues/6222)) ([36b7367](https://github.com/shaka-project/shaka-player/commit/36b7367ebd3efafd6e46d8ef74758cd834aff224))
* Prevent license requests for unplayable variants ([#6204](https://github.com/shaka-project/shaka-player/issues/6204)) ([cac1fd0](https://github.com/shaka-project/shaka-player/commit/cac1fd0f7f8569161d8118c724333ef91b14bfef))
* Provide a fallback to GET request when HEAD request fails ([#5986](https://github.com/shaka-project/shaka-player/issues/5986)) ([1af93e6](https://github.com/shaka-project/shaka-player/commit/1af93e63ffa6d1e585524e66d05072579a3cd299))
* Reject Opus encrypted on Firefox Android ([#6115](https://github.com/shaka-project/shaka-player/issues/6115)) ([e692d68](https://github.com/shaka-project/shaka-player/commit/e692d68ecf2eb3697711b3ce60d1774b99748cd2))
* Reject TS content on all platforms and transmux always ([#6382](https://github.com/shaka-project/shaka-player/issues/6382)) ([7e32636](https://github.com/shaka-project/shaka-player/commit/7e32636096b493b5665175bbe704d35751ada852))
* Reset to default playback rate on release playback rate controller ([#6089](https://github.com/shaka-project/shaka-player/issues/6089)) ([23fb2f5](https://github.com/shaka-project/shaka-player/commit/23fb2f5c057beb1b69368231f408f44407d57e94))
* stay paused after codec switch ([#6108](https://github.com/shaka-project/shaka-player/issues/6108)) ([e48438f](https://github.com/shaka-project/shaka-player/commit/e48438f3f143ce6b9f2b2044d28f1c73b23b8a4d))
* text roles being combined incorrectly in some multiperiod cases ([#6055](https://github.com/shaka-project/shaka-player/issues/6055)) ([b463e39](https://github.com/shaka-project/shaka-player/commit/b463e391c3795ece7619fda617530ef7f39bf198)), closes [#6054](https://github.com/shaka-project/shaka-player/issues/6054)
* **transmuxer:** Support raw AAC with TS extension ([#6360](https://github.com/shaka-project/shaka-player/issues/6360)) ([7c6e846](https://github.com/shaka-project/shaka-player/commit/7c6e84609440d4c107d97207345c095291bcd4d5))
* **TTML:** Clip to video when extent is not present ([#6086](https://github.com/shaka-project/shaka-player/issues/6086)) ([2862228](https://github.com/shaka-project/shaka-player/commit/28622287161b50b664cbfe9b5b8b7b1d5f894e27))
* **TTML:** Fix trim surrounding spaces with xml:space="default" ([#6395](https://github.com/shaka-project/shaka-player/issues/6395)) ([bcedec3](https://github.com/shaka-project/shaka-player/commit/bcedec3a0a242a26e683b9e3c83de4b20546045e))
* **tXml:** html unescape node attributes with urls ([#6267](https://github.com/shaka-project/shaka-player/issues/6267)) ([67cd2dd](https://github.com/shaka-project/shaka-player/commit/67cd2dd29d1f281f1f4011ec2cd2a88298dfb350))
* **UI:** Disable PiP on casting ([#6110](https://github.com/shaka-project/shaka-player/issues/6110)) ([6312fa3](https://github.com/shaka-project/shaka-player/commit/6312fa31b79a9fb284cfaebacf7e70a19755dff4))
* **UI:** Fix disable PiP when using documentPictureInPicture ([#5992](https://github.com/shaka-project/shaka-player/issues/5992)) ([6229284](https://github.com/shaka-project/shaka-player/commit/622928470f5ccf3ada5e61611fd9b54a712585f0))
* **UI:** Fix keyboard navigation of volume bar on Firefox ([#5981](https://github.com/shaka-project/shaka-player/issues/5981)) ([90f1d61](https://github.com/shaka-project/shaka-player/commit/90f1d61fe0a980a2592706162de97556f25f5e17))
* **UI:** Fix replay button when the post-roll is running using CS ([#6072](https://github.com/shaka-project/shaka-player/issues/6072)) ([6b7a02a](https://github.com/shaka-project/shaka-player/commit/6b7a02ae917485b00e5c9bab407df1824d19b1a7))
* **UI:** Fix the scrolling when scrolling from the laterals when seekOnTaps is enabled ([#6050](https://github.com/shaka-project/shaka-player/issues/6050)) ([df05692](https://github.com/shaka-project/shaka-player/commit/df056925ed414e06d6a6512eeeda62e25887fe51))
* **UI:** Update the playbackrate on loaded event ([#6090](https://github.com/shaka-project/shaka-player/issues/6090)) ([9b9ff16](https://github.com/shaka-project/shaka-player/commit/9b9ff16ba73d469b5419b047db18d36c0e28b4e7))
* **VTT:** fix setting textShadow when multiple CSS classes provided ([#6287](https://github.com/shaka-project/shaka-player/issues/6287)) ([d0e64d7](https://github.com/shaka-project/shaka-player/commit/d0e64d7379d44542562ee6fad0619c0ff533813b))
* **WebVTT:** Fix multiline colored VTT subtitles ([#6394](https://github.com/shaka-project/shaka-player/issues/6394)) ([25427c7](https://github.com/shaka-project/shaka-player/commit/25427c764ed597c148263446e5706b45e28e47dd))
* **WebVTT:** Remove rollover logic because we always transmux TS ([#6397](https://github.com/shaka-project/shaka-player/issues/6397)) ([286126e](https://github.com/shaka-project/shaka-player/commit/286126edf1d3ee603f4c2994b7b886e2dcc4ebda))
* When disconnecting from chromecast, subtitles are turned off ([#6103](https://github.com/shaka-project/shaka-player/issues/6103)) ([d4cd66d](https://github.com/shaka-project/shaka-player/commit/d4cd66dd59bb6ff4c763c2cdec604d22e1592c0b))


### Performance Improvements

* **Cast:** memoize/cache canDisplayType results to reduce startup latency ([#6367](https://github.com/shaka-project/shaka-player/issues/6367)) ([30285b2](https://github.com/shaka-project/shaka-player/commit/30285b2439b7702c7e0ace737b6875f6abb13c81))
* **DRM:** pass `preferredKeySystems` to `filterManifest()` ([#6468](https://github.com/shaka-project/shaka-player/issues/6468)) ([c9b61fe](https://github.com/shaka-project/shaka-player/commit/c9b61fe35138a751f66b175b47b90ed4c80f4943))
* **HLS:** do not filter all tags to get the first tag ([#6088](https://github.com/shaka-project/shaka-player/issues/6088)) ([9802f65](https://github.com/shaka-project/shaka-player/commit/9802f65dd9fa8056d969bc228e5cfdeac2458843))
* Improve performance of addThumbnailsTrack ([#6067](https://github.com/shaka-project/shaka-player/issues/6067)) ([3a14047](https://github.com/shaka-project/shaka-player/commit/3a14047a1208a6e03431aa088030dc0cbc96952c))
* **mp4generator:** stop nesting concat in methods ([#6041](https://github.com/shaka-project/shaka-player/issues/6041)) ([f52dd2b](https://github.com/shaka-project/shaka-player/commit/f52dd2b462b1ec88650c093be8bc89cb2bc5e260))
* Optimize init segment reference comparison for common case ([#6014](https://github.com/shaka-project/shaka-player/issues/6014)) ([58d946e](https://github.com/shaka-project/shaka-player/commit/58d946e35aa611cc107b4dc77b4729cc34a5caa2))
* PeriodCombiner improvements ([#6005](https://github.com/shaka-project/shaka-player/issues/6005)) ([4022788](https://github.com/shaka-project/shaka-player/commit/4022788a1822e0df06fb70d03ed2c798c774d746))
* **transmuxer:** Improve performance on video transmuxing ([#6364](https://github.com/shaka-project/shaka-player/issues/6364)) ([d0c3d9a](https://github.com/shaka-project/shaka-player/commit/d0c3d9a05e7b8b76394abce8ab8f3df31d1243d0))
* **transmuxer:** various performance improvements ([#6003](https://github.com/shaka-project/shaka-player/issues/6003)) ([cd326e2](https://github.com/shaka-project/shaka-player/commit/cd326e269148a1c58b1f156bbe3f67ad546f22b2))
* ts parser O(n^2) performance bug. ([#6035](https://github.com/shaka-project/shaka-player/issues/6035)) ([dd50028](https://github.com/shaka-project/shaka-player/commit/dd500285c2bcb605b54f70ed27c3ea8f204c5a6d))
* **WebVTT:** Improve parsing time for unstyled payloads ([#6066](https://github.com/shaka-project/shaka-player/issues/6066)) ([9462e12](https://github.com/shaka-project/shaka-player/commit/9462e1252d49f5badddc7ec74c5950cbd46175e6))


### Reverts

* Add chapter titles and dividers on the seek bar ([#6208](https://github.com/shaka-project/shaka-player/issues/6208)) ([32f8dc5](https://github.com/shaka-project/shaka-player/commit/32f8dc5cf41d5a20858cee1c3c2c6eef29c9b524))
* Fix potential AV sync issues after seek or adaptation ([#6435](https://github.com/shaka-project/shaka-player/issues/6435)) ([73117f0](https://github.com/shaka-project/shaka-player/commit/73117f005cffdc1d2ac85b30d2cda90e751a7ba4)), closes [#5785](https://github.com/shaka-project/shaka-player/issues/5785) [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Install by default shaka.polyfill.PatchedMediaKeysApple when there is no unprefixed EME support ([#6068](https://github.com/shaka-project/shaka-player/issues/6068)) ([3ce4399](https://github.com/shaka-project/shaka-player/commit/3ce439978d18787f7901a54b737b3c93a7164642))

## [4.7.0](https://github.com/shaka-project/shaka-player/compare/v4.6.0...v4.7.0) (2023-12-04)


### Features

* Add config to allow Media Source recoveries ([#5938](https://github.com/shaka-project/shaka-player/issues/5938)) ([0deb25b](https://github.com/shaka-project/shaka-player/commit/0deb25b57f0612a802ad8fbc8e3e379dff54a57c))
* Add config to prefer spatial audio ([#5963](https://github.com/shaka-project/shaka-player/issues/5963)) ([90bc6a7](https://github.com/shaka-project/shaka-player/commit/90bc6a7c783103aaa4fca1a6284be338f9ec7301))
* add preferred video label ([#5948](https://github.com/shaka-project/shaka-player/issues/5948)) ([503327a](https://github.com/shaka-project/shaka-player/commit/503327a0e3570372d85e5cf4af62230ede35b1bf))
* Add support for Common Media Server Data (CMSD) ([#5900](https://github.com/shaka-project/shaka-player/issues/5900)) ([966b910](https://github.com/shaka-project/shaka-player/commit/966b910edcd3fea03e0276bee1f36ad859a453f6))
* Avoid streams which cannot fit into the browser's MediaSource quota ([#5937](https://github.com/shaka-project/shaka-player/issues/5937)) ([c496aaf](https://github.com/shaka-project/shaka-player/commit/c496aafaeb505851b6606f6a9567fcaae1930ac7))
* **DASH:** Add support for location in Content Steering ([#5914](https://github.com/shaka-project/shaka-player/issues/5914)) ([8f453c2](https://github.com/shaka-project/shaka-player/commit/8f453c245fd21c907109f2982c25514869ffb2e3))
* **DASH:** Handle mixed-codec variants. ([#5950](https://github.com/shaka-project/shaka-player/issues/5950)) ([24e3255](https://github.com/shaka-project/shaka-player/commit/24e32559bff6457aa8a1b356f26d83b6a320b9b2)), closes [#5961](https://github.com/shaka-project/shaka-player/issues/5961)
* **Demo:** Add field for chapters URL when adding custom content ([#5934](https://github.com/shaka-project/shaka-player/issues/5934)) ([d1bc83d](https://github.com/shaka-project/shaka-player/commit/d1bc83dd53fb596a8ff22a111c26d2331860e303))
* **Demo:** Add field for text URL when adding custom content ([#5953](https://github.com/shaka-project/shaka-player/issues/5953)) ([5c4a3a2](https://github.com/shaka-project/shaka-player/commit/5c4a3a24558c5b443f78fb4cf234a4f3a60674f1))
* **Demo:** Use MediaSession action handler in the demo ([#5927](https://github.com/shaka-project/shaka-player/issues/5927)) ([078ab36](https://github.com/shaka-project/shaka-player/commit/078ab36201946ce3f854197e7985dbdc56c6e9dc))
* expose CEA708 window position in the cue's region ([#5924](https://github.com/shaka-project/shaka-player/issues/5924)) ([2a524bf](https://github.com/shaka-project/shaka-player/commit/2a524bf51fc613b8ebddb5794524cbb3f6366d4b))
* Fix Media Source recoveries in some cases ([#5966](https://github.com/shaka-project/shaka-player/issues/5966)) ([b2a880b](https://github.com/shaka-project/shaka-player/commit/b2a880b402dd1eeef418383f7bed1a709369d8b4))
* Improve npm package size ([#5955](https://github.com/shaka-project/shaka-player/issues/5955)) ([ca28063](https://github.com/shaka-project/shaka-player/commit/ca28063427167933fc2ef198a5622610332eefbd))
* Set baseDelay to 100 by default for low latency streaming ([#5926](https://github.com/shaka-project/shaka-player/issues/5926)) ([515a4ab](https://github.com/shaka-project/shaka-player/commit/515a4ab02b15b11ee5e6873d6eaa80cfaa472482))
* **UI:** Add double tap to forward/rewind in the video ([#5943](https://github.com/shaka-project/shaka-player/issues/5943)) ([918c30b](https://github.com/shaka-project/shaka-player/commit/918c30b25ae7d193bef82de95d6e0e807426cea9))
* **UI:** Add more keyboard shortcuts ([#5942](https://github.com/shaka-project/shaka-player/issues/5942)) ([2fcc2f8](https://github.com/shaka-project/shaka-player/commit/2fcc2f8f123a5fe4c43bdebdef7c97edd7b83cb1))
* **UI:** Hide language and resolution overflow menu button if there's only one choice ([#5928](https://github.com/shaka-project/shaka-player/issues/5928)) ([628bb63](https://github.com/shaka-project/shaka-player/commit/628bb63c4c082b44f749876cf1cb8b3f06887d0b))


### Bug Fixes

* **CEA:** Fix positioning in CEA-608 ([#5925](https://github.com/shaka-project/shaka-player/issues/5925)) ([83f6f53](https://github.com/shaka-project/shaka-player/commit/83f6f5379bfaffac0166c08c0a5e038b6b5d439f))
* **DASH:** Fix bad url when specify using a full WebVTT with BaseURL ([#5954](https://github.com/shaka-project/shaka-player/issues/5954)) ([ba85ece](https://github.com/shaka-project/shaka-player/commit/ba85ece3ac4dd8d2df788f29b8a0530ba110d234))
* **DASH:** Fix false redirect detection ([#5910](https://github.com/shaka-project/shaka-player/issues/5910)) ([3a68623](https://github.com/shaka-project/shaka-player/commit/3a686239461cd2389ebb11615cd01886421a6fdd))
* **DASH:** SegmentTemplate@media not updated after change in manifest ([#5899](https://github.com/shaka-project/shaka-player/issues/5899)) ([30de177](https://github.com/shaka-project/shaka-player/commit/30de1771cf598068f5e0b446b36f07eb12676f4d))
* **Demo:** Allow configure some missing configs ([#5918](https://github.com/shaka-project/shaka-player/issues/5918)) ([c62e38c](https://github.com/shaka-project/shaka-player/commit/c62e38c6e35bdeb2b5c6ecc68c85e9b28d13e39d))
* **Demo:** Pressing "Edit" button unstores custom asset, but does not update "stored" button ([#5936](https://github.com/shaka-project/shaka-player/issues/5936)) ([82b958f](https://github.com/shaka-project/shaka-player/commit/82b958f3e4e34d2d6952f7f425d9f47a944a1e3b))
* Fix color detection in text utils ([#5970](https://github.com/shaka-project/shaka-player/issues/5970)) ([68903e1](https://github.com/shaka-project/shaka-player/commit/68903e130ec85585211d5b89ee92d6610aa6e4b3))
* Fix ESDS box parser ([#5952](https://github.com/shaka-project/shaka-player/issues/5952)) ([7683892](https://github.com/shaka-project/shaka-player/commit/76838921065d71bf31183f5a4b7ac775f24e800b))
* Fix init segment comparison ([#5920](https://github.com/shaka-project/shaka-player/issues/5920)) ([82ab893](https://github.com/shaka-project/shaka-player/commit/82ab8937e68e2a46002794d86fea1527cbba213e))
* Fix language comparison in addTextTrackAsync ([#5904](https://github.com/shaka-project/shaka-player/issues/5904)) ([f708318](https://github.com/shaka-project/shaka-player/commit/f7083183c30339e7074d7501a94fabb4ea3166df))
* Fix reset Media Source when using mixed codecs in different containers ([#5949](https://github.com/shaka-project/shaka-player/issues/5949)) ([419b1c3](https://github.com/shaka-project/shaka-player/commit/419b1c35d8c72c77fe17cb65d43d8f1c0f24f298))
* Fix trackschanged event not fired after a license request is denied for some tracks ([#5962](https://github.com/shaka-project/shaka-player/issues/5962)) ([4eba182](https://github.com/shaka-project/shaka-player/commit/4eba182826e71040dd2ed55072ecc1a4704ce536))
* Fix transmuxer when sample has no video data ([#5933](https://github.com/shaka-project/shaka-player/issues/5933)) ([6102060](https://github.com/shaka-project/shaka-player/commit/610206002838157658bdadb608588c4430cf075d))
* **HLS:** Fix m4s extension detection ([#5951](https://github.com/shaka-project/shaka-player/issues/5951)) ([d89945f](https://github.com/shaka-project/shaka-player/commit/d89945fc78ed671caabb6d8a5a8134630d5f89b4))
* **HLS:** Provide a fallback to GET request when HEAD request fails ([#5964](https://github.com/shaka-project/shaka-player/issues/5964)) ([fb5a833](https://github.com/shaka-project/shaka-player/commit/fb5a833df86a03d9f282f37fb2a3a61e61fa9c84))
* **HLS:** Recognize CEA subtitles when CLOSED-CAPTIONS attribute is missing ([#5916](https://github.com/shaka-project/shaka-player/issues/5916)) ([58d4597](https://github.com/shaka-project/shaka-player/commit/58d45976d83d5a2b63bf1c1a2defa018fc5c5d8c))
* Only append to the buffer init segments when the segment is independent ([#5921](https://github.com/shaka-project/shaka-player/issues/5921)) ([09f2a2e](https://github.com/shaka-project/shaka-player/commit/09f2a2e887459a534d13a7b0a9c3d65c77c4a403))
* Properly size region anchor from LINE units ([#5941](https://github.com/shaka-project/shaka-player/issues/5941)) ([8b6602e](https://github.com/shaka-project/shaka-player/commit/8b6602ec7c82717a56b672e5c2697856eab44ad2))
* **UI:** Correctly display video time and duration for VOD ([#5929](https://github.com/shaka-project/shaka-player/issues/5929)) ([00ff864](https://github.com/shaka-project/shaka-player/commit/00ff864c2c948de611ab8959e35194e5d356a751))
* Unmask errors on LL ([#5908](https://github.com/shaka-project/shaka-player/issues/5908)) ([c898364](https://github.com/shaka-project/shaka-player/commit/c8983646c1d3d1721ed86a5d8376dea84835ad63))
* **WebVTT:** Fix support for line vertical alignment ([#5945](https://github.com/shaka-project/shaka-player/issues/5945)) ([9f5e461](https://github.com/shaka-project/shaka-player/commit/9f5e46190ca00b1df36d5210852962bb52aac0c4))

## [4.6.0](https://github.com/shaka-project/shaka-player/compare/v4.5.0...v4.6.0) (2023-11-16)


### Features

* Add a stub text display class ([#5804](https://github.com/shaka-project/shaka-player/issues/5804)) ([#5806](https://github.com/shaka-project/shaka-player/issues/5806)) ([700d181](https://github.com/shaka-project/shaka-player/commit/700d181a576982617b211c948d990099306e1df5))
* Add config to ignore duplicate init data ([#5853](https://github.com/shaka-project/shaka-player/issues/5853)) ([acf23f8](https://github.com/shaka-project/shaka-player/commit/acf23f86af9691932f56e126bc9bf9d25ac19ec3))
* Add partial info to shaka.media.SegmentReference ([#5822](https://github.com/shaka-project/shaka-player/issues/5822)) ([766b0a1](https://github.com/shaka-project/shaka-player/commit/766b0a139e869a01a0170260e3f87a1378ca4860))
* Add support for WPE based browsers in RDK set-top boxes ([#5852](https://github.com/shaka-project/shaka-player/issues/5852)) ([2eedb12](https://github.com/shaka-project/shaka-player/commit/2eedb12a1e76044a410e5fd97ff5bda0a5c07db0))
* Add thumbnails support in src= ([#5802](https://github.com/shaka-project/shaka-player/issues/5802)) ([88e4cd4](https://github.com/shaka-project/shaka-player/commit/88e4cd41164c75dce44745c2fe89615b5d8c50a8))
* Add video progress events ([#5850](https://github.com/shaka-project/shaka-player/issues/5850)) ([c3beee6](https://github.com/shaka-project/shaka-player/commit/c3beee6f2a5dd929da2549ebeef1ee5018beafad))
* Allow prefetch init segments ([#5825](https://github.com/shaka-project/shaka-player/issues/5825)) ([3f392c0](https://github.com/shaka-project/shaka-player/commit/3f392c00dce6c8dcd57432c16aa683936bcf16df))
* **DASH:** Add initial support for "urn:mpeg:dash:ssr:2023" ([#5762](https://github.com/shaka-project/shaka-player/issues/5762)) ([508e5cf](https://github.com/shaka-project/shaka-player/commit/508e5cfbbaa36112d1f57841d83b232d2367e5dc))
* **DASH:** Add support for Content Steering ([#5710](https://github.com/shaka-project/shaka-player/issues/5710)) ([42f491f](https://github.com/shaka-project/shaka-player/commit/42f491f782f5c2c011fd8cd5b468d627529914f2))
* **DASH:** Add support for Content Steering in AdaptationSet BaseURL ([#5884](https://github.com/shaka-project/shaka-player/issues/5884)) ([1c6f1fa](https://github.com/shaka-project/shaka-player/commit/1c6f1fa7b32d32ab71e2420ec0f57b69cdbfb82a))
* **DASH:** Add support for minimum values in service descriptions ([#5844](https://github.com/shaka-project/shaka-player/issues/5844)) ([5f94a62](https://github.com/shaka-project/shaka-player/commit/5f94a6253ba3a598fdc086a11cedd1f061c7c291))
* **Demo:** Add CBCS content to demo ([#5862](https://github.com/shaka-project/shaka-player/issues/5862)) ([9777c52](https://github.com/shaka-project/shaka-player/commit/9777c524b6d7ea8a3cf8779affb01b887b048d09))
* **Demo:** Add Content Steering assets ([#5888](https://github.com/shaka-project/shaka-player/issues/5888)) ([8e0ee8a](https://github.com/shaka-project/shaka-player/commit/8e0ee8a8a783d1b881928d96f0cb8ab96f6d2621))
* **demo:** Add icon for new demo asset ([#5866](https://github.com/shaka-project/shaka-player/issues/5866)) ([f7448b7](https://github.com/shaka-project/shaka-player/commit/f7448b7bdb19f575c92854af3f90686890ee2761))
* **Demo:** Add new 3D movie stream from Apple ([#5872](https://github.com/shaka-project/shaka-player/issues/5872)) ([a5adf31](https://github.com/shaka-project/shaka-player/commit/a5adf3176fa1b74b2d3ccda10e9144ebd6bb627c))
* **HLS:** Add new config for allow LL-HLS byterange optimization ([#5877](https://github.com/shaka-project/shaka-player/issues/5877)) ([3e91e8e](https://github.com/shaka-project/shaka-player/commit/3e91e8eb0c584b3817421a8846bceba149ffd0dd))
* **HLS:** Add new config to get codecs from media segment for playlists without CODECS attribute ([#5772](https://github.com/shaka-project/shaka-player/issues/5772)) ([80630bb](https://github.com/shaka-project/shaka-player/commit/80630bb49581b056fb84afded0ac90a53fe54c36)), closes [#5769](https://github.com/shaka-project/shaka-player/issues/5769)
* **HLS:** Add support for Content Steering ([#5881](https://github.com/shaka-project/shaka-player/issues/5881)) ([b75ca1d](https://github.com/shaka-project/shaka-player/commit/b75ca1df63181976e1a39977360d25fc9a2e43e9))
* **HLS:** Add support for mjpg I-Frames playlist ([#5856](https://github.com/shaka-project/shaka-player/issues/5856)) ([801131f](https://github.com/shaka-project/shaka-player/commit/801131f84cf0cfadf79c4d069f82e1ff4c463a00))
* **HLS:** Add support for QUERYPARAM variable type in #EXT-X-DEFINE ([#5801](https://github.com/shaka-project/shaka-player/issues/5801)) ([fda3189](https://github.com/shaka-project/shaka-player/commit/fda3189fd2fb8a89946cdb2d8fd0c57bcbed3ab6))
* **HLS:** Add support for REQ-VIDEO-LAYOUT ([#5809](https://github.com/shaka-project/shaka-player/issues/5809)) ([81fc82b](https://github.com/shaka-project/shaka-player/commit/81fc82b6b24c2f17e60e6bfe89ee6870972efd72))
* **HLS:** Build closed captions metadata for media playlist on-the-fly. ([#5811](https://github.com/shaka-project/shaka-player/issues/5811)) ([754bfac](https://github.com/shaka-project/shaka-player/commit/754bfacf077226173eb46c3938696110bcbbfc55))
* **HLS:** Improve the stream info when EXT-X-MEDIA has not uri ([#5886](https://github.com/shaka-project/shaka-player/issues/5886)) ([b5b6a0f](https://github.com/shaka-project/shaka-player/commit/b5b6a0fd8455efbc635f75dd8c477c6c59474ee3))
* **ID3:** decode APIC frames ([#5857](https://github.com/shaka-project/shaka-player/issues/5857)) ([6a862d2](https://github.com/shaka-project/shaka-player/commit/6a862d265ac3b8e713e8f86bee3c641a1f0f38e5))
* Improve latency in LL DASH streams ([#5820](https://github.com/shaka-project/shaka-player/issues/5820)) ([20b4abf](https://github.com/shaka-project/shaka-player/commit/20b4abf81674e17fe5557d2cce58611faff7094c))
* **net:** Add shaka.net.NetworkingUtils ([#5756](https://github.com/shaka-project/shaka-player/issues/5756)) ([be96fd0](https://github.com/shaka-project/shaka-player/commit/be96fd0a2b0092efaecd1a09699ce78785266f52))
* Stop setting playbackRate to 0 to control buffering state ([#5696](https://github.com/shaka-project/shaka-player/issues/5696)) ([6156dce](https://github.com/shaka-project/shaka-player/commit/6156dced6bddc5e2cd0cc52071295cff63cadfcd))
* **thumbnails:** Add Player.getAllThumbnails ([#5783](https://github.com/shaka-project/shaka-player/issues/5783)) ([9f7576b](https://github.com/shaka-project/shaka-player/commit/9f7576be32c1c5292620ca1dc36325adde493626)), closes [#5781](https://github.com/shaka-project/shaka-player/issues/5781)
* **UI:** Add chapter titles and dividers on the seek bar ([#5863](https://github.com/shaka-project/shaka-player/issues/5863)) ([c1198df](https://github.com/shaka-project/shaka-player/commit/c1198df82f44f2fa402a5ff8d933219820ac9e8e))
* **UI:** Bucketize resolution names in the UI ([#5816](https://github.com/shaka-project/shaka-player/issues/5816)) ([b56b9df](https://github.com/shaka-project/shaka-player/commit/b56b9df602dfaff5012f95acfeea329f86dde618))
* **UI:** Display frame rates in the quality selector ([#5753](https://github.com/shaka-project/shaka-player/issues/5753)) ([3096378](https://github.com/shaka-project/shaka-player/commit/30963788be1d1840f9d8671cf8e91cbeaa721f10))
* **UI:** Show the channel count in the audio selector ([#5868](https://github.com/shaka-project/shaka-player/issues/5868)) ([1681acd](https://github.com/shaka-project/shaka-player/commit/1681acdd2439a542a976abc1aa252e377e4411d6))
* Use ManagedMediaSource when available ([#5683](https://github.com/shaka-project/shaka-player/issues/5683)) ([01da5fa](https://github.com/shaka-project/shaka-player/commit/01da5fa8a4b32c14582bd3cb865b5d5eca591d7f))


### Bug Fixes

* **ABR:** Fix HLS playback after internet connection is restored ([#5879](https://github.com/shaka-project/shaka-player/issues/5879)) ([f5777e5](https://github.com/shaka-project/shaka-player/commit/f5777e5625994a6c5483a33f68d5af9dec1e1335))
* AD_STARTED fires before ad started with AWS Media Tailor ([#5855](https://github.com/shaka-project/shaka-player/issues/5855)) ([b39f334](https://github.com/shaka-project/shaka-player/commit/b39f33466ebdeb8aba2df2edd1cf16bbccbd46dd))
* Add Orange platform to requiresEncryptionInfoInAllInitSegments ([#5895](https://github.com/shaka-project/shaka-player/issues/5895)) ([9d23a87](https://github.com/shaka-project/shaka-player/commit/9d23a87f859f1bed1a2e10c2f32f18de8ce0a579))
* Allow get seekRange on manifestparsed event in some cases ([#5892](https://github.com/shaka-project/shaka-player/issues/5892)) ([606d693](https://github.com/shaka-project/shaka-player/commit/606d693900a653fcc84dac64abeb7dda974101ca))
* Allow parseXmlString when createNodeIterator is not available ([#5805](https://github.com/shaka-project/shaka-player/issues/5805)) ([ea7764d](https://github.com/shaka-project/shaka-player/commit/ea7764d0a772bca59ad78f1e3bbc9a7e2734f456))
* ban new Uint16Array(buffer) ([#5838](https://github.com/shaka-project/shaka-player/issues/5838)) ([155befb](https://github.com/shaka-project/shaka-player/commit/155befb0a0e240adc331fe4b8b1967e344e5b0df))
* CEA decoder should return early if packet is not large enough ([#5893](https://github.com/shaka-project/shaka-player/issues/5893)) ([9a694b5](https://github.com/shaka-project/shaka-player/commit/9a694b59f824f7d3bf9d7ca64364abf6e60b0de4))
* **DASH:** Fix bad url when specify MPD BaseURL and AdaptationSet BaseURL ([#5883](https://github.com/shaka-project/shaka-player/issues/5883)) ([5f891d9](https://github.com/shaka-project/shaka-player/commit/5f891d98d65805f40c9ecab7fcc60a5b1cd00c3b))
* **DASH:** Fix manifest update time for Live manifests ([#5763](https://github.com/shaka-project/shaka-player/issues/5763)) ([65449d1](https://github.com/shaka-project/shaka-player/commit/65449d1a1c43c2f0741a3e8eed620fb5a374da84))
* **DASH:** Fix manifest update time for LL-DASH ([#5736](https://github.com/shaka-project/shaka-player/issues/5736)) ([8b7141f](https://github.com/shaka-project/shaka-player/commit/8b7141f92342044c8515679f6532efe635e205dc))
* **dash:** fix race condition in segment template ([#5842](https://github.com/shaka-project/shaka-player/issues/5842)) ([8d2b657](https://github.com/shaka-project/shaka-player/commit/8d2b6574de6d0510ae752637c3507df93fbf3591))
* **DASH:** Handle minimumUpdatePeriod=0 with urn:mpeg:dash:event:2012 (EMSG) ([#5823](https://github.com/shaka-project/shaka-player/issues/5823)) ([f8438df](https://github.com/shaka-project/shaka-player/commit/f8438df7b0f2834e77685eadc6d206f251730510))
* **DASH:** Segments being fetched out of the range of the timeline ([#5889](https://github.com/shaka-project/shaka-player/issues/5889)) ([d8aa24f](https://github.com/shaka-project/shaka-player/commit/d8aa24f41d79c9efb58014c3069c5183738f26d4))
* Dispatch streamDataCallback correctly in SegmentPrefetchOperation ([#5764](https://github.com/shaka-project/shaka-player/issues/5764)) ([bab8153](https://github.com/shaka-project/shaka-player/commit/bab81537626a0662ee291e4f5bccf488fd2c1870))
* Fix bug with live start time ([#5835](https://github.com/shaka-project/shaka-player/issues/5835)) ([577d141](https://github.com/shaka-project/shaka-player/commit/577d141f42b316a6a3708e9455453b49a6386be7))
* Fix chooseCodecsAndFilterManifest for similar frameRate ([#5817](https://github.com/shaka-project/shaka-player/issues/5817)) ([8ff204d](https://github.com/shaka-project/shaka-player/commit/8ff204d49dbf5f99189cb92f4a8d3ae4dd5494d4))
* Fix chooseCodecsAndFilterManifest for some HLS manifest ([#5800](https://github.com/shaka-project/shaka-player/issues/5800)) ([51870e9](https://github.com/shaka-project/shaka-player/commit/51870e9d7cced20ee98783184b69584bea90446e))
* Fix converts legacy avc1 codec strings on transmuxer ([#5790](https://github.com/shaka-project/shaka-player/issues/5790)) ([8944ca9](https://github.com/shaka-project/shaka-player/commit/8944ca9b0ff7731889c35dbd62d6a57bd9f2060c))
* Fix crash while playing HLS AES 128 streams ([#5830](https://github.com/shaka-project/shaka-player/issues/5830)) ([64b12c1](https://github.com/shaka-project/shaka-player/commit/64b12c15792be2aa8e7f79b57f4231dfcb549fbd))
* Fix DRM workaround for Tizen and Xbox with ac-4 boxes ([#5812](https://github.com/shaka-project/shaka-player/issues/5812)) ([72a5de3](https://github.com/shaka-project/shaka-player/commit/72a5de337357fa9808509efc0e63a6b1ba4f4077))
* Fix incompatible codec is selected in Windows Edge for Widevine ([#5831](https://github.com/shaka-project/shaka-player/issues/5831)) ([5aa3597](https://github.com/shaka-project/shaka-player/commit/5aa359707469cca3cac3efdc7e7efcff1a180216))
* Fix mangled property in compiled mode in Content Steering ([#5887](https://github.com/shaka-project/shaka-player/issues/5887)) ([0e62b8e](https://github.com/shaka-project/shaka-player/commit/0e62b8e00713a0b56a5d81b9758b3b4e1d98dfcf))
* Fix missing audio streams ([#5869](https://github.com/shaka-project/shaka-player/issues/5869)) ([d6aab6b](https://github.com/shaka-project/shaka-player/commit/d6aab6befaf72eb87e431f5b27cb6c6bc368b56d))
* Fix nalu parsing and improve performance in the transmuxer ([#5846](https://github.com/shaka-project/shaka-player/issues/5846)) ([ae423b4](https://github.com/shaka-project/shaka-player/commit/ae423b4239141a62cf9d8acea622398048a60936))
* Fix selectAudioLanguage using channelsCount param ([#5875](https://github.com/shaka-project/shaka-player/issues/5875)) ([c830a99](https://github.com/shaka-project/shaka-player/commit/c830a99041e2d8d2f105ab569485c959fc8c5530))
* Fix variant filtering by preferredAudioChannelCount ([#5859](https://github.com/shaka-project/shaka-player/issues/5859)) ([51edeae](https://github.com/shaka-project/shaka-player/commit/51edeaefa02a0d01706bf2d18d601ad8d2763202))
* For text content is not necessary codec switching ([#5731](https://github.com/shaka-project/shaka-player/issues/5731)) ([bdbaae5](https://github.com/shaka-project/shaka-player/commit/bdbaae5182c1f4f650822edb2a95246a918ad5df))
* **hisense:** set stallSkip to 0 for HiSense devices ([#5833](https://github.com/shaka-project/shaka-player/issues/5833)) ([c457db8](https://github.com/shaka-project/shaka-player/commit/c457db835fee8292b840dc27451424706f238d78))
* **HLS:** Fix accessibilityPurpose detection ([#5840](https://github.com/shaka-project/shaka-player/issues/5840)) ([ceaa9fa](https://github.com/shaka-project/shaka-player/commit/ceaa9faba92465bf58cd9ea78ddac77158eabac1))
* **HLS:** Fix bad detection in some MediaPlaylist ([#5878](https://github.com/shaka-project/shaka-player/issues/5878)) ([5e797bd](https://github.com/shaka-project/shaka-player/commit/5e797bd734ca95be0cf68f59022645fad8dc9077))
* **HLS:** Fix decryption of AES-128 ([#5871](https://github.com/shaka-project/shaka-player/issues/5871)) ([da38b36](https://github.com/shaka-project/shaka-player/commit/da38b362e8146521e509599f4f2cbdef41a077d8))
* **HLS:** Fix init segment when EXT-X-MAP is preceded by EXT-X-BYTERANGE ([#5732](https://github.com/shaka-project/shaka-player/issues/5732)) ([24e5de3](https://github.com/shaka-project/shaka-player/commit/24e5de34ba2bd8a1e03204a1e8b96436c6aed296))
* **HLS:** Fix kind detection for 'captions' text tracks ([#5819](https://github.com/shaka-project/shaka-player/issues/5819)) ([8e442b3](https://github.com/shaka-project/shaka-player/commit/8e442b3884cb308df69e5327d06c773c2baeff04))
* **HLS:** Fix LL-HLS with byterange optimization using segments mode ([#5876](https://github.com/shaka-project/shaka-player/issues/5876)) ([c79e5a5](https://github.com/shaka-project/shaka-player/commit/c79e5a505878084c8691d28eae0813bb1755c927))
* **HLS:** Fix url management in HLS ([#5722](https://github.com/shaka-project/shaka-player/issues/5722)) ([8deab71](https://github.com/shaka-project/shaka-player/commit/8deab717f358502b9c79a0fbd504531cc3173ddd))
* **Offline:** Fix download of some HLS manifests ([#5861](https://github.com/shaka-project/shaka-player/issues/5861)) ([c2c8320](https://github.com/shaka-project/shaka-player/commit/c2c8320251526a0e755debf5448913a2fa896371))
* **offline:** Fix server certificate error when trying to store content ([#5848](https://github.com/shaka-project/shaka-player/issues/5848)) ([f4a35f2](https://github.com/shaka-project/shaka-player/commit/f4a35f2c3fa55449c6a12dd45f207893bc9eabca))
* **TTML:** Fix support of urls in smpte:backgroundImage ([#5851](https://github.com/shaka-project/shaka-player/issues/5851)) ([fa93d53](https://github.com/shaka-project/shaka-player/commit/fa93d5353acf785e450c8e7e664f7012e0d99bdc))
* **UI:** Console error on remote.cancelwatchavailability() method in remote playback feature ([#5793](https://github.com/shaka-project/shaka-player/issues/5793)) ([b66a8e8](https://github.com/shaka-project/shaka-player/commit/b66a8e871b3d541890f1fe431eb1c4c294c26a6e))
* **UI:** Fix text selector when the trackLabelFormat is set to LABEL ([#5751](https://github.com/shaka-project/shaka-player/issues/5751)) ([bba0651](https://github.com/shaka-project/shaka-player/commit/bba0651e23bdebc5ba12dc17f7d6d2a33c0bb51a))
* UITextDisplayer font-family is overridden by UI's Roboto font ([#5829](https://github.com/shaka-project/shaka-player/issues/5829)) ([cb8a5ed](https://github.com/shaka-project/shaka-player/commit/cb8a5edd7071a504d2d0f654944d86436d2632a8))
* **WebVTT:** Fix wrong writing-mode in nested cues ([#5807](https://github.com/shaka-project/shaka-player/issues/5807)) ([ea7d83e](https://github.com/shaka-project/shaka-player/commit/ea7d83ed8760d98119e771ea0b48baa1ba4eb4ea))


### Performance Improvements

* **dash:** improve readability and reduce number of loops in dash parser ([#5768](https://github.com/shaka-project/shaka-player/issues/5768)) ([17a4363](https://github.com/shaka-project/shaka-player/commit/17a4363e331fab3c4674504e54100b354fa0f0b8))
* **DASH:** PeriodCombiner optimisations ([#5837](https://github.com/shaka-project/shaka-player/issues/5837)) ([ade93b0](https://github.com/shaka-project/shaka-player/commit/ade93b0d004b379841dfaf0bcf7e2f04b8f14345))
* **DASH:** reduce looping and remove chaining awaits in period ([#5774](https://github.com/shaka-project/shaka-player/issues/5774)) ([be755e8](https://github.com/shaka-project/shaka-player/commit/be755e899536e169a8ef524e52f384e7a6abd001))
* **HLS:** Improve detection of all partial segments ([#5761](https://github.com/shaka-project/shaka-player/issues/5761)) ([2a35579](https://github.com/shaka-project/shaka-player/commit/2a3557915f05f72cb44406eb1497a386c8fecbab))
* Improve transmuxer performance ([#5789](https://github.com/shaka-project/shaka-player/issues/5789)) ([aa41e87](https://github.com/shaka-project/shaka-player/commit/aa41e8733f04948d6370dc066a96a2d7e394bc59))
* **manifest:** avoid unnecessary looping in uri resolver ([#5773](https://github.com/shaka-project/shaka-player/issues/5773)) ([4d5caee](https://github.com/shaka-project/shaka-player/commit/4d5caee6615c04acf591d0bd04ae6ca4a1ffbdb0))
* simplify and improve performance of parsing initData when deduping ([#5775](https://github.com/shaka-project/shaka-player/issues/5775)) ([041a08f](https://github.com/shaka-project/shaka-player/commit/041a08f88d2855e9457e7853014ee10b23a7612b))
* **utils:** use WeakSet to track object references ([#5791](https://github.com/shaka-project/shaka-player/issues/5791)) ([daa9d1f](https://github.com/shaka-project/shaka-player/commit/daa9d1f206652b775c406ecb4887e0f2bc7c533f))
* **Xbox:** drop incompatible variants for XBOX early ([#5777](https://github.com/shaka-project/shaka-player/issues/5777)) ([170a40c](https://github.com/shaka-project/shaka-player/commit/170a40c3083a8e4a0c6fabcf96439c2008ffcb63))

## [4.5.0](https://github.com/shaka-project/shaka-player/compare/v4.4.0...v4.5.0) (2023-10-04)


### Features

* **ABR:** Allow some downscale when use restrictToElementSize or restrictToScreenSize ([#5631](https://github.com/shaka-project/shaka-player/issues/5631)) ([cad1ac8](https://github.com/shaka-project/shaka-player/commit/cad1ac82837123282248a0766147390d5c21bcb9))
* Add getBandwidthEstimate to the player interface for custom manifest parser ([#5714](https://github.com/shaka-project/shaka-player/issues/5714)) ([1271a18](https://github.com/shaka-project/shaka-player/commit/1271a18fec65551508a734615c9c1619ebd87e04))
* Add H.265 TS transmuxer ([#5611](https://github.com/shaka-project/shaka-player/issues/5611)) ([3c2c095](https://github.com/shaka-project/shaka-player/commit/3c2c0955cbd230f2360e2fb9d82e59cb19dab591))
* Add KeyStatusChanged and UpdateState events ([#5695](https://github.com/shaka-project/shaka-player/issues/5695)) ([2f97fa7](https://github.com/shaka-project/shaka-player/commit/2f97fa7ee3497261af038046f1de14095c6d4481))
* Add manifestupdated event ([#5602](https://github.com/shaka-project/shaka-player/issues/5602)) ([b16d2f0](https://github.com/shaka-project/shaka-player/commit/b16d2f0bf3691ef7cc2de4eea095df21814a2027))
* Add TS transmuxer for muxed content ([#5571](https://github.com/shaka-project/shaka-player/issues/5571)) ([7df3321](https://github.com/shaka-project/shaka-player/commit/7df33212726d0040ba5d5a4cc0c049f174a06c83))
* **Ads:** Add support for AWS Elemental MediaTailor ([#5679](https://github.com/shaka-project/shaka-player/issues/5679)) ([cf5a72b](https://github.com/shaka-project/shaka-player/commit/cf5a72bb513ff74e5b0f8ca7fd334313cd78370d))
* **CEA:** Parse CEA from TS with H.265 ([#5610](https://github.com/shaka-project/shaka-player/issues/5610)) ([54eaf63](https://github.com/shaka-project/shaka-player/commit/54eaf6371aeb2fb8b860d52b75a0c27555aaaaca))
* **DASH:** Add new config to prevent mixing of audio representations from different adaptation sets ([#5620](https://github.com/shaka-project/shaka-player/issues/5620)) ([0bbb470](https://github.com/shaka-project/shaka-player/commit/0bbb47025e347d321a9d764666a355b2d2a485a5))
* **DASH:** Add support for AES-128 ([#5656](https://github.com/shaka-project/shaka-player/issues/5656)) ([96ae7f2](https://github.com/shaka-project/shaka-player/commit/96ae7f2fe614402d1ee410591eb86a2868796c38))
* **DASH:** Allow the playback of DASH with $time$ and large timescale value ([#5621](https://github.com/shaka-project/shaka-player/issues/5621)) ([4a1c96e](https://github.com/shaka-project/shaka-player/commit/4a1c96e630de1ee259ed3a5ee582dddd0f844e04))
* **demo:** Added icons for new demo assets ([#5691](https://github.com/shaka-project/shaka-player/issues/5691)) ([12400b1](https://github.com/shaka-project/shaka-player/commit/12400b160b51c7ea87ecb9e8bb77ae481bb707d7))
* Enable codec switching ([#5470](https://github.com/shaka-project/shaka-player/issues/5470)) ([0078137](https://github.com/shaka-project/shaka-player/commit/0078137d1bd6bd471b5e1405e27d7fc76b5668ac))
* **HLS:** Get the correct video info for TS segments with H.265 ([#5616](https://github.com/shaka-project/shaka-player/issues/5616)) ([e191c75](https://github.com/shaka-project/shaka-player/commit/e191c755167abd8658e9e3aae35cd99d07d15ee6))
* **HLS:** Take into account the parsing time for manifest schedule update ([#5678](https://github.com/shaka-project/shaka-player/issues/5678)) ([f7e33a3](https://github.com/shaka-project/shaka-player/commit/f7e33a3ba529e13052bfaa8762b78379bb8c8e03))
* Migration of LCEVC DIL (Decoder Integration Layer) to LCEVC Dec (Decoder) ([#5459](https://github.com/shaka-project/shaka-player/issues/5459)) ([c1e18d3](https://github.com/shaka-project/shaka-player/commit/c1e18d358361392332372760b90c724047cf1310))
* **TTML:** Add support to tts:ruby ([#5645](https://github.com/shaka-project/shaka-player/issues/5645)) ([9fd220e](https://github.com/shaka-project/shaka-player/commit/9fd220e73f7ef0e9b5774717347b2d3fa7590e99))
* **TTML:** Add support to tts:textCombine ([#5644](https://github.com/shaka-project/shaka-player/issues/5644)) ([73a3bd9](https://github.com/shaka-project/shaka-player/commit/73a3bd931ebc7c9690f3d0aefb0639f2230fa594))
* **UI:** Add config to preferDocumentPictureInPicture ([#5690](https://github.com/shaka-project/shaka-player/issues/5690)) ([025502a](https://github.com/shaka-project/shaka-player/commit/025502a70c885216b9bbc063025ae80a72780fe6))
* **UI:** Add PiP function to controls ([#5629](https://github.com/shaka-project/shaka-player/issues/5629)) ([b422847](https://github.com/shaka-project/shaka-player/commit/b4228479dae3469e5a3a1e8190bef9c4e3e1a843))
* **UI:** Add remote button with RemotePlayback API ([#5650](https://github.com/shaka-project/shaka-player/issues/5650)) ([1ef5ae0](https://github.com/shaka-project/shaka-player/commit/1ef5ae0615a14baa26ff9ffa9fa5e083bfa19c7e))
* **WebVTT:** Add support to ruby, rt, rp html tags ([#5642](https://github.com/shaka-project/shaka-player/issues/5642)) ([76ffd38](https://github.com/shaka-project/shaka-player/commit/76ffd38c1d78042acac220df202a9abdd77489e9))
* **WebVTT:** Add support to text-combine-upright ([#5633](https://github.com/shaka-project/shaka-player/issues/5633)) ([a2f253f](https://github.com/shaka-project/shaka-player/commit/a2f253f8d619d2959c0195a8e1260657b5d34a3a))


### Bug Fixes

* Allow PID change in TsParser ([#5681](https://github.com/shaka-project/shaka-player/issues/5681)) ([d9b49d9](https://github.com/shaka-project/shaka-player/commit/d9b49d992f533bf7664932d547253b860064ea03))
* **CMCD:** Fix CMCD for some mimetypes in src= ([#5699](https://github.com/shaka-project/shaka-player/issues/5699)) ([e2c32c5](https://github.com/shaka-project/shaka-player/commit/e2c32c52f0ae347083bcc6b4b7dceca903b5546b))
* com.apple.fps should work with the default initDataTransform when using legacy Apple Media Keys ([#5603](https://github.com/shaka-project/shaka-player/issues/5603)) ([76fdda6](https://github.com/shaka-project/shaka-player/commit/76fdda65231905c945db6a5eedeece65f8d7711e))
* Compute correctly the positionAlign in UITextDisplayer ([#5630](https://github.com/shaka-project/shaka-player/issues/5630)) ([3a2dbc3](https://github.com/shaka-project/shaka-player/commit/3a2dbc3deaf1e1ee5384eed41c6c9e79817a8a09))
* **DASH:** Fix bigint implementation ([#5707](https://github.com/shaka-project/shaka-player/issues/5707)) ([45009d2](https://github.com/shaka-project/shaka-player/commit/45009d2c0cbbb203ecb864bc4b742ed4ad9a0d9a))
* **DASH:** Fix race condition error while switching audio tracks ([#5619](https://github.com/shaka-project/shaka-player/issues/5619)) ([29d9a10](https://github.com/shaka-project/shaka-player/commit/29d9a107054fff16ec2abe2cbdbb8fa0c0cfd882))
* **Demo:** Allow com.apple.fps.1_0 in the custom DRM System field ([#5600](https://github.com/shaka-project/shaka-player/issues/5600)) ([ab86000](https://github.com/shaka-project/shaka-player/commit/ab86000dc75a352505875fe6dbc37fe0bdd2857a))
* **Demo:** Fix url of "Low Latency HLS Live" asset ([#5708](https://github.com/shaka-project/shaka-player/issues/5708)) ([146d3ec](https://github.com/shaka-project/shaka-player/commit/146d3ecd280b8b985e1fae6fc9262fa04dcf6126))
* Fix compiled-mode error formatting ([#5623](https://github.com/shaka-project/shaka-player/issues/5623)) ([a19912e](https://github.com/shaka-project/shaka-player/commit/a19912e5bf9ec5425a366b07745d5bac631a9dd2))
* Fix creation of new Stream object for each manifest request in DASH Live when using CEA ([#5674](https://github.com/shaka-project/shaka-player/issues/5674)) ([0a8b519](https://github.com/shaka-project/shaka-player/commit/0a8b5193f2de0b83ddd24aacda09523926b1cdb9))
* Fix MediaSourceEngine reset operation ([#5576](https://github.com/shaka-project/shaka-player/issues/5576)) ([9f5e91f](https://github.com/shaka-project/shaka-player/commit/9f5e91f4a37a8e504adcf1dd756fac9c777c2051))
* Fix Mp4Generator ([#5566](https://github.com/shaka-project/shaka-player/issues/5566)) ([effafbc](https://github.com/shaka-project/shaka-player/commit/effafbc849cc83c732fe113f5da479513b884f9f))
* Fix NALU parsing in some HLS muxed live streams ([#5688](https://github.com/shaka-project/shaka-player/issues/5688)) ([756a576](https://github.com/shaka-project/shaka-player/commit/756a57658608b3d8e674ae810afc692a25dc85cf))
* Fix PES parsing ([#5559](https://github.com/shaka-project/shaka-player/issues/5559)) ([5c6ab9e](https://github.com/shaka-project/shaka-player/commit/5c6ab9e0c8ba1236710209b36ea08d7a44fb1bf3))
* fix preferred track selection on Safari ([#5601](https://github.com/shaka-project/shaka-player/issues/5601)) ([d021d6f](https://github.com/shaka-project/shaka-player/commit/d021d6f932b3a64d826b919b5a7b252599e2ecd5))
* Fix some properties on the shaka.text.Cue that are mangled ([#5673](https://github.com/shaka-project/shaka-player/issues/5673)) ([d2b7cb2](https://github.com/shaka-project/shaka-player/commit/d2b7cb28212d5fc82b70169c77826333e0fc081f))
* Fix transmuxed audio timestamps ([#5595](https://github.com/shaka-project/shaka-player/issues/5595)) ([0260aef](https://github.com/shaka-project/shaka-player/commit/0260aefcdbdda2184ea32d3d8678a04491cc6fd3))
* Fix transmuxing of muxed content ([#5686](https://github.com/shaka-project/shaka-player/issues/5686)) ([f20d50a](https://github.com/shaka-project/shaka-player/commit/f20d50a37b8629d5429b22e2fa0ced4729335af3))
* Fix TS transmuxer when the main content is muxed ([#5575](https://github.com/shaka-project/shaka-player/issues/5575)) ([65b3037](https://github.com/shaka-project/shaka-player/commit/65b3037181b30274b1cedf52283f5726cf7df0b9))
* Fix unreleased stack overflow on statechanged ([#5712](https://github.com/shaka-project/shaka-player/issues/5712)) ([ebacf32](https://github.com/shaka-project/shaka-player/commit/ebacf32127dfc7b8b5227d66f7d53d3eee54fdd3))
* **HLS:** Allow audio groups on audio-only content ([#5578](https://github.com/shaka-project/shaka-player/issues/5578)) ([3cbc444](https://github.com/shaka-project/shaka-player/commit/3cbc444c95ab2e8c124d2caaaac6ce7bc5fdf02f))
* **HLS:** Fix audio and video out of sync ([#5658](https://github.com/shaka-project/shaka-player/issues/5658)) ([4cc4143](https://github.com/shaka-project/shaka-player/commit/4cc4143d5f3d78fc5839d6e61d7464ac62479253))
* **HLS:** Fix display CEA-708 in HLS ([#5694](https://github.com/shaka-project/shaka-player/issues/5694)) ([2097193](https://github.com/shaka-project/shaka-player/commit/2097193c1d16b2fc7478959257e45dd0d8233ffa))
* **HLS:** Fix presentation delay for small live playlists (eg: 3-4 segments) ([#5687](https://github.com/shaka-project/shaka-player/issues/5687)) ([caef5a4](https://github.com/shaka-project/shaka-player/commit/caef5a41edb3b7ac09d58249990bc2fa14ac5adb))
* **HLS:** Get the correct video codec for TS segments ([#5598](https://github.com/shaka-project/shaka-player/issues/5598)) ([1135115](https://github.com/shaka-project/shaka-player/commit/11351150694814813cb1cfeab4dc78fdefcce6fa))
* **HLS:** Show WebVTT subtitles with X-TIMESTAMP-MAP in segments mode ([#5643](https://github.com/shaka-project/shaka-player/issues/5643)) ([bd636d4](https://github.com/shaka-project/shaka-player/commit/bd636d4edffed3e845c79666547dc5af91af4055))
* **HLS:** Skip segments without duration and without partial segments ([#5705](https://github.com/shaka-project/shaka-player/issues/5705)) ([f53d50d](https://github.com/shaka-project/shaka-player/commit/f53d50dc3620736add47f4db2f4e71b4d8eea526))
* **HLS:** Support AES-128 in init segment according the RFC ([#5677](https://github.com/shaka-project/shaka-player/issues/5677)) ([806d91a](https://github.com/shaka-project/shaka-player/commit/806d91af4da9e71f9e11af406ffebf14232c5e9f))
* Improve TsParse to avoid parsing errors ([#5615](https://github.com/shaka-project/shaka-player/issues/5615)) ([5fa8b42](https://github.com/shaka-project/shaka-player/commit/5fa8b42118103ee8bb32394feb3aeb57b6d47553))
* Prevent codecs override in the transmuxer ([#5568](https://github.com/shaka-project/shaka-player/issues/5568)) ([66c625f](https://github.com/shaka-project/shaka-player/commit/66c625f55ab00989ff74419e8f85ca7619446dd0))
* Remove debugging code on Simple Text ([#5582](https://github.com/shaka-project/shaka-player/issues/5582)) ([991130a](https://github.com/shaka-project/shaka-player/commit/991130a6d875fd41ff585254563c5a879057603a))
* seeking in segment timeline returns incorrect index ([#5716](https://github.com/shaka-project/shaka-player/issues/5716)) ([c02ccee](https://github.com/shaka-project/shaka-player/commit/c02cceeeca0590a9b9b3161783142d89ba4948d4)), closes [#5664](https://github.com/shaka-project/shaka-player/issues/5664)
* **TTML:** Fix wrong writing-mode in nested cues ([#5646](https://github.com/shaka-project/shaka-player/issues/5646)) ([3a4f108](https://github.com/shaka-project/shaka-player/commit/3a4f10878a91c7d30f71862f2cec780b0f5e1bac))
* **UI:** Fix broken language names on Google TV ([#5613](https://github.com/shaka-project/shaka-player/issues/5613)) ([fc93292](https://github.com/shaka-project/shaka-player/commit/fc93292d9e4f8d38561dea8320cbcd5fd25f2c75))
* **WebVTT:** Fix support for line:0 vertical alignment ([#5632](https://github.com/shaka-project/shaka-player/issues/5632)) ([eed393f](https://github.com/shaka-project/shaka-player/commit/eed393f1bf777f00f1e7242c96bf9124ad3dec30))
* **WebVTT:** Fix text displayed out of picture and with overlapping lines ([#5662](https://github.com/shaka-project/shaka-player/issues/5662)) ([6975be9](https://github.com/shaka-project/shaka-player/commit/6975be92d47fd5368492e861a6ea63e627a4846c)), closes [#5661](https://github.com/shaka-project/shaka-player/issues/5661)
* **WebVTT:** Fix wrong writing-mode in nested cues ([#5641](https://github.com/shaka-project/shaka-player/issues/5641)) ([56a4cea](https://github.com/shaka-project/shaka-player/commit/56a4cea5789f15b5e78c9a5d8d0cb97eb542bafc))


### Performance Improvements

* Optimization to resolve uris ([#5657](https://github.com/shaka-project/shaka-player/issues/5657)) ([bd17c2b](https://github.com/shaka-project/shaka-player/commit/bd17c2bfd077c596d77a2a3fdd865041ed08012c))

## [4.4.0](https://github.com/shaka-project/shaka-player/compare/v4.4.0...v4.4.0) (2023-08-30)


### Features

* **ABR:** Abr improvement config ([#5400](https://github.com/shaka-project/shaka-player/issues/5400)) ([b51ee6e](https://github.com/shaka-project/shaka-player/commit/b51ee6ed89fc9a6f362c687a1b808e64038b6e92))
* Add a Mp4Generator ([#5127](https://github.com/shaka-project/shaka-player/issues/5127)) ([d475a73](https://github.com/shaka-project/shaka-player/commit/d475a73d7d105d732a2fd8f9bca2686ff88d1732))
* Add AAC silent frame getter ([#5557](https://github.com/shaka-project/shaka-player/issues/5557)) ([933f039](https://github.com/shaka-project/shaka-player/commit/933f039ab043205ef6e5f1d9779283e710c2d7bc))
* Add AAC transmuxer ([#5240](https://github.com/shaka-project/shaka-player/issues/5240)) ([00d3a45](https://github.com/shaka-project/shaka-player/commit/00d3a45dad5957f14640f38dec1068dfd2397698))
* Add AC-3 and EC-3 support in Mp4Generator ([#5235](https://github.com/shaka-project/shaka-player/issues/5235)) ([28d18ad](https://github.com/shaka-project/shaka-player/commit/28d18ad7a77134d5e7a301a9753d67ac0c698764))
* Add AC-3 detection in TS ([#4931](https://github.com/shaka-project/shaka-player/issues/4931)) ([48c30bc](https://github.com/shaka-project/shaka-player/commit/48c30bcd036060a09175badadeeacdff4d8f3728))
* Add AC3 transmuxer ([#5297](https://github.com/shaka-project/shaka-player/issues/5297)) ([6f83997](https://github.com/shaka-project/shaka-player/commit/6f8399791352b6ccb6f3803c5163be4999c075f0))
* Add EC-3 detection in TS ([#5144](https://github.com/shaka-project/shaka-player/issues/5144)) ([24a3b7d](https://github.com/shaka-project/shaka-player/commit/24a3b7da1a8e0eff6f72b3b654b52fb44471a800))
* Add EC3 transmuxer ([#5352](https://github.com/shaka-project/shaka-player/issues/5352)) ([7d24e14](https://github.com/shaka-project/shaka-player/commit/7d24e14d2132ed3eee2a3f63e88892214755e717))
* Add ExpressPlay FairPlay util ([#4926](https://github.com/shaka-project/shaka-player/issues/4926)) ([7fa40fd](https://github.com/shaka-project/shaka-player/commit/7fa40fdb483e155099d0141ee110ac1a791d88ae))
* add feature-flag to insert fake encryption in init segments on broken platforms ([#5561](https://github.com/shaka-project/shaka-player/issues/5561)) ([f14f295](https://github.com/shaka-project/shaka-player/commit/f14f2959d6700a56d1895360da657afc796d25f5))
* Add getManifestType method ([#5021](https://github.com/shaka-project/shaka-player/issues/5021)) ([c7c5e94](https://github.com/shaka-project/shaka-player/commit/c7c5e94a32f402edc1ab8dd2b492139bb5079e49))
* Add liveSync configuration to catch up on live streams ([#5304](https://github.com/shaka-project/shaka-player/issues/5304)) ([db44dc8](https://github.com/shaka-project/shaka-player/commit/db44dc82242fd9dd845024737e969fef0e4caae5))
* Add missing export in TsParser ([#5145](https://github.com/shaka-project/shaka-player/issues/5145)) ([412a7e8](https://github.com/shaka-project/shaka-player/commit/412a7e8f922e1e2106530f4a59f070289a86bc5f))
* Add MP3 transmuxer ([#5208](https://github.com/shaka-project/shaka-player/issues/5208)) ([82e905b](https://github.com/shaka-project/shaka-player/commit/82e905b540b362ff14e1c14023de2d58a1e78a0f))
* add Occitan locale ([#4900](https://github.com/shaka-project/shaka-player/issues/4900)) ([68486a3](https://github.com/shaka-project/shaka-player/commit/68486a3f3743946188827aa0ebf6ef0e321153be))
* Add originalLanguage to the Track structure ([#5409](https://github.com/shaka-project/shaka-player/issues/5409)) ([f53349f](https://github.com/shaka-project/shaka-player/commit/f53349fc93e97dd1344025119b8566501950213b))
* Add preferredAudioLabel to PlayerConfiguration ([#4763](https://github.com/shaka-project/shaka-player/issues/4763)) ([aadecd6](https://github.com/shaka-project/shaka-player/commit/aadecd6401c00af56eccc26bd710d96d41be76ce))
* Add preferredVideoHdrLevel config. ([#5370](https://github.com/shaka-project/shaka-player/issues/5370)) ([2f511a2](https://github.com/shaka-project/shaka-player/commit/2f511a293014f2b5e7c8b14db5dedcbb4f24e3fe))
* Add safeMargin as a parameter of the player selectAudioLanguage method ([#5316](https://github.com/shaka-project/shaka-player/issues/5316)) ([e4a4138](https://github.com/shaka-project/shaka-player/commit/e4a41381f2ac8b70d8419a2742bb7109cb0e2015))
* Add support for AC-3 and EC-3 audio in DVB streams ([#5484](https://github.com/shaka-project/shaka-player/issues/5484)) ([9bd559b](https://github.com/shaka-project/shaka-player/commit/9bd559b94ad86234e927b2422bbde0655831bb75))
* Add support for changing codecs in MediaSourceEngine ([#5217](https://github.com/shaka-project/shaka-player/issues/5217)) ([464f33c](https://github.com/shaka-project/shaka-player/commit/464f33c984a78aa7d72c3e389ca97c9b28dc5b38))
* Add support for Document Picture-in-Picture ([#4969](https://github.com/shaka-project/shaka-player/issues/4969)) ([3828fd6](https://github.com/shaka-project/shaka-player/commit/3828fd6849fba98218ed934279d5d8a23183dc06))
* Add support to old EMSG schemeId for ID3 ([#5320](https://github.com/shaka-project/shaka-player/issues/5320)) ([cd9ee09](https://github.com/shaka-project/shaka-player/commit/cd9ee095e8864265b0b851c4d25bd2dc558c0e93))
* Add support to streamDataCallback when using prefetch ([#5310](https://github.com/shaka-project/shaka-player/issues/5310)) ([6104b57](https://github.com/shaka-project/shaka-player/commit/6104b57a76626f7b847b807ee07c543f90acbcad))
* Add TS transmuxer ([#5386](https://github.com/shaka-project/shaka-player/issues/5386)) ([eec25b2](https://github.com/shaka-project/shaka-player/commit/eec25b2c6efc1cccc35509131c37bd4569d54b9e))
* **Ads:** Add ads config ([#5085](https://github.com/shaka-project/shaka-player/issues/5085)) ([dfe263a](https://github.com/shaka-project/shaka-player/commit/dfe263aa6a252ff78901a150ee676594742d709c))
* **Ads:** Add control AdsRenderingSettings ([#5536](https://github.com/shaka-project/shaka-player/issues/5536)) ([d37143e](https://github.com/shaka-project/shaka-player/commit/d37143e060fe6318b9ec2bac67ee7a259a25947d))
* **ads:** Add getPodIndex to CS and SS ads ([#5524](https://github.com/shaka-project/shaka-player/issues/5524)) ([65cf077](https://github.com/shaka-project/shaka-player/commit/65cf0773f4041565826013244f571f88e3af22ff))
* **ads:** Add new methods to Ads ([#5107](https://github.com/shaka-project/shaka-player/issues/5107)) ([2b33315](https://github.com/shaka-project/shaka-player/commit/2b333159c344dcd7c39d65e384435563dad741a8))
* **Ads:** Allow multiple calls to requestAds in CS ([#5542](https://github.com/shaka-project/shaka-player/issues/5542)) ([837e0fb](https://github.com/shaka-project/shaka-player/commit/837e0fba4267bd74fa26acdfdace4ba833fb659a))
* **Ads:** Allow use a custom playhead tracker in CS ([#5543](https://github.com/shaka-project/shaka-player/issues/5543)) ([362f03f](https://github.com/shaka-project/shaka-player/commit/362f03ff3d55565449d83407db4fc17c8575a3e2))
* **Ads:** Disable custom playback on iOS 10+ browsers for client-side ads ([29e022e](https://github.com/shaka-project/shaka-player/commit/29e022e3aeac10fc3bcf0382b14dabd2d4a93c85))
* **ads:** Dispatch a player event for client-side ad errors ([#5045](https://github.com/shaka-project/shaka-player/issues/5045)) ([673b7fc](https://github.com/shaka-project/shaka-player/commit/673b7fceedaea659a8c5e9890fd8434d974756f1))
* Allow custom plugins for transmuxing ([#4854](https://github.com/shaka-project/shaka-player/issues/4854)) ([fac721d](https://github.com/shaka-project/shaka-player/commit/fac721df868af2a4a53f5454b1838a60da3cee83))
* Allow generate muxed content with Mp4Generator ([#5555](https://github.com/shaka-project/shaka-player/issues/5555)) ([1112d1d](https://github.com/shaka-project/shaka-player/commit/1112d1d447d699886f989b936cb0689261307775))
* Allow generate segments with Mp4Generator ([#5185](https://github.com/shaka-project/shaka-player/issues/5185)) ([8da971f](https://github.com/shaka-project/shaka-player/commit/8da971f5a7db6985319d178672076a2e2272abf9))
* allow reuse of persistent license sessions ([#4461](https://github.com/shaka-project/shaka-player/issues/4461)) ([cc97da1](https://github.com/shaka-project/shaka-player/commit/cc97da167f4b08b98613a3296b4879f0948b79b7))
* Allow VTT files with erroneous linebreaks ([#2394](https://github.com/shaka-project/shaka-player/issues/2394)) ([9b1c614](https://github.com/shaka-project/shaka-player/commit/9b1c614815d4963e03dec41a155e58cb5eefb94f)), closes [#2358](https://github.com/shaka-project/shaka-player/issues/2358)
* Cache mediaCapabilities.decodingInfo results ([#4789](https://github.com/shaka-project/shaka-player/issues/4789)) ([b7781f0](https://github.com/shaka-project/shaka-player/commit/b7781f04468c0e25502679a7bc740cc024551adf)), closes [#4775](https://github.com/shaka-project/shaka-player/issues/4775)
* Caching and other efficiency improvements for mcap polyfill ([#4708](https://github.com/shaka-project/shaka-player/issues/4708)) ([884c4ca](https://github.com/shaka-project/shaka-player/commit/884c4ca4f8ed94457e7eabce68d4e476811739d5)), closes [#4574](https://github.com/shaka-project/shaka-player/issues/4574)
* **cea:** Add CEA parser for TS ([#4697](https://github.com/shaka-project/shaka-player/issues/4697)) ([70fad8d](https://github.com/shaka-project/shaka-player/commit/70fad8de8fc18cdd186ee431bbd433bbd4d440cc))
* **CEA:** Add support to vertical position in CEA-608 ([#5531](https://github.com/shaka-project/shaka-player/issues/5531)) ([47224ff](https://github.com/shaka-project/shaka-player/commit/47224ff081fa7b022b8e013becab62b60a814143))
* Config to require a minimum HDCP version ([#4883](https://github.com/shaka-project/shaka-player/issues/4883)) ([61613cf](https://github.com/shaka-project/shaka-player/commit/61613cf0ee8bdbcbf7bfee209bba4fe052f8857c))
* Convert CEA parsers to plugins ([#5195](https://github.com/shaka-project/shaka-player/issues/5195)) ([7bda65d](https://github.com/shaka-project/shaka-player/commit/7bda65dcc75d4f739d8e090f397319b8ea391743))
* **DASH:** Achieve better latency in LL streams ([#5291](https://github.com/shaka-project/shaka-player/issues/5291)) ([f4bcc87](https://github.com/shaka-project/shaka-player/commit/f4bcc874d87b45f9e6678d17466c921594ba0fc5))
* **DASH:** Add support for &lt;dashif:Laurl&gt; ([#4849](https://github.com/shaka-project/shaka-player/issues/4849)) ([b441518](https://github.com/shaka-project/shaka-player/commit/b441518943241693fa2df03196be6ee707c8511e)), closes [#4748](https://github.com/shaka-project/shaka-player/issues/4748)
* **DASH:** Add support for service descriptions ([#5394](https://github.com/shaka-project/shaka-player/issues/5394)) ([693abd5](https://github.com/shaka-project/shaka-player/commit/693abd5081d6b1e317dd1e7e418e7a7c9b058f90))
* **DASH:** Expose accessibility purpose in track ([#5216](https://github.com/shaka-project/shaka-player/issues/5216)) ([654a028](https://github.com/shaka-project/shaka-player/commit/654a0281d9ee5d5d618aaa6a84b93aa85131682e)), closes [#5211](https://github.com/shaka-project/shaka-player/issues/5211)
* **dash:** Improve DASH SegmentTemplate performance with on-demand segment references ([#5061](https://github.com/shaka-project/shaka-player/issues/5061)) ([f1c5a1c](https://github.com/shaka-project/shaka-player/commit/f1c5a1c19126832184f43b0d08e9503a34b0dac0))
* **DASH:** Remove MIN_UPDATE_PERIOD_ to achieve better latency in Live ([#5286](https://github.com/shaka-project/shaka-player/issues/5286)) ([1515b7a](https://github.com/shaka-project/shaka-player/commit/1515b7abf62a9e7227d428d0a90c303e7aecc45d))
* **Demo:** Add Low Latency filter in demo page ([#5392](https://github.com/shaka-project/shaka-player/issues/5392)) ([c378e10](https://github.com/shaka-project/shaka-player/commit/c378e10bc68a0a1552ab757201ad4c38cffa015d))
* **Demo:** Add MSS Playready asset ([#5485](https://github.com/shaka-project/shaka-player/issues/5485)) ([89ca242](https://github.com/shaka-project/shaka-player/commit/89ca2427c931fe331193cf4d194ced8daa8c2300))
* **demo:** Improve bug report button in demo ([#5510](https://github.com/shaka-project/shaka-player/issues/5510)) ([4329d79](https://github.com/shaka-project/shaka-player/commit/4329d7913b10bfb1e51775b63c7af9fcf5307acc)), closes [#5056](https://github.com/shaka-project/shaka-player/issues/5056)
* **DRM:** use preferredKeySystems to reduce requestMediaKeySystemAccess() calls ([#5391](https://github.com/shaka-project/shaka-player/issues/5391)) ([6d75d89](https://github.com/shaka-project/shaka-player/commit/6d75d89fbb13a32de135a6c1ab6a7a3e55fcb3f4))
* Enable variant failover for BAD_HTTP_STATUS and TIMEOUT ([#4769](https://github.com/shaka-project/shaka-player/issues/4769)) ([b46012d](https://github.com/shaka-project/shaka-player/commit/b46012df647d0fd6f1b6209a324171ab86f9fa80))
* export period combiner ([#5324](https://github.com/shaka-project/shaka-player/issues/5324)) ([e9ba2f4](https://github.com/shaka-project/shaka-player/commit/e9ba2f432210d82a1beae063b6323c4d46cc1765)), closes [#5307](https://github.com/shaka-project/shaka-player/issues/5307)
* **HLS:** Add HLS config to ignore manifest timestamps when in segments mode ([#5103](https://github.com/shaka-project/shaka-player/issues/5103)) ([4d487e4](https://github.com/shaka-project/shaka-player/commit/4d487e46e163862775dbdb5038c309969ba1b43b))
* **HLS:** Add HLS support for non-sequence mode ([#4623](https://github.com/shaka-project/shaka-player/issues/4623)) ([2b50b88](https://github.com/shaka-project/shaka-player/commit/2b50b88030d44c841daea8f67a3c51eb9b2284a4))
* **HLS:** Add support to _HLS_msn query param in LL streams ([#5262](https://github.com/shaka-project/shaka-player/issues/5262)) ([2ece86f](https://github.com/shaka-project/shaka-player/commit/2ece86fde61e5f7f942c3bbdeb6eafe5fc50d8d0))
* **HLS:** Add support to _HLS_part query param in LL streams ([#5265](https://github.com/shaka-project/shaka-player/issues/5265)) ([ec8804d](https://github.com/shaka-project/shaka-player/commit/ec8804d0be2c2cd26a86bbd5737544261c29cc46))
* **HLS:** Add support to blocking playlist reload by adding the CAN-BLOCK-RELOAD=YES ([#5279](https://github.com/shaka-project/shaka-player/issues/5279)) ([090554b](https://github.com/shaka-project/shaka-player/commit/090554b9ed284e10e6de4305aa5ec7797ff8da3b))
* **HLS:** Add support to BYTERANGE-LENGTH in EXT-X-PRELOAD-HINT ([#5267](https://github.com/shaka-project/shaka-player/issues/5267)) ([ea97a5a](https://github.com/shaka-project/shaka-player/commit/ea97a5a90c3445405bfc53c96943ae607caf2e21))
* **HLS:** Add support to HLS-AES128 low latency ([#4982](https://github.com/shaka-project/shaka-player/issues/4982)) ([07787a8](https://github.com/shaka-project/shaka-player/commit/07787a8874f8448df66e487a5485155a00e39b0c))
* **HLS:** Add support to HOLD-BACK in EXT-X-SERVER-CONTROL ([#5281](https://github.com/shaka-project/shaka-player/issues/5281)) ([bb2c06a](https://github.com/shaka-project/shaka-player/commit/bb2c06a3df1a4d68c981b7bef13e12110b8d0ca7))
* **HLS:** Allow delivery directives in Live streams ([#5292](https://github.com/shaka-project/shaka-player/issues/5292)) ([aedf634](https://github.com/shaka-project/shaka-player/commit/aedf634f8ee9a8f0a172bfaa0d9b7b3f8ba3f294))
* **HLS:** Fix update time when using LL-HLS and byterange optimization ([#5495](https://github.com/shaka-project/shaka-player/issues/5495)) ([bba7537](https://github.com/shaka-project/shaka-player/commit/bba75370f36890e89d4d783d1726121577ff5968))
* **HLS:** Get resolution from TS when load a Media Playlist ([#5058](https://github.com/shaka-project/shaka-player/issues/5058)) ([42a9f96](https://github.com/shaka-project/shaka-player/commit/42a9f968d8597ba34a99c9fe68cace8600876112))
* **HLS:** Improve detection of basic info from Media Playlist ([#4809](https://github.com/shaka-project/shaka-player/issues/4809)) ([d465942](https://github.com/shaka-project/shaka-player/commit/d465942c4393e6c891d6a230bea90a44d90cc70b))
* **HLS:** Improve HLS parsing time ([#5264](https://github.com/shaka-project/shaka-player/issues/5264)) ([2ca7d0b](https://github.com/shaka-project/shaka-player/commit/2ca7d0b06075adce752cf048eb70693c837b1e9c))
* **HLS:** Improve Low Latency performance in HLS ([#4952](https://github.com/shaka-project/shaka-player/issues/4952)) ([5514385](https://github.com/shaka-project/shaka-player/commit/5514385c87440b4e77ae772f533b30927dcdb303))
* **HLS:** Optimization of LL-HLS with byterange ([#5319](https://github.com/shaka-project/shaka-player/issues/5319)) ([9e6655a](https://github.com/shaka-project/shaka-player/commit/9e6655a04a712641d53e4b717ca68f2120414d56))
* **HLS:** Optimize LL-HLS with byterange ([#5342](https://github.com/shaka-project/shaka-player/issues/5342)) ([53d6378](https://github.com/shaka-project/shaka-player/commit/53d6378bac540af8e69522d1e22887b56b598bf0))
* **HLS:** Parse #EXT-X-BITRATE ([#5550](https://github.com/shaka-project/shaka-player/issues/5550)) ([123183d](https://github.com/shaka-project/shaka-player/commit/123183d14152d988ff9817729b98980961917629))
* **HLS:** Parse SAMPLE-RATE attribute ([#5375](https://github.com/shaka-project/shaka-player/issues/5375)) ([5af34ad](https://github.com/shaka-project/shaka-player/commit/5af34add689ee5075b94eedf59125eec2f8a45c2))
* **HLS:** Poll HLS playlists using last segment duration ([#4779](https://github.com/shaka-project/shaka-player/issues/4779)) ([1ba3806](https://github.com/shaka-project/shaka-player/commit/1ba38067759654b5e53573c41db65d9d748af003)), closes [#4771](https://github.com/shaka-project/shaka-player/issues/4771)
* **HLS:** Support byterange optimization on servers with support to blocking playlist reload ([#5347](https://github.com/shaka-project/shaka-player/issues/5347)) ([263a17b](https://github.com/shaka-project/shaka-player/commit/263a17b984d7014e9d080e4b7437a78c7620aec7))
* Improve live latency on load ([#5268](https://github.com/shaka-project/shaka-player/issues/5268)) ([236dacb](https://github.com/shaka-project/shaka-player/commit/236dacb53bfc511ce3144e621b5f572f644e245d))
* Improve parsing time in DASH and HLS ([#5261](https://github.com/shaka-project/shaka-player/issues/5261)) ([f1e35fd](https://github.com/shaka-project/shaka-player/commit/f1e35fde00c65e6cf1acd42fb78c3b5562705542))
* Improve performance of multi-period DASH parsing ([#5350](https://github.com/shaka-project/shaka-player/issues/5350)) ([5b0b429](https://github.com/shaka-project/shaka-player/commit/5b0b4290e36091ff75da92fe307e7744799f4411))
* Improve performance of setStreamProperties on low-end devices ([#5380](https://github.com/shaka-project/shaka-player/issues/5380)) ([ddbc249](https://github.com/shaka-project/shaka-player/commit/ddbc2498bff6a3cb38fbebb37886e512d28720a0))
* Improve sequence mode start time ([#5326](https://github.com/shaka-project/shaka-player/issues/5326)) ([80cacf6](https://github.com/shaka-project/shaka-player/commit/80cacf6d8f28e3cd75f40b1c68d2e52a46219df6))
* Include stack trace in errors dispatched from production builds ([#5407](https://github.com/shaka-project/shaka-player/issues/5407)) ([7d049eb](https://github.com/shaka-project/shaka-player/commit/7d049eb8cb3f0b577148d15fa4c42262b9f322ed)), closes [#5406](https://github.com/shaka-project/shaka-player/issues/5406)
* **logs:** Add extra logging for 3015 errors ([#4932](https://github.com/shaka-project/shaka-player/issues/4932)) ([67a2451](https://github.com/shaka-project/shaka-player/commit/67a245129f53d99cce89aff3ea194b1098d65ee6))
* Make gap jump timer time configurable ([#5525](https://github.com/shaka-project/shaka-player/issues/5525)) ([97b7412](https://github.com/shaka-project/shaka-player/commit/97b741210e0744e1d4dbb2083285e95fc5d24755))
* Move forceTransmux from streaming to mediasource config ([#4783](https://github.com/shaka-project/shaka-player/issues/4783)) ([b491a6b](https://github.com/shaka-project/shaka-player/commit/b491a6b7caa5d4a8167adf18cf90b23c30a5a1be))
* **MSS:** Add support for Microsoft Smooth Streaming (VOD only) ([#5002](https://github.com/shaka-project/shaka-player/issues/5002)) ([f80bf20](https://github.com/shaka-project/shaka-player/commit/f80bf208b113c57fa9bd8d94f093972cf9571274))
* **MSS:** Fix MSS PlayReady support ([#5486](https://github.com/shaka-project/shaka-player/issues/5486)) ([1dd9809](https://github.com/shaka-project/shaka-player/commit/1dd98098087a54d8de68f4c2ca670cb79ebaa2ea))
* **net:** Added advanced type to filters ([#5006](https://github.com/shaka-project/shaka-player/issues/5006)) ([fbce38a](https://github.com/shaka-project/shaka-player/commit/fbce38af1cc7f05a30992907103af4a82f180520)), closes [#4966](https://github.com/shaka-project/shaka-player/issues/4966)
* Optimize appendBuffer operations for init segments ([#5377](https://github.com/shaka-project/shaka-player/issues/5377)) ([68f7a0e](https://github.com/shaka-project/shaka-player/commit/68f7a0eb2a8574645592e069c63813e0c97c5e66))
* Parses a PRFT Box, with a loss of precision beyond 53 bits ([#5354](https://github.com/shaka-project/shaka-player/issues/5354)) ([a797651](https://github.com/shaka-project/shaka-player/commit/a797651db4e636bd00cba3715686dc35057eb9de))
* Parses a TFDT Box, with a loss of precision beyond 53 bits ([#5329](https://github.com/shaka-project/shaka-player/issues/5329)) ([db73e1f](https://github.com/shaka-project/shaka-player/commit/db73e1f410f5e6754ea16329be35c48a48bca16d))
* Parses a TFDT Box, with a loss of precision beyond 53 bits ([#5501](https://github.com/shaka-project/shaka-player/issues/5501)) ([c6e8449](https://github.com/shaka-project/shaka-player/commit/c6e8449468698b0e7765b9739222344d470a6517))
* Raise fatal error on linear manifest request update failure ([#5138](https://github.com/shaka-project/shaka-player/issues/5138)) ([3ff7ba3](https://github.com/shaka-project/shaka-player/commit/3ff7ba370fcc6b561d4b63f18d144404d6d6ed43))
* Set segmentPrefetchLimit to 2 by default for low latency streaming ([#5275](https://github.com/shaka-project/shaka-player/issues/5275)) ([62f24d2](https://github.com/shaka-project/shaka-player/commit/62f24d22491353bf3a37f451c74a26b77f892197))
* **SRT:** Support stylized payload in SRT format ([#5500](https://github.com/shaka-project/shaka-player/issues/5500)) ([963cf61](https://github.com/shaka-project/shaka-player/commit/963cf614d9142c5bc93b0c6c0eb3498e208d235d))
* Support customizing clearBuffers and safeMargin when select variants by label ([#4770](https://github.com/shaka-project/shaka-player/issues/4770)) ([c724625](https://github.com/shaka-project/shaka-player/commit/c7246250323c3c97a2d30f9f66880e914e5c2344))
* Support Parallel Segment Fetching ([#4784](https://github.com/shaka-project/shaka-player/issues/4784)) ([de6abde](https://github.com/shaka-project/shaka-player/commit/de6abde06f38d802f1f9fb297c284283ca8e4751))
* Support private-use language tags ([#5223](https://github.com/shaka-project/shaka-player/issues/5223)) ([fa041d7](https://github.com/shaka-project/shaka-player/commit/fa041d776da720b9319e8db65aeb48df1d48a9bf))
* **UI:** Add HDR label to resolution when the track is HDR ([#5373](https://github.com/shaka-project/shaka-player/issues/5373)) ([3f9eade](https://github.com/shaka-project/shaka-player/commit/3f9eadeaaf5d3a4b4e20c6e05dbad3fc4b4b5f3c))
* **UI:** Add PageUp and PageDown to UI seek bar ([#5519](https://github.com/shaka-project/shaka-player/issues/5519)) ([8e22a50](https://github.com/shaka-project/shaka-player/commit/8e22a508520cc444fe8abb64e83771b5958f2c54))
* **UI:** Add thumbnails to the UI ([#5502](https://github.com/shaka-project/shaka-player/issues/5502)) ([c483975](https://github.com/shaka-project/shaka-player/commit/c483975cb819ee5908ebc5e75bfa644312fdad7a))
* **UI:** Allow customizing FullScreen element ([#4963](https://github.com/shaka-project/shaka-player/issues/4963)) ([c471d23](https://github.com/shaka-project/shaka-player/commit/c471d23bc25db11dda85a18870ebd3fe37971848))
* **UI:** Remove copyStyleSheets ([#5273](https://github.com/shaka-project/shaka-player/issues/5273)) ([fe43ed3](https://github.com/shaka-project/shaka-player/commit/fe43ed3964509d6be0c1a2123787adf51c91fc33))
* **UI:** Use Intl.DisplayNames to show the language name ([#5365](https://github.com/shaka-project/shaka-player/issues/5365)) ([35cb193](https://github.com/shaka-project/shaka-player/commit/35cb193c76a01b0bdea862b423cfc6721f42529a))
* Use local assets for transmuxer tests ([#5549](https://github.com/shaka-project/shaka-player/issues/5549)) ([a75e776](https://github.com/shaka-project/shaka-player/commit/a75e776778b9cdf9c751d3d781f6fb288da65689))
* Use shaka.text.Cue everywhere instead of shaka.extern.Cue ([#5529](https://github.com/shaka-project/shaka-player/issues/5529)) ([62156ba](https://github.com/shaka-project/shaka-player/commit/62156bae020cb16f5867c15a301e22b479c79c4e))
* **utils:** Export shaka.util.StreamUtils.meetsRestrictions ([#5100](https://github.com/shaka-project/shaka-player/issues/5100)) ([3543e57](https://github.com/shaka-project/shaka-player/commit/3543e579c5500ed5a4cc5374aa7eea4682190750))
* **WebVTT:** Add support to auto position ([#5532](https://github.com/shaka-project/shaka-player/issues/5532)) ([a8f7c41](https://github.com/shaka-project/shaka-player/commit/a8f7c41b0744f707fdebb6246ef2c9b6ebabc998))
* **webvtt:** webvtt colors output ([#4954](https://github.com/shaka-project/shaka-player/issues/4954)) ([ed7a736](https://github.com/shaka-project/shaka-player/commit/ed7a736ca22bb768672135ad0d468c00be4c5dac))


### Bug Fixes

* `config.streaming.preferNativeHls` only applies to HLS streams ([#5167](https://github.com/shaka-project/shaka-player/issues/5167)) ([bf4b4a5](https://github.com/shaka-project/shaka-player/commit/bf4b4a54cc56d5da98918274351063e22f31cd6d)), closes [#5166](https://github.com/shaka-project/shaka-player/issues/5166)
* add MIME type for HTML5 tracks ([#5452](https://github.com/shaka-project/shaka-player/issues/5452)) ([4f1a119](https://github.com/shaka-project/shaka-player/commit/4f1a1196a90b8d617aea10eae265769221ff6de1))
* Add missing AdvancedRequestType in some requests ([#5113](https://github.com/shaka-project/shaka-player/issues/5113)) ([b60bf16](https://github.com/shaka-project/shaka-player/commit/b60bf1610be3c9cf49e024ae91d1a0f6fad4ddb3))
* Add missing StreamInfo value in AAC transmuxer ([#5260](https://github.com/shaka-project/shaka-player/issues/5260)) ([5175e88](https://github.com/shaka-project/shaka-player/commit/5175e887af628a5163795e5213ea3cd5f2b2f809))
* Add mux.js to support.html ([#4923](https://github.com/shaka-project/shaka-player/issues/4923)) ([d9fa4eb](https://github.com/shaka-project/shaka-player/commit/d9fa4ebdec49b609690b4d028a0fa1318b83f179))
* Adds missing CMCD params to some http requests ([#5072](https://github.com/shaka-project/shaka-player/issues/5072)) ([fe38e45](https://github.com/shaka-project/shaka-player/commit/fe38e45f4d53fd5c74304948a3e2bb2a8abaaa21)), closes [#5067](https://github.com/shaka-project/shaka-player/issues/5067) [#5094](https://github.com/shaka-project/shaka-player/issues/5094)
* **ads:** Fix ads starting muted behavior ([#5153](https://github.com/shaka-project/shaka-player/issues/5153)) ([211624f](https://github.com/shaka-project/shaka-player/commit/211624f250efc5caaa3500fb26f0fd5d9d426d0d)), closes [#5125](https://github.com/shaka-project/shaka-player/issues/5125)
* **Ads:** Fix CS volume ad ([#5016](https://github.com/shaka-project/shaka-player/issues/5016)) ([492b5f3](https://github.com/shaka-project/shaka-player/commit/492b5f3ac83c801bc3f50a0aaa8a5382dd8f0936))
* **Ads:** Fix SS configure ([#5155](https://github.com/shaka-project/shaka-player/issues/5155)) ([49ed4ab](https://github.com/shaka-project/shaka-player/commit/49ed4ab33ffffb8ee8d05f2a2109c774ef98e6b9))
* **Ads:** Fix usage of EventManager on CS ([#5017](https://github.com/shaka-project/shaka-player/issues/5017)) ([541badc](https://github.com/shaka-project/shaka-player/commit/541badcfca7226ac77f9f6073e5542889b3fb104))
* **Ads:** Fix usage of EventManager on CS ([#5084](https://github.com/shaka-project/shaka-player/issues/5084)) ([122f5f3](https://github.com/shaka-project/shaka-player/commit/122f5f3e87375213eb775584626fbc95f1974d15))
* **ads:** Fix VMAP ads stay muted on muted autoplay ([#4995](https://github.com/shaka-project/shaka-player/issues/4995)) ([d074afc](https://github.com/shaka-project/shaka-player/commit/d074afc1fc1a675aaee7059df860a160004871fc))
* **Ads:** Initialize correctly the IMA ads manager ([#5541](https://github.com/shaka-project/shaka-player/issues/5541)) ([4428adf](https://github.com/shaka-project/shaka-player/commit/4428adf4c1d483e7d36e20e5800b434f32811cd2))
* Allow the playback of TS without mux.js ([#5041](https://github.com/shaka-project/shaka-player/issues/5041)) ([0b785f7](https://github.com/shaka-project/shaka-player/commit/0b785f7d9c4bdf379dcee0bf3d3989215b0f85a0))
* Avoid unnecessary timestampOffset updates when using HLS segments mode ([#5270](https://github.com/shaka-project/shaka-player/issues/5270)) ([9059944](https://github.com/shaka-project/shaka-player/commit/90599440dcac8116fe369654716c38b84efffc5d))
* Caption can not turn off at iOS Safari ([#4978](https://github.com/shaka-project/shaka-player/issues/4978)) ([9d2c325](https://github.com/shaka-project/shaka-player/commit/9d2c325cdf431664d33bca31626f73d5c6f7a608))
* **cast:** Added existence checks for MediaDecodingConfig.{audio|video} in decodingInfo(). ([#4796](https://github.com/shaka-project/shaka-player/issues/4796)) ([36db83d](https://github.com/shaka-project/shaka-player/commit/36db83dc992bf86e08c610f31ef39ae2c41d0130))
* **cast:** Use cast platform APIs in MediaCapabilties polyfill ([#4727](https://github.com/shaka-project/shaka-player/issues/4727)) ([5d6f56a](https://github.com/shaka-project/shaka-player/commit/5d6f56adf33557ca3ff70a0c459d400b2eae6f79))
* CEA 608 captions not work with H.265 video streams ([#5252](https://github.com/shaka-project/shaka-player/issues/5252)) ([f0ee16b](https://github.com/shaka-project/shaka-player/commit/f0ee16bdb35283e9543006c00ab45bf3ea06f002)), closes [#5251](https://github.com/shaka-project/shaka-player/issues/5251)
* **cea:** Fix MAX_ROWS in CEA-708 window ([#4757](https://github.com/shaka-project/shaka-player/issues/4757)) ([e89eeb6](https://github.com/shaka-project/shaka-player/commit/e89eeb69fab877ee6b330f12c4ff67b3eeac8839))
* **cea:** Fix not rendering CEA-608 on encrypted mp4 segments ([#4756](https://github.com/shaka-project/shaka-player/issues/4756)) ([d600109](https://github.com/shaka-project/shaka-player/commit/d6001097a9751bd9211eb52f940e282ead026a32))
* **chapters:** removed duplicate chapters by id ([#4810](https://github.com/shaka-project/shaka-player/issues/4810)) ([151bdda](https://github.com/shaka-project/shaka-player/commit/151bdda36d60499f5cfdd4d5c6ebbe088025cd2a))
* cmcd not applying configuration changes ([#5119](https://github.com/shaka-project/shaka-player/issues/5119)) ([58aa45f](https://github.com/shaka-project/shaka-player/commit/58aa45f285219928d2a6243d8a0e196c7606fb6b))
* Correct default initDataTransform for legacy Apple Media Keys ([#4797](https://github.com/shaka-project/shaka-player/issues/4797)) ([67a5d56](https://github.com/shaka-project/shaka-player/commit/67a5d56e8606c58cef6ff969aca6010e6db2dd16))
* **DASH:** Avoid "Possible encoding problem detected!" when appending chunked data ([#5376](https://github.com/shaka-project/shaka-player/issues/5376)) ([2071e3a](https://github.com/shaka-project/shaka-player/commit/2071e3ae6302be3fcb15f774b85525f9067e5798))
* **DASH:** Fix bufferBehind with image tracks regression ([#5210](https://github.com/shaka-project/shaka-player/issues/5210)) ([2d9f566](https://github.com/shaka-project/shaka-player/commit/2d9f56627a482cbd8e4687e83e478339ddc3b70a))
* **DASH:** Fix dynamic manifests from edgeware ([#4914](https://github.com/shaka-project/shaka-player/issues/4914)) ([056588b](https://github.com/shaka-project/shaka-player/commit/056588b2e1eaf2e627cb8878735f4db5d0d04087))
* **DASH:** Fix seeking on multiperiod content after variant change ([#5110](https://github.com/shaka-project/shaka-player/issues/5110)) ([3b0f013](https://github.com/shaka-project/shaka-player/commit/3b0f01377f526a42662c2ff4843d49f860f44bea))
* **DASH:** Ignore minBufferTime when using LL ([#5285](https://github.com/shaka-project/shaka-player/issues/5285)) ([fea46d8](https://github.com/shaka-project/shaka-player/commit/fea46d88cd9e2caef00b5ab272b0abcfb1251498))
* Default language to 'und' for native tracks ([#5464](https://github.com/shaka-project/shaka-player/issues/5464)) ([8cd3e2d](https://github.com/shaka-project/shaka-player/commit/8cd3e2dd2686acaccbd6f11484f5386719cfd54e))
* **Demo:** Allow enable LL only with Low Latency Mode config ([#5266](https://github.com/shaka-project/shaka-player/issues/5266)) ([70823f9](https://github.com/shaka-project/shaka-player/commit/70823f96a6c55d2eda8930cd72895dca89715c63))
* **Demo:** Allow manifest type for DAI custom assets ([#4977](https://github.com/shaka-project/shaka-player/issues/4977)) ([1e50630](https://github.com/shaka-project/shaka-player/commit/1e50630ad4631cd2455f0e8a179012de34935a80))
* **Demo:** Fix deployment of codem-isoboxer in the Demo ([#5257](https://github.com/shaka-project/shaka-player/issues/5257)) ([03b39f7](https://github.com/shaka-project/shaka-player/commit/03b39f75dacfc6a14cafb6afced35a9cff05c6b0))
* **Demo:** Fix error link width to avoid overlap with close button ([#5309](https://github.com/shaka-project/shaka-player/issues/5309)) ([08317d0](https://github.com/shaka-project/shaka-player/commit/08317d063284acd298c6c27d73efdf58c08d9911))
* **demo:** Fix native controls pointer events stolen by LCEVC canvas ([#5065](https://github.com/shaka-project/shaka-player/issues/5065)) ([6508f40](https://github.com/shaka-project/shaka-player/commit/6508f4037478c038dc8a0684d6cee784a827eab4))
* **Demo:** Show correctly external text in the Demo ([#5521](https://github.com/shaka-project/shaka-player/issues/5521)) ([e2bf1de](https://github.com/shaka-project/shaka-player/commit/e2bf1de03ec39a751d61b716384697b624bdecbc))
* **Demo:** Trim custom manifestUri to avoid copy-paste errors ([#5378](https://github.com/shaka-project/shaka-player/issues/5378)) ([0e32256](https://github.com/shaka-project/shaka-player/commit/0e322566dc9f51c4478e3b93fc467759c5ca1b94))
* Dispatch all emsg boxes, even if they are ID3 ([#5428](https://github.com/shaka-project/shaka-player/issues/5428)) ([25ecfa7](https://github.com/shaka-project/shaka-player/commit/25ecfa75d844482304e2bfd78b2af134ecb51cd4))
* **docs:** fix player configuration code in drm config tutorial ([#5359](https://github.com/shaka-project/shaka-player/issues/5359)) ([5487236](https://github.com/shaka-project/shaka-player/commit/5487236668d1d5178dd287af78b47ea0a647ffa1))
* Document Picture-in-Picture: Use width/height instead of initialAspectRatio ([#5224](https://github.com/shaka-project/shaka-player/issues/5224)) ([0da63a0](https://github.com/shaka-project/shaka-player/commit/0da63a05218ca2bdbe86039bc76577ae3b80e3ed))
* don't use navigator.connection event listener if it isn't implemented ([#5157](https://github.com/shaka-project/shaka-player/issues/5157)) ([fb68306](https://github.com/shaka-project/shaka-player/commit/fb6830693ca0dcde709d1b000dfacd4e6c05ec7b)), closes [#4542](https://github.com/shaka-project/shaka-player/issues/4542)
* **DRM:** broken keySystemsMapping due to multiple references of drmInfo ([#5388](https://github.com/shaka-project/shaka-player/issues/5388)) ([6513ac0](https://github.com/shaka-project/shaka-player/commit/6513ac056e5fd3ee9aecbb234c724119b058ef8d))
* DrmEngine exception thrown when using FairPlay ([#4971](https://github.com/shaka-project/shaka-player/issues/4971)) ([eebf18c](https://github.com/shaka-project/shaka-player/commit/eebf18cabdcee3c62daee9bed9ceb2958f30f9f5))
* exclude "future" segments from presentation timeline auto correct drift calculations ([#4945](https://github.com/shaka-project/shaka-player/issues/4945)) ([ea6774a](https://github.com/shaka-project/shaka-player/commit/ea6774a1fde3569df4a00992ed17093abefc73e9)), closes [#4944](https://github.com/shaka-project/shaka-player/issues/4944)
* Explicitly specify [@externs](https://github.com/externs) in transmuxer externs. ([#4999](https://github.com/shaka-project/shaka-player/issues/4999)) ([ef8078a](https://github.com/shaka-project/shaka-player/commit/ef8078a05f5b56cc4cabe7e6b78e14a5d26b89ce))
* Failed to set 'currentTime' property on 'HTMLMediaElement' on a Hisense TV ([#4962](https://github.com/shaka-project/shaka-player/issues/4962)) ([5d93b8f](https://github.com/shaka-project/shaka-player/commit/5d93b8f9a71214b984db45db3cda7ba40d86ff87))
* Fallback to isTypeSupported when cast namespace is undefined ([#5012](https://github.com/shaka-project/shaka-player/issues/5012)) ([50d0645](https://github.com/shaka-project/shaka-player/commit/50d0645a1e05e8a8dd9951ebd601639b7f5eb6c4))
* Fire correctly MIN_HDCP_VERSION_NOT_MATCH error ([2ae5a99](https://github.com/shaka-project/shaka-player/commit/2ae5a99642c5dc3b2971849b302d1a1b8e533ec2))
* Fix bufferBehind setting broken by image segments ([#4718](https://github.com/shaka-project/shaka-player/issues/4718)) ([cd1b7c0](https://github.com/shaka-project/shaka-player/commit/cd1b7c09429f9d13361a5ab1fdfb79940673f941)), closes [#4717](https://github.com/shaka-project/shaka-player/issues/4717)
* Fix buffering on the end of MSS streams ([#5196](https://github.com/shaka-project/shaka-player/issues/5196)) ([a8e3c9a](https://github.com/shaka-project/shaka-player/commit/a8e3c9ab310b14ca71610c568cffe108b30d38bf))
* Fix captions from MP4s with multiple trun boxes ([#5422](https://github.com/shaka-project/shaka-player/issues/5422)) ([bccfdbc](https://github.com/shaka-project/shaka-player/commit/bccfdbcea4a5d0a6af534833c793a5a8a5d84135)), closes [#5328](https://github.com/shaka-project/shaka-player/issues/5328)
* Fix compiler error on static use of "this" ([#4699](https://github.com/shaka-project/shaka-player/issues/4699)) ([b06fd6a](https://github.com/shaka-project/shaka-player/commit/b06fd6ad27b38238c401867971ce6b0ac1e53882))
* Fix DASH rejection of streams with ColourPrimaries and MatrixCoefficients ([#5345](https://github.com/shaka-project/shaka-player/issues/5345)) ([226ffa9](https://github.com/shaka-project/shaka-player/commit/226ffa9df6cc9c539febfc205886098d79b2281d))
* Fix DRM workaround for Tizen and Xbox with hvc1/hev1 boxes ([#4743](https://github.com/shaka-project/shaka-player/issues/4743)) ([a61c084](https://github.com/shaka-project/shaka-player/commit/a61c08433dab654edd224b2dc930c6d257460ec9)), closes [#4742](https://github.com/shaka-project/shaka-player/issues/4742)
* Fix duplicate updates in StreamingEngine ([#4840](https://github.com/shaka-project/shaka-player/issues/4840)) ([224207b](https://github.com/shaka-project/shaka-player/commit/224207ba6caf49b2cdb7434a0534df8210bc4be9)), closes [#4831](https://github.com/shaka-project/shaka-player/issues/4831)
* Fix duration error when HLS goes from LIVE to VOD ([#5001](https://github.com/shaka-project/shaka-player/issues/5001)) ([1aee989](https://github.com/shaka-project/shaka-player/commit/1aee98944f020427d081e9c7d1474675dac8b745))
* Fix error when network status changes on src= playbacks ([#5305](https://github.com/shaka-project/shaka-player/issues/5305)) ([07ca8f5](https://github.com/shaka-project/shaka-player/commit/07ca8f535a1bb16973754372276613d20fbe2c41))
* Fix exception enabling captions on HLS ([#4894](https://github.com/shaka-project/shaka-player/issues/4894)) ([b7b2a7c](https://github.com/shaka-project/shaka-player/commit/b7b2a7cbe9f1b23ca184617a2c51f26cc85bf0a3)), closes [#4889](https://github.com/shaka-project/shaka-player/issues/4889)
* Fix exception on Tizen due to unsupported Array method ([#5429](https://github.com/shaka-project/shaka-player/issues/5429)) ([8ff2917](https://github.com/shaka-project/shaka-player/commit/8ff29175d810fe94457e56ea3d0135f84ea712ab))
* Fix exiting fullscreen on Safari ([#5439](https://github.com/shaka-project/shaka-player/issues/5439)) ([ed93a0c](https://github.com/shaka-project/shaka-player/commit/ed93a0cb12173de65f76109136d179bb0f34c014)), closes [#5437](https://github.com/shaka-project/shaka-player/issues/5437)
* Fix failure when drivers lag behind browser ([#5423](https://github.com/shaka-project/shaka-player/issues/5423)) ([a909ed4](https://github.com/shaka-project/shaka-player/commit/a909ed4ce1e9f66456a3a9da79e28f52bb3cafd8))
* Fix fetch plugin with old implementations ([#5091](https://github.com/shaka-project/shaka-player/issues/5091)) ([36bcc37](https://github.com/shaka-project/shaka-player/commit/36bcc3775a71c22f1f5cd77bee229f219f8fc687))
* Fix flattenedCues in WebVttGenerator ([#4867](https://github.com/shaka-project/shaka-player/issues/4867)) ([15232dd](https://github.com/shaka-project/shaka-player/commit/15232ddf06294f7f932b2a97f619e6ff87514a6c))
* Fix gap jump at start when first jump lands in a new gap ([f56d49b](https://github.com/shaka-project/shaka-player/commit/f56d49b517c01cf4309dc227b7087aa725ce5344))
* Fix handling of CC when switching between codecs ([#5160](https://github.com/shaka-project/shaka-player/issues/5160)) ([6937325](https://github.com/shaka-project/shaka-player/commit/6937325b85d346fde6eba5c368ed201d152cc11f))
* Fix HEAD request exception ([#5194](https://github.com/shaka-project/shaka-player/issues/5194)) ([330f04b](https://github.com/shaka-project/shaka-player/commit/330f04b76fd8cbfbdc496e3c19a85d9b49746aca)), closes [#5164](https://github.com/shaka-project/shaka-player/issues/5164)
* Fix implementation of AAC and MP3 transmuxers ([#5296](https://github.com/shaka-project/shaka-player/issues/5296)) ([df18f10](https://github.com/shaka-project/shaka-player/commit/df18f10fca1b0ad643d9ee8dc02cc5bdbd22bab7))
* Fix legacy codec support by rewriting codec metadata ([#4858](https://github.com/shaka-project/shaka-player/issues/4858)) ([e351395](https://github.com/shaka-project/shaka-player/commit/e351395c4a78ccc9e3ceafaa0288cbd06489a927))
* Fix media source duration when using sequence mode ([#4848](https://github.com/shaka-project/shaka-player/issues/4848)) ([1762267](https://github.com/shaka-project/shaka-player/commit/1762267d356a04217340ec792c51ceadb842cd6a))
* Fix MediaCapabilities polyfill on Hisense ([#4927](https://github.com/shaka-project/shaka-player/issues/4927)) ([6a48cfe](https://github.com/shaka-project/shaka-player/commit/6a48cfe64da49c49aeaabeb646b0233537a2ae3e))
* Fix memory leak on SimpleAbrManager ([#5478](https://github.com/shaka-project/shaka-player/issues/5478)) ([e8f3ed0](https://github.com/shaka-project/shaka-player/commit/e8f3ed024bd389845bdc906168bf6dbfdbbd1c56))
* Fix missing originalUri in response filters ([#5114](https://github.com/shaka-project/shaka-player/issues/5114)) ([8bffb99](https://github.com/shaka-project/shaka-player/commit/8bffb99c6e19ca6f968490d8977518e61fc38ffd))
* Fix parsing error on Chromecast when resyncing HLS ([#4869](https://github.com/shaka-project/shaka-player/issues/4869)) ([afca6af](https://github.com/shaka-project/shaka-player/commit/afca6af230685a0c9b556fddb46341380b611923)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Fix playRangeEnd does not work with HLS streams ([#5494](https://github.com/shaka-project/shaka-player/issues/5494)) ([1775672](https://github.com/shaka-project/shaka-player/commit/177567288f8ab7629d5b94226c95118a8849fb4e))
* Fix potential AV sync issues after seek or adaptation ([#4886](https://github.com/shaka-project/shaka-player/issues/4886)) ([c42565c](https://github.com/shaka-project/shaka-player/commit/c42565ccb9c69455307742e1f5c3c763892ec1c6)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Fix potential duplicate segments, AV sync issues ([#4884](https://github.com/shaka-project/shaka-player/issues/4884)) ([52f4b63](https://github.com/shaka-project/shaka-player/commit/52f4b638b155b4b7f7f6a0bd14e6e9661d5cceba)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Fix race that allows multiple text streams to be loaded ([#5129](https://github.com/shaka-project/shaka-player/issues/5129)) ([2ae9095](https://github.com/shaka-project/shaka-player/commit/2ae90950d509c065498fcf146970de84fcc4545b))
* Fix rare exception after StreamingEngine teardown ([#4830](https://github.com/shaka-project/shaka-player/issues/4830)) ([234beef](https://github.com/shaka-project/shaka-player/commit/234beefb73ea7f8a7442112eb2efb78d619a13cb)), closes [#4813](https://github.com/shaka-project/shaka-player/issues/4813)
* Fix selectVariantsByLabel using src= ([#5154](https://github.com/shaka-project/shaka-player/issues/5154)) ([e7d94f7](https://github.com/shaka-project/shaka-player/commit/e7d94f797d87d31b28a867a3d9560bdd691599a4))
* Fix subtitles not added to DOM region ([#4733](https://github.com/shaka-project/shaka-player/issues/4733)) ([4081434](https://github.com/shaka-project/shaka-player/commit/4081434eba7f90ea7fe8544665baf99f59ec5863)), closes [#4680](https://github.com/shaka-project/shaka-player/issues/4680)
* Fix temporarily disable streams on network error ([#5057](https://github.com/shaka-project/shaka-player/issues/5057)) ([fdc5cb1](https://github.com/shaka-project/shaka-player/commit/fdc5cb165d1cf02e48de8c814efaae6eb54a3dbe)), closes [#5055](https://github.com/shaka-project/shaka-player/issues/5055) [#5150](https://github.com/shaka-project/shaka-player/issues/5150)
* Fix timestamp offset for ID3 on DAI-HLS ([#4696](https://github.com/shaka-project/shaka-player/issues/4696)) ([386a28a](https://github.com/shaka-project/shaka-player/commit/386a28a8eb0cd995e7eee9f95c97b7f8e7542774))
* Fix usage of WebCrypto in old browsers ([#4711](https://github.com/shaka-project/shaka-player/issues/4711)) ([9afce3b](https://github.com/shaka-project/shaka-player/commit/9afce3b423406aae0cd2841bb39071c90196c792))
* Fix video/mp2t mimetype conversion. ([#5039](https://github.com/shaka-project/shaka-player/issues/5039)) ([2d0e4cc](https://github.com/shaka-project/shaka-player/commit/2d0e4cc4f4bb768d0c851e4038ecf297af9293e6))
* Fix WebVTT parser failure on REGION blocks ([#4915](https://github.com/shaka-project/shaka-player/issues/4915)) ([da84a2c](https://github.com/shaka-project/shaka-player/commit/da84a2c86b7d7e6968472ce9d2bbe09e0608dbef))
* gap jumping when gap exists at start position ([#5384](https://github.com/shaka-project/shaka-player/issues/5384)) ([6c71b0e](https://github.com/shaka-project/shaka-player/commit/6c71b0ee63fce62c9074788e255363dbbc9ba4e1))
* Get the correct timescale when there are two trak boxes ([#5327](https://github.com/shaka-project/shaka-player/issues/5327)) ([022f6b9](https://github.com/shaka-project/shaka-player/commit/022f6b96fb6620446fe14e0f6e25b5d81c92aefa))
* gettting maxWidth and maxHeight for restrictToElementSize option ([#5481](https://github.com/shaka-project/shaka-player/issues/5481)) ([9a3ac18](https://github.com/shaka-project/shaka-player/commit/9a3ac18f1bbdae282b0614aabf6cad45e6511164))
* Handle empty media segments for Mp4VttParser ([#5131](https://github.com/shaka-project/shaka-player/issues/5131)) ([6fd44c4](https://github.com/shaka-project/shaka-player/commit/6fd44c491043f3dfbe0034fcd3023fda1986d7da)), closes [#4429](https://github.com/shaka-project/shaka-player/issues/4429)
* **HLS:** Add `.tsa` and .`tsv` file extensions as valid MPEG2-TS. ([#5034](https://github.com/shaka-project/shaka-player/issues/5034)) ([a22bdc5](https://github.com/shaka-project/shaka-player/commit/a22bdc51f46376d3cda02d2767388a2b19b61d58))
* **HLS:** Add subtitle role when there are no roles ([#5357](https://github.com/shaka-project/shaka-player/issues/5357)) ([7de6340](https://github.com/shaka-project/shaka-player/commit/7de6340161fbd9c5b53bb6b67bcdd69d8b6ba780)), closes [#5355](https://github.com/shaka-project/shaka-player/issues/5355)
* **HLS:** Adding support for DTS Express in HLS fMP4 ([#5112](https://github.com/shaka-project/shaka-player/issues/5112)) ([#5117](https://github.com/shaka-project/shaka-player/issues/5117)) ([67b1e90](https://github.com/shaka-project/shaka-player/commit/67b1e903458965ac636d165e902b02b7d55cb857))
* **HLS:** Avoid "Possible encoding problem detected!" when is a preload reference ([#5332](https://github.com/shaka-project/shaka-player/issues/5332)) ([bd18a9d](https://github.com/shaka-project/shaka-player/commit/bd18a9de6068388849dd8af4088ce1e1b770d9c6))
* **HLS:** Avoid HLS resync when there is a gap in the stream ([#5284](https://github.com/shaka-project/shaka-player/issues/5284)) ([b8c2004](https://github.com/shaka-project/shaka-player/commit/b8c2004e0203b002fb3ea6fec740a53d48d74b33))
* **HLS:** Avoid variable substitution if no variables ([#5269](https://github.com/shaka-project/shaka-player/issues/5269)) ([5a5a7ac](https://github.com/shaka-project/shaka-player/commit/5a5a7acf5112148e62dfd033c3be568b8f4a56b5))
* **HLS:** Consider skipped segments to calculate next media sequence ([#5414](https://github.com/shaka-project/shaka-player/issues/5414)) ([b7d2305](https://github.com/shaka-project/shaka-player/commit/b7d2305a60c0a27630ed66981a9f22ddcf811cc8))
* **HLS:** don't do sequence mode workaround unless there's a text stream ([#5079](https://github.com/shaka-project/shaka-player/issues/5079)) ([fb22669](https://github.com/shaka-project/shaka-player/commit/fb226692eff74d3bddf76c5a371c6592cf1700f1))
* **HLS:** Don't do sequence mode workaround unless there's a text stream ([#5315](https://github.com/shaka-project/shaka-player/issues/5315)) ([019dcfd](https://github.com/shaka-project/shaka-player/commit/019dcfd9a298516797ab189384f506c416cf7d18))
* **HLS:** Fix AV sync over ad boundaries ([#4824](https://github.com/shaka-project/shaka-player/issues/4824)) ([35033bb](https://github.com/shaka-project/shaka-player/commit/35033bb2db1ca630f4f7895e7678bd0ee6cfd9ef)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* **HLS:** Fix avoid prefetch missing segments ([#5372](https://github.com/shaka-project/shaka-player/issues/5372)) ([7f8e051](https://github.com/shaka-project/shaka-player/commit/7f8e051886e6aab1b7a1997a600f982ca38c0c6c))
* **HLS:** Fix detection of Media Playlist for audio and video only in MP4 ([#4803](https://github.com/shaka-project/shaka-player/issues/4803)) ([76f96b9](https://github.com/shaka-project/shaka-player/commit/76f96b9fee2dc43b03f6803dd80c51fdc5b73a9e))
* **HLS:** Fix detection of WebVTT subtitles in HLS by extension ([#4928](https://github.com/shaka-project/shaka-player/issues/4928)) ([15b0388](https://github.com/shaka-project/shaka-player/commit/15b03884bb61542f451f7854a8562aa3d759ed0f)), closes [#4929](https://github.com/shaka-project/shaka-player/issues/4929)
* **HLS:** Fix discontinuity tracking ([#4881](https://github.com/shaka-project/shaka-player/issues/4881)) ([fc3d5c1](https://github.com/shaka-project/shaka-player/commit/fc3d5c144708c748d90f25de34c436495db2a816)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* **HLS:** Fix dvh1 and dvhe detection as video codec ([#5364](https://github.com/shaka-project/shaka-player/issues/5364)) ([37b7be6](https://github.com/shaka-project/shaka-player/commit/37b7be60b2d560f72e5149918007d4f1cd655e77))
* **HLS:** Fix external subtitles out of sync in HLS ([#5491](https://github.com/shaka-project/shaka-player/issues/5491)) ([de19884](https://github.com/shaka-project/shaka-player/commit/de19884dd151b49c69d622ed16398716832a958e))
* **HLS:** Fix HLS seekRange for live streams ([#5263](https://github.com/shaka-project/shaka-player/issues/5263)) ([258962f](https://github.com/shaka-project/shaka-player/commit/258962f9e0a9a7df6c13db7dbf0e8a54cd3a2ae2))
* **HLS:** fix lazy load with multiple raw audio tracks ([#4715](https://github.com/shaka-project/shaka-player/issues/4715)) ([76149ae](https://github.com/shaka-project/shaka-player/commit/76149ae7453ccff852483b437c9de72cb6ebfbf5))
* **HLS:** Fix live playlist update when using no LL in a LL stream ([#5282](https://github.com/shaka-project/shaka-player/issues/5282)) ([ad2eef6](https://github.com/shaka-project/shaka-player/commit/ad2eef6952b6164a67a5ab1d85f3a0e7071eb7cd))
* **HLS:** Fix load of LL-HLS when the partial segment is not independent ([#5277](https://github.com/shaka-project/shaka-player/issues/5277)) ([ed5915e](https://github.com/shaka-project/shaka-player/commit/ed5915e437db16983a5a8c84f900367af4736cb4))
* **HLS:** Fix lowLatencyPresentationDelay when using autoLowLatencyMode ([#4712](https://github.com/shaka-project/shaka-player/issues/4712)) ([877e954](https://github.com/shaka-project/shaka-player/commit/877e9542170aa0467d28b5edb5a4b1b29dd4452e))
* **HLS:** Fix missing roles ([#4760](https://github.com/shaka-project/shaka-player/issues/4760)) ([2bc481d](https://github.com/shaka-project/shaka-player/commit/2bc481decd11ec1db93e3bb5ca0db4a644b13269)), closes [#4759](https://github.com/shaka-project/shaka-player/issues/4759)
* **HLS:** Fix prefetch with LL-HLS stream ([#5274](https://github.com/shaka-project/shaka-player/issues/5274)) ([551422a](https://github.com/shaka-project/shaka-player/commit/551422a6f6a8da8a97485bee5552fd118ff933e7))
* **HLS:** Fix seek on LL streams when using segments mode ([#5283](https://github.com/shaka-project/shaka-player/issues/5283)) ([d4f3f5c](https://github.com/shaka-project/shaka-player/commit/d4f3f5c0686f0a6304bafbd86f9baf8a2bc6b9fb))
* **HLS:** Fix seekRange for EVENT playlist not using EXT-X-PLAYLIST-TYPE ([#5220](https://github.com/shaka-project/shaka-player/issues/5220)) ([1c89204](https://github.com/shaka-project/shaka-player/commit/1c892045dd5df5a2c831c6aac79428eca058415c))
* **HLS:** Fix support for mixed AES-128/NONE decryption ([#4847](https://github.com/shaka-project/shaka-player/issues/4847)) ([452694d](https://github.com/shaka-project/shaka-player/commit/452694d59785f2e88cab607618f10ba980851805))
* **HLS:** Fix support legacy AVC1 codec used in HLS ([#4716](https://github.com/shaka-project/shaka-player/issues/4716)) ([c3ff8e5](https://github.com/shaka-project/shaka-player/commit/c3ff8e5e5f6ad5867ed0650e153627dafcb1bcf7))
* **HLS:** Fix support of fragmented WebVTT ([#5156](https://github.com/shaka-project/shaka-player/issues/5156)) ([9c4a61f](https://github.com/shaka-project/shaka-player/commit/9c4a61f836e0c982bcf6677891487723a03ae465))
* **hls:** Fix type error in lazy-loading ([#4687](https://github.com/shaka-project/shaka-player/issues/4687)) ([28b73b9](https://github.com/shaka-project/shaka-player/commit/28b73b921d1dbdc6d7e016aa8e0a000e62318ed3))
* **HLS:** Ignore segments with zero duration ([#5371](https://github.com/shaka-project/shaka-player/issues/5371)) ([c25b26a](https://github.com/shaka-project/shaka-player/commit/c25b26a26a7e930af9455bae2f9d82804b921b7b))
* **HLS:** IMSC1 subtitles not working in a HLS stream ([#4942](https://github.com/shaka-project/shaka-player/issues/4942)) ([974f5dc](https://github.com/shaka-project/shaka-player/commit/974f5dcb630977fcdb8ac67d1af001919cf40f7f))
* **HLS:** Mark first partial segment as independent always ([#5312](https://github.com/shaka-project/shaka-player/issues/5312)) ([ea896d5](https://github.com/shaka-project/shaka-player/commit/ea896d5bd71127147c4e31c9da2f3737cae6abc6))
* **HLS:** Parse EXT-X-PART-INF as media playlist tag ([#5311](https://github.com/shaka-project/shaka-player/issues/5311)) ([d29f4bc](https://github.com/shaka-project/shaka-player/commit/d29f4bc5b5188397f746ba3b3d74bd9620975219))
* **HLS:** Parse the correct codec for AVC and MP4A in HLS parser ([#5515](https://github.com/shaka-project/shaka-player/issues/5515)) ([f3fa4f8](https://github.com/shaka-project/shaka-player/commit/f3fa4f87927f8adbb21673d2e619a11ab31e66fe))
* **HLS:** preserve discontinuitySequence in SegmentIndex#fit ([#5066](https://github.com/shaka-project/shaka-player/issues/5066)) ([36a15f6](https://github.com/shaka-project/shaka-player/commit/36a15f60724309edc7c8becf6f09b58238725d2d))
* **HLS:** Report HLS playlist updates as media playlist in network filters ([#5120](https://github.com/shaka-project/shaka-player/issues/5120)) ([c2a59d0](https://github.com/shaka-project/shaka-player/commit/c2a59d0d0cb9177887ee652f73d06f251fe1e89f))
* **HLS:** Require SegmentIndex to return independent segments only ([#5288](https://github.com/shaka-project/shaka-player/issues/5288)) ([9f80e3c](https://github.com/shaka-project/shaka-player/commit/9f80e3cda6348a4952ffa3d624120f4105bbb926))
* **HLS:** Single alternative video renditions not working ([#4785](https://github.com/shaka-project/shaka-player/issues/4785)) ([6915a97](https://github.com/shaka-project/shaka-player/commit/6915a970efead95d41dbe05a824f699e7c68a3a5))
* **HLS:** Skip EXT-X-PRELOAD-HINT without full byterange info ([#5294](https://github.com/shaka-project/shaka-player/issues/5294)) ([32d141d](https://github.com/shaka-project/shaka-player/commit/32d141d7e2bf43a0aa0928ff2814fc556a264e87))
* **HLS:** support discontinuities in segments mode ([#5102](https://github.com/shaka-project/shaka-player/issues/5102)) ([71affe7](https://github.com/shaka-project/shaka-player/commit/71affe7e8530917c6d578fae544c5d1d62214feb))
* **HLS:** Supports syncTime in partial segments ([#5280](https://github.com/shaka-project/shaka-player/issues/5280)) ([9dddc09](https://github.com/shaka-project/shaka-player/commit/9dddc09b897686ae5f838c1207ae2a77646ee1a1))
* Increase IndexedDB timeout ([#4984](https://github.com/shaka-project/shaka-player/issues/4984)) ([ea290ab](https://github.com/shaka-project/shaka-player/commit/ea290ab958385f81ef8ad4ce855100dc21d26667))
* **logging:** Simplify log code. ([#5050](https://github.com/shaka-project/shaka-player/issues/5050)) ([6944976](https://github.com/shaka-project/shaka-player/commit/694497684cda6b5eeb23d7181d0a8c96f8ede988)), closes [#5032](https://github.com/shaka-project/shaka-player/issues/5032)
* Make encoding problem detection more robust ([#4885](https://github.com/shaka-project/shaka-player/issues/4885)) ([0e3621c](https://github.com/shaka-project/shaka-player/commit/0e3621c21e914b38640e0c2c8cf9bece6158efad)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Manually order key for decodingInfo cache ([#4795](https://github.com/shaka-project/shaka-player/issues/4795)) ([806a9a8](https://github.com/shaka-project/shaka-player/commit/806a9a81c4e6d16d8affa46010665479bfa5bdff))
* **MCap:** Remove robustness when robustness value is default ([#4953](https://github.com/shaka-project/shaka-player/issues/4953)) ([7439a26](https://github.com/shaka-project/shaka-player/commit/7439a264d63ff5b68b0411098939eb19708d7134))
* media source object URL revocation ([#5214](https://github.com/shaka-project/shaka-player/issues/5214)) ([fecb11a](https://github.com/shaka-project/shaka-player/commit/fecb11a230fa4eff94c14986a31ae00021ef5674))
* **media:** Fix region checking in livestreams ([#5361](https://github.com/shaka-project/shaka-player/issues/5361)) ([9fffcb9](https://github.com/shaka-project/shaka-player/commit/9fffcb9ea627832b3a49df0cfb094a8fd153866a)), closes [#5213](https://github.com/shaka-project/shaka-player/issues/5213)
* mitigate uncaught type error in media_source_engine ([#5069](https://github.com/shaka-project/shaka-player/issues/5069)) ([e19fa80](https://github.com/shaka-project/shaka-player/commit/e19fa80090d64a6eb76c53d68afe442c51f0727a)), closes [#4903](https://github.com/shaka-project/shaka-player/issues/4903)
* **net:** Fix HEAD requests in new Chromium ([#5180](https://github.com/shaka-project/shaka-player/issues/5180)) ([5155493](https://github.com/shaka-project/shaka-player/commit/51554934bebfe8aa62b6a728ae0bbd39758f5532)), closes [#5164](https://github.com/shaka-project/shaka-player/issues/5164)
* Only parse/probe TS if the reference is not an MP4 and not WebM ([#5381](https://github.com/shaka-project/shaka-player/issues/5381)) ([b1e7cc4](https://github.com/shaka-project/shaka-player/commit/b1e7cc4e67373d7ae7ab083fe5b626e28282e96b))
* Orange set top box is incorrectly categorized as Apple ([#5545](https://github.com/shaka-project/shaka-player/issues/5545)) ([937484e](https://github.com/shaka-project/shaka-player/commit/937484e0cb58b2c2ce3149beece291d4e0447b6a))
* PERIOD_FLATTENING_FAILED error with shaka 4.3.4 that did not occur with shaka 3.1.2 [#5183](https://github.com/shaka-project/shaka-player/issues/5183)  ([#5188](https://github.com/shaka-project/shaka-player/issues/5188)) ([e855326](https://github.com/shaka-project/shaka-player/commit/e855326cffb23f935f56c7411bb79f479a8db9c4))
* Polyfill missing AbortController on Tizen ([#4707](https://github.com/shaka-project/shaka-player/issues/4707)) ([75ef975](https://github.com/shaka-project/shaka-player/commit/75ef9752a4c7d618a934da773e35ed4d27a9bdf5))
* Populate HDR correctly ([#5369](https://github.com/shaka-project/shaka-player/issues/5369)) ([1ad75ec](https://github.com/shaka-project/shaka-player/commit/1ad75ec8b7da2afe75a5d41fe027c016679f5873))
* prevent access to null config_ in SimpleAbrManager ([#5362](https://github.com/shaka-project/shaka-player/issues/5362)) ([d1db694](https://github.com/shaka-project/shaka-player/commit/d1db694f6e58d27ae40e9b37f8fd8238c5d4d167))
* Prevent bad calls to MediaSource.endOfStream ([#5071](https://github.com/shaka-project/shaka-player/issues/5071)) ([64389a2](https://github.com/shaka-project/shaka-player/commit/64389a274a2d11039cd3d543bec847e1a672cccc)), closes [#5070](https://github.com/shaka-project/shaka-player/issues/5070)
* Prevent content from being restarted after Postroll ads ([#4979](https://github.com/shaka-project/shaka-player/issues/4979)) ([64e94f1](https://github.com/shaka-project/shaka-player/commit/64e94f1c79f3eda75e762474502ba2fc70fb9ee2)), closes [#4445](https://github.com/shaka-project/shaka-player/issues/4445)
* prevent memory leak in SimpleAbrManager while destroying ([#5149](https://github.com/shaka-project/shaka-player/issues/5149)) ([bbf228c](https://github.com/shaka-project/shaka-player/commit/bbf228c07664360ca0e8dc5e26deb59a863deb47))
* Reject TS content on Edge ([#5043](https://github.com/shaka-project/shaka-player/issues/5043)) ([8818a02](https://github.com/shaka-project/shaka-player/commit/8818a026d647b984825c92deacdc0630d6715b45))
* Release region timeline when unloading ([#4871](https://github.com/shaka-project/shaka-player/issues/4871)) ([a236180](https://github.com/shaka-project/shaka-player/commit/a2361806ce3b2eab60024cdca81ecb1ea5a0ed8a)), closes [#4850](https://github.com/shaka-project/shaka-player/issues/4850)
* Remove duplicate adaptation event before init ([#5492](https://github.com/shaka-project/shaka-player/issues/5492)) ([e3b2e7d](https://github.com/shaka-project/shaka-player/commit/e3b2e7d1e47da7e7ad99d4c480c9863f686cf5fc))
* Remove sourcebuffer before create a new media source instance ([#5533](https://github.com/shaka-project/shaka-player/issues/5533)) ([0056c0a](https://github.com/shaka-project/shaka-player/commit/0056c0a6b2bd6e6f2ff2a86d5cbc45776f19f99b))
* Ship to NPM without node version restrictions ([#5253](https://github.com/shaka-project/shaka-player/issues/5253)) ([524a80b](https://github.com/shaka-project/shaka-player/commit/524a80b4498d63c67efb97554641e41860270e83)), closes [#5243](https://github.com/shaka-project/shaka-player/issues/5243)
* stream property of request context obfuscated in production builds ([#5118](https://github.com/shaka-project/shaka-player/issues/5118)) ([93baba2](https://github.com/shaka-project/shaka-player/commit/93baba20a1b1a20bfac6742703d5701e523b535d))
* Support fLaC and Opus codec strings in HLS ([#5454](https://github.com/shaka-project/shaka-player/issues/5454)) ([ccc3d2f](https://github.com/shaka-project/shaka-player/commit/ccc3d2fb7171b35c64951d6e8054b8e7f8082d20)), closes [#5453](https://github.com/shaka-project/shaka-player/issues/5453)
* Sync each segment against EXT-X-PROGRAM-DATE-TIME ([#4870](https://github.com/shaka-project/shaka-player/issues/4870)) ([50c9df4](https://github.com/shaka-project/shaka-player/commit/50c9df49a70e17b8b2973ae7a7d47d7856cd09f8)), closes [#4589](https://github.com/shaka-project/shaka-player/issues/4589)
* Tizen video error fixed by checking the extended MIME type ([#4973](https://github.com/shaka-project/shaka-player/issues/4973)) ([eb01c60](https://github.com/shaka-project/shaka-player/commit/eb01c60b2746907692f9b76cc7dfda55d5cd2056)), closes [#4634](https://github.com/shaka-project/shaka-player/issues/4634)
* Transmux containerless to the correct mimetype ([#5205](https://github.com/shaka-project/shaka-player/issues/5205)) ([bb40d3b](https://github.com/shaka-project/shaka-player/commit/bb40d3bf24fe571916c150bba23c752381334cab))
* Treat regions uniquely ([#4841](https://github.com/shaka-project/shaka-player/issues/4841)) ([5681efe](https://github.com/shaka-project/shaka-player/commit/5681efe95cb7e32e2eddd6fcae1b44d265407939)), closes [#4839](https://github.com/shaka-project/shaka-player/issues/4839)
* **TTML:** Add font-family mapping ([#4801](https://github.com/shaka-project/shaka-player/issues/4801)) ([db8987d](https://github.com/shaka-project/shaka-player/commit/db8987d6dfdb59b9f6d187051d47edf6d846a9ed))
* **TTML:** Fix duplicate cues overlapping segment boundaries ([#4798](https://github.com/shaka-project/shaka-player/issues/4798)) ([bd75032](https://github.com/shaka-project/shaka-player/commit/bd75032d63755044d2d78ca109e2e9f132e36a00)), closes [#4631](https://github.com/shaka-project/shaka-player/issues/4631)
* Typing of PeriodCombiner.Period was incorrect ([#5442](https://github.com/shaka-project/shaka-player/issues/5442)) ([845649b](https://github.com/shaka-project/shaka-player/commit/845649b001e4dac4ed09d1a832b8213c8c56555d))
* **ui:** Avoid submitting form if player is inside form ([#4866](https://github.com/shaka-project/shaka-player/issues/4866)) ([da21850](https://github.com/shaka-project/shaka-player/commit/da21850f21ac94fc06349b528a2bf7c17487b681)), closes [#4861](https://github.com/shaka-project/shaka-player/issues/4861)
* **ui:** Check event cancelable before event.preventDefault ([#4690](https://github.com/shaka-project/shaka-player/issues/4690)) ([6d8de72](https://github.com/shaka-project/shaka-player/commit/6d8de72dafa757ac7d00ef7c4acbfab6529b15c2))
* **UI:** Disable right click on range elements ([#5497](https://github.com/shaka-project/shaka-player/issues/5497)) ([3333ca4](https://github.com/shaka-project/shaka-player/commit/3333ca449db25f4a6f34d21ede1fc68ebb5849f1))
* **ui:** Fix iOS fullscreen on rotation ([#4679](https://github.com/shaka-project/shaka-player/issues/4679)) ([86256f4](https://github.com/shaka-project/shaka-player/commit/86256f49202e64d15f53c7d29e5cac150f018d5c))
* **UI:** Fix playback restarts in safari when click on seekbar end ([#5527](https://github.com/shaka-project/shaka-player/issues/5527)) ([4235658](https://github.com/shaka-project/shaka-player/commit/42356589d579077af082143974e70cf897a7b658))
* **UI:** Fix resolution selection on src= ([#5367](https://github.com/shaka-project/shaka-player/issues/5367)) ([3863c73](https://github.com/shaka-project/shaka-player/commit/3863c73a15343e7879385c636a47c4a077d84e87))
* **UI:** Suppress error log from fullscreen button on desktop ([#4823](https://github.com/shaka-project/shaka-player/issues/4823)) ([99da4ce](https://github.com/shaka-project/shaka-player/commit/99da4ce7dea43ae67870acbcf708ed6479efa7cc)), closes [#4822](https://github.com/shaka-project/shaka-player/issues/4822)
* **UI:** Use pagehide instead of unload for PiP ([#5303](https://github.com/shaka-project/shaka-player/issues/5303)) ([a543b80](https://github.com/shaka-project/shaka-player/commit/a543b80648f429524c522295b0f4f60039c2e0ea))
* unnecessary parsing of in-band pssh when pssh is in the manifest ([#5198](https://github.com/shaka-project/shaka-player/issues/5198)) ([05aa931](https://github.com/shaka-project/shaka-player/commit/05aa93146129240f15309a4c7d04e531ee8edd57)), closes [#5197](https://github.com/shaka-project/shaka-player/issues/5197)
* Update karma-local-wd-launcher to fix Chromedriver &gt;= 115, fix M1 mac ([#5489](https://github.com/shaka-project/shaka-player/issues/5489)) ([c8a27ca](https://github.com/shaka-project/shaka-player/commit/c8a27ca248bfd4651a77bd511c2aaf3b4ac84eb8))
* Update karma-local-wd-launcher to fix Edge &gt;= 115 ([#5506](https://github.com/shaka-project/shaka-player/issues/5506)) ([3104a76](https://github.com/shaka-project/shaka-player/commit/3104a76814fe8fdc1e386bf47078d472012e7bff))
* **VTT:** Fix combining style selectors ([#4934](https://github.com/shaka-project/shaka-player/issues/4934)) ([128562d](https://github.com/shaka-project/shaka-player/commit/128562d93e90ba406c8cbde1af730052fcfc5175))
* **VTT:** Fix spacing between text lines ([#4961](https://github.com/shaka-project/shaka-player/issues/4961)) ([2d0469f](https://github.com/shaka-project/shaka-player/commit/2d0469fb4a2ee62d67fb9f0dbac8009b667156f2))
* **WebVTT:** Add support to &nbsp;, &lrm; and &rlm; ([#4920](https://github.com/shaka-project/shaka-player/issues/4920)) ([726ef42](https://github.com/shaka-project/shaka-player/commit/726ef425b095543a216ba8fed0dfe6d1657e2e95))
* **WebVTT:** Add support to middle position ([#5366](https://github.com/shaka-project/shaka-player/issues/5366)) ([5691d5e](https://github.com/shaka-project/shaka-player/commit/5691d5e4592ffdf712fc830547691f464fed031a))
* **WebVTT:** Fix horizontal positioning with cue box size ([#4949](https://github.com/shaka-project/shaka-player/issues/4949)) ([f456318](https://github.com/shaka-project/shaka-player/commit/f45631834d363b23eb8897b03bce9b3b1b50ca9a))
* **WebVTT:** Fix text-shadow in WebVTT not working ([#5499](https://github.com/shaka-project/shaka-player/issues/5499)) ([ac6a92a](https://github.com/shaka-project/shaka-player/commit/ac6a92a28d95d8008188d482c54cd1d817ce3184))
* **WebVTT:** Fix voice tag styles ([a5f8b43](https://github.com/shaka-project/shaka-player/commit/a5f8b4361e38973c74d0180b5ba7769f636c651d))
* **WebVTT:** Fix voices with styles and support to multiple styles ([#4922](https://github.com/shaka-project/shaka-player/issues/4922)) ([68968c1](https://github.com/shaka-project/shaka-player/commit/68968c17d8ad1eaca6afa6d86bb4f8b1baa69d10))
* **WebVTT:** Tags in the WebVTT subtitle are not parsed ([#4960](https://github.com/shaka-project/shaka-player/issues/4960)) ([d4fc54f](https://github.com/shaka-project/shaka-player/commit/d4fc54f8dc68668244b72405b9f972c711b9a868))


### Performance Improvements

* Caching mediaSource support for browser engine ([#4778](https://github.com/shaka-project/shaka-player/issues/4778)) ([ad6c085](https://github.com/shaka-project/shaka-player/commit/ad6c08561d509cd0cf0e7f4736ba4473774577d9))

## [4.3.0](https://github.com/shaka-project/shaka-player/compare/v4.2.0...v4.3.0) (2022-11-10)


### Features

* Add AAC transmuxer ([#4632](https://github.com/shaka-project/shaka-player/issues/4632)) ([8623a5d](https://github.com/shaka-project/shaka-player/commit/8623a5d0304dd3e65c613b176b4afa38a6dc96b5))
* Add config for sequenceMode in DASH ([#4607](https://github.com/shaka-project/shaka-player/issues/4607)) ([aff2a5d](https://github.com/shaka-project/shaka-player/commit/aff2a5d9e81e5fdfaeb91275aaa0821aa189d34f))
* Add external thumbnails support ([#4497](https://github.com/shaka-project/shaka-player/issues/4497)) ([3582f0a](https://github.com/shaka-project/shaka-player/commit/3582f0a7274d6bb6f0bbfdf2ad51c5ecfb6f974b))
* Add external thumbnails with sprites support ([#4584](https://github.com/shaka-project/shaka-player/issues/4584)) ([86cb3e7](https://github.com/shaka-project/shaka-player/commit/86cb3e714cc3f59cff8f0b33adb291e128c32609))
* Add limited support for HLS "identity" key format ([#4451](https://github.com/shaka-project/shaka-player/issues/4451)) ([b1e81a6](https://github.com/shaka-project/shaka-player/commit/b1e81a684afe086b7a37ea29bbbfc972575ba332)), closes [#2146](https://github.com/shaka-project/shaka-player/issues/2146)
* Adds ChannelCount as a filter to the Player Select Audio Track Method ([#4552](https://github.com/shaka-project/shaka-player/issues/4552)) ([9dd945c](https://github.com/shaka-project/shaka-player/commit/9dd945c3df7364b90a9c3cb3150021492ebb7d81)), closes [#4550](https://github.com/shaka-project/shaka-player/issues/4550)
* **ads:** Add getDescription to CS and SS ads ([#4526](https://github.com/shaka-project/shaka-player/issues/4526)) ([7d2a170](https://github.com/shaka-project/shaka-player/commit/7d2a170336b828e8aac871ff276dbb8b42c384a4))
* **ads:** Add getTitle to CS and SS ads ([#4513](https://github.com/shaka-project/shaka-player/issues/4513)) ([a019065](https://github.com/shaka-project/shaka-player/commit/a019065d5d19598c9d0ba6ce5d4d79070f3e3cba))
* **ads:** Ignore ad events with no associated ad ([#4488](https://github.com/shaka-project/shaka-player/issues/4488)) ([e826eb8](https://github.com/shaka-project/shaka-player/commit/e826eb8eec207dd2ebd4d4ee1e44510ebff22b71)), closes [#4481](https://github.com/shaka-project/shaka-player/issues/4481)
* Allow add extra features to MediaSource.addSourceBuffer ([#4527](https://github.com/shaka-project/shaka-player/issues/4527)) ([4033be7](https://github.com/shaka-project/shaka-player/commit/4033be7c5b1d1c397d5a4840ef7333a26ca93983))
* Allow clearKey configuration in base64 or hex ([#4627](https://github.com/shaka-project/shaka-player/issues/4627)) ([29ffc89](https://github.com/shaka-project/shaka-player/commit/29ffc89a117e6f4285c0133dce555e44a1414228))
* Allow customization of HLS Live behavior ([#4578](https://github.com/shaka-project/shaka-player/issues/4578)) ([4914201](https://github.com/shaka-project/shaka-player/commit/4914201f86f6e683b64c7cc3338cdf67cee544cf))
* Allow playback of HLS Media Playlist with AAC by default ([#4564](https://github.com/shaka-project/shaka-player/issues/4564)) ([757b34e](https://github.com/shaka-project/shaka-player/commit/757b34e5959f14c9a5b5aed173cc99d98a794a40))
* Allow playback of HLS Media Playlist with RAW formats by default and support ID3 ([#4591](https://github.com/shaka-project/shaka-player/issues/4591)) ([18d8367](https://github.com/shaka-project/shaka-player/commit/18d836746e20164409c070c787e08b8bcf4da180))
* Automatic ABR quality restrictions based on screen size ([#4515](https://github.com/shaka-project/shaka-player/issues/4515)) ([b5935a8](https://github.com/shaka-project/shaka-player/commit/b5935a8a6b3b05c0c4cd10774a9625b0bbaf1cf6))
* **demo:** Demo visualizer for buffered ranges. ([#4417](https://github.com/shaka-project/shaka-player/issues/4417)) ([55d0a15](https://github.com/shaka-project/shaka-player/commit/55d0a1556a273b6af0da16197b424796a175adf8))
* enable uninstalling PatchedMediaKeysApple ([#4471](https://github.com/shaka-project/shaka-player/issues/4471)) ([7166f0c](https://github.com/shaka-project/shaka-player/commit/7166f0c1d09ad458abf0ee18e961c88f415afefc)), closes [#4469](https://github.com/shaka-project/shaka-player/issues/4469)
* **HLS:** Add support for EXT-X-SESSION-KEY tag ([#4655](https://github.com/shaka-project/shaka-player/issues/4655)) ([172c9f8](https://github.com/shaka-project/shaka-player/commit/172c9f834ab6575cf9cdb2f825abd9961b9ad7fb)), closes [#917](https://github.com/shaka-project/shaka-player/issues/917)
* **HLS:** allow customize live segments delay ([#4585](https://github.com/shaka-project/shaka-player/issues/4585)) ([1f558a8](https://github.com/shaka-project/shaka-player/commit/1f558a82c14e3d68a3a67cbb58879f2ab12549d0))
* **HLS:** Allow mp3 playback with mp4a.40.34 ([#4592](https://github.com/shaka-project/shaka-player/issues/4592)) ([8f892b1](https://github.com/shaka-project/shaka-player/commit/8f892b136f4cadce6a4d0585f88d4eccaf065f1b))
* **HLS:** Lazy-load HLS media playlists ([#4511](https://github.com/shaka-project/shaka-player/issues/4511)) ([b2f279d](https://github.com/shaka-project/shaka-player/commit/b2f279db1b111e3c8a02706551f466468621cd97)), closes [#1936](https://github.com/shaka-project/shaka-player/issues/1936)
* **HLS:** Support for HLS key rotation ([#4568](https://github.com/shaka-project/shaka-player/issues/4568)) ([3846eea](https://github.com/shaka-project/shaka-player/commit/3846eeac3f3777c35e61f479958015062f4275af)), closes [#741](https://github.com/shaka-project/shaka-player/issues/741)
* Improved LCEVC integration ([#4560](https://github.com/shaka-project/shaka-player/issues/4560)) ([50062f5](https://github.com/shaka-project/shaka-player/commit/50062f58adea248a403461b50b65c3a585de31b4))
* LCEVC Integration ([#4050](https://github.com/shaka-project/shaka-player/issues/4050)) ([284ea63](https://github.com/shaka-project/shaka-player/commit/284ea63a60178cbc87ce2fde769eb06bdb8fb8ea))
* New autoShowText config to change initial text visibility behavior ([#3421](https://github.com/shaka-project/shaka-player/issues/3421)) ([5c24410](https://github.com/shaka-project/shaka-player/commit/5c24410560d8afa13e6f2492590f13506419b59e))
* Parse and surface "prft" boxes as events ([#4389](https://github.com/shaka-project/shaka-player/issues/4389)) ([89777dd](https://github.com/shaka-project/shaka-player/commit/89777dd7043ae2b5fa213ab73e43f93482bb86d0)), closes [#4382](https://github.com/shaka-project/shaka-player/issues/4382)
* Parse ID3 metadata ([#4409](https://github.com/shaka-project/shaka-player/issues/4409)) ([95bbf72](https://github.com/shaka-project/shaka-player/commit/95bbf72f426f9df899193f6083197a77191c0c4f))
* Support HTML-escaped cues in VTT ([#4660](https://github.com/shaka-project/shaka-player/issues/4660)) ([2b8b387](https://github.com/shaka-project/shaka-player/commit/2b8b38788ab5b6fc297eaa3537e97bc348d2b389))
* TS parser improvements ([#4612](https://github.com/shaka-project/shaka-player/issues/4612)) ([5157b44](https://github.com/shaka-project/shaka-player/commit/5157b44b2d644ec9cdc13b03b4ac762ed8e0f183))


### Bug Fixes

* **ads:** Fix IMA crash when autoplay is rejected ([#4518](https://github.com/shaka-project/shaka-player/issues/4518)) ([d27f7d2](https://github.com/shaka-project/shaka-player/commit/d27f7d24bb3e1000fc489a6aa125fca359dd77e1)), closes [#4179](https://github.com/shaka-project/shaka-player/issues/4179)
* allow build without text ([#4506](https://github.com/shaka-project/shaka-player/issues/4506)) ([340b04a](https://github.com/shaka-project/shaka-player/commit/340b04ad4798c9b68ed9510ae71912192a61348b))
* Allow overriding special handling of 404s ([#4635](https://github.com/shaka-project/shaka-player/issues/4635)) ([427f126](https://github.com/shaka-project/shaka-player/commit/427f126ea3958541d69474505e1af0eb892d8dde)), closes [#4548](https://github.com/shaka-project/shaka-player/issues/4548)
* allow the playback on platforms when low latency APIs are not supported ([#4485](https://github.com/shaka-project/shaka-player/issues/4485)) ([c1753e1](https://github.com/shaka-project/shaka-player/commit/c1753e1a02881cfbbafd863eeb582411c45df92c))
* **cast:** Reduce size of Cast update messages ([#4644](https://github.com/shaka-project/shaka-player/issues/4644)) ([4e75ec6](https://github.com/shaka-project/shaka-player/commit/4e75ec64be76414b1d4945cbfbf7bc52b5ff3b01))
* **cea:** Fix not rendering CEA-608 Closed Captions ([#4683](https://github.com/shaka-project/shaka-player/issues/4683)) ([a489282](https://github.com/shaka-project/shaka-player/commit/a489282ff26796a55f96e035b55d331abfc14142)), closes [#4605](https://github.com/shaka-project/shaka-player/issues/4605) [#3659](https://github.com/shaka-project/shaka-player/issues/3659)
* check for negative rows before moving ([#4510](https://github.com/shaka-project/shaka-player/issues/4510)) ([b3621c2](https://github.com/shaka-project/shaka-player/commit/b3621c26a86897ba80c17b68f316e22aba61b30b)), closes [#4508](https://github.com/shaka-project/shaka-player/issues/4508)
* Content reload starttime with HLS on iOS ([#4575](https://github.com/shaka-project/shaka-player/issues/4575)) ([59d4360](https://github.com/shaka-project/shaka-player/commit/59d4360b686421f07aa0d7f28eb944f0c51ff5a2)), closes [#4244](https://github.com/shaka-project/shaka-player/issues/4244)
* DAI ID3 metadata parsing ([#4616](https://github.com/shaka-project/shaka-player/issues/4616)) ([0d67ecd](https://github.com/shaka-project/shaka-player/commit/0d67ecd7cba253eb1919ae6e15a80f34e08fc132))
* embed cc not shown when seeking back ([#4643](https://github.com/shaka-project/shaka-player/issues/4643)) ([2a6b0d0](https://github.com/shaka-project/shaka-player/commit/2a6b0d02e550cfa5749b838f5915b8b6cf7b2099)), closes [#4641](https://github.com/shaka-project/shaka-player/issues/4641)
* Filter unsupported H.264 streams in Xbox ([#4493](https://github.com/shaka-project/shaka-player/issues/4493)) ([8475214](https://github.com/shaka-project/shaka-player/commit/8475214bc46e8321f7b60a6fc7fabee484a40800))
* Fix bitmap-based cue size ([#4453](https://github.com/shaka-project/shaka-player/issues/4453)) ([4a197e1](https://github.com/shaka-project/shaka-player/commit/4a197e1288c8f20a950cf491041eca9dde7033cb))
* Fix choppy HLS startup ([#4553](https://github.com/shaka-project/shaka-player/issues/4553)) ([59ef54a](https://github.com/shaka-project/shaka-player/commit/59ef54a158e14da2f7c6ab04e1fd9409bf63c6f0)), closes [#4516](https://github.com/shaka-project/shaka-player/issues/4516)
* Fix detection of ac4, dts, and dolby h265 ([#4657](https://github.com/shaka-project/shaka-player/issues/4657)) ([319a358](https://github.com/shaka-project/shaka-player/commit/319a358b8dc1838a89d8977109cab4296a558841))
* Fix dispatch ID3 metadata when transmuxing AAC ([#4639](https://github.com/shaka-project/shaka-player/issues/4639)) ([bf813f2](https://github.com/shaka-project/shaka-player/commit/bf813f2553dfc56efa79b708c54cbddee0f3ee2e))
* Fix drm.keySystemsMapping config ([#4425](https://github.com/shaka-project/shaka-player/issues/4425)) ([d945084](https://github.com/shaka-project/shaka-player/commit/d9450846e11224e0b1add6cc20a64844d6c09fcf)), closes [#4422](https://github.com/shaka-project/shaka-player/issues/4422)
* Fix errors with TS segments on Chromecast ([#4543](https://github.com/shaka-project/shaka-player/issues/4543)) ([593c280](https://github.com/shaka-project/shaka-player/commit/593c280dd578ee19cbb6a47f22962ff7fdd2cb45))
* Fix hang when seeking to the last segment ([#4537](https://github.com/shaka-project/shaka-player/issues/4537)) ([19a4842](https://github.com/shaka-project/shaka-player/commit/19a48422901440ff88fbbedfea5803c6dda07127))
* Fix HLS dynamic to static transition ([a16b1ac](https://github.com/shaka-project/shaka-player/commit/a16b1ac8a4c8f367f65747fc789a7d8c160e29e3))
* Fix HLS dynamic to static transition ([#4483](https://github.com/shaka-project/shaka-player/issues/4483)) ([a16b1ac](https://github.com/shaka-project/shaka-player/commit/a16b1ac8a4c8f367f65747fc789a7d8c160e29e3)), closes [#4431](https://github.com/shaka-project/shaka-player/issues/4431)
* Fix HLS lazy-loading exception during update ([#4648](https://github.com/shaka-project/shaka-player/issues/4648)) ([777c27e](https://github.com/shaka-project/shaka-player/commit/777c27ee558d803b3f166a0ac8b9778b08196654)), closes [#4647](https://github.com/shaka-project/shaka-player/issues/4647)
* Fix HLS lazy-loading exception on switch ([#4645](https://github.com/shaka-project/shaka-player/issues/4645)) ([941ed4e](https://github.com/shaka-project/shaka-player/commit/941ed4ed286e4463d4973e994d322250678cfdcb)), closes [#4621](https://github.com/shaka-project/shaka-player/issues/4621)
* Fix HLS lazy-loading with DRM ([#4646](https://github.com/shaka-project/shaka-player/issues/4646)) ([a7f0be7](https://github.com/shaka-project/shaka-player/commit/a7f0be726d5b801ac2365bb0c9b6db9e576c964f)), closes [#4622](https://github.com/shaka-project/shaka-player/issues/4622)
* Fix HLS live stream subtitle offsets ([#4586](https://github.com/shaka-project/shaka-player/issues/4586)) ([3b9af2e](https://github.com/shaka-project/shaka-player/commit/3b9af2efa6be06c8c8a13e5d715828e2875d75d7))
* Fix ID3 parsing in TS segments ([#4609](https://github.com/shaka-project/shaka-player/issues/4609)) ([3b534fd](https://github.com/shaka-project/shaka-player/commit/3b534fd405ad3254d37a86fd1895ceeb96dc8094))
* Fix in-band key rotation on Xbox One ([#4478](https://github.com/shaka-project/shaka-player/issues/4478)) ([4e93311](https://github.com/shaka-project/shaka-player/commit/4e933116984beb630d31ce7a0b8c9bc6f8b48c06)), closes [#4401](https://github.com/shaka-project/shaka-player/issues/4401)
* Fix metadata assert when the ID3 is future (coming in a previous segment) ([#4640](https://github.com/shaka-project/shaka-player/issues/4640)) ([216bdd7](https://github.com/shaka-project/shaka-player/commit/216bdd7657d7be8bb33f71c3a62f649ecc25ace5))
* Fix multi-period DASH with descriptive audio ([#4629](https://github.com/shaka-project/shaka-player/issues/4629)) ([81ccd5c](https://github.com/shaka-project/shaka-player/commit/81ccd5c73ba5e021466b82c05f8b607b0c345849)), closes [#4500](https://github.com/shaka-project/shaka-player/issues/4500)
* fix support clear and encrypted periods ([#4606](https://github.com/shaka-project/shaka-player/issues/4606)) ([6256db3](https://github.com/shaka-project/shaka-player/commit/6256db3af5065ea1db1951ea7583d4608ce5e28d))
* Fix vanishing tracks while offline ([#4426](https://github.com/shaka-project/shaka-player/issues/4426)) ([c935cc1](https://github.com/shaka-project/shaka-player/commit/c935cc17703297a44b3ce3bda75d8f2ea37f4147)), closes [#4408](https://github.com/shaka-project/shaka-player/issues/4408)
* Fixed LCEVC decode breaking dependencies issue and read me addition ([#4565](https://github.com/shaka-project/shaka-player/issues/4565)) ([3c75d1a](https://github.com/shaka-project/shaka-player/commit/3c75d1a71aea039c802555031fffbf3cad77f6fc))
* focus on first element when back to the settings menu ([#4653](https://github.com/shaka-project/shaka-player/issues/4653)) ([b40b6e7](https://github.com/shaka-project/shaka-player/commit/b40b6e7669d4ccf8677a6d262767f3e155eb02e6)), closes [#4652](https://github.com/shaka-project/shaka-player/issues/4652)
* Force using mcap polyfill on EOS browsers ([#4630](https://github.com/shaka-project/shaka-player/issues/4630)) ([6191d58](https://github.com/shaka-project/shaka-player/commit/6191d5894deb679ed68da54357dc1f6831edeb23))
* **HLS:** Add a guard on closeSegmentIndex ([#4615](https://github.com/shaka-project/shaka-player/issues/4615)) ([57ce56b](https://github.com/shaka-project/shaka-player/commit/57ce56b8d2bd5d2b1626b38594e6d54defd10255))
* **HLS:** Fix detection of WebVTT subtitles in HLS by extension ([#4663](https://github.com/shaka-project/shaka-player/issues/4663)) ([8f698c6](https://github.com/shaka-project/shaka-player/commit/8f698c6eaad6e1019f388e2d36f28883a142ddfb))
* **HLS:** Fix lazy-loading of TS content ([#4601](https://github.com/shaka-project/shaka-player/issues/4601)) ([dd7356d](https://github.com/shaka-project/shaka-player/commit/dd7356d0e0655f59792b3f992841d4c0c8d5540a))
* **hls:** Fix raw format detection when the main playlist hasn't type ([#4583](https://github.com/shaka-project/shaka-player/issues/4583)) ([d319718](https://github.com/shaka-project/shaka-player/commit/d319718eded6e36f4fc705588de84a301a428d49))
* **hls:** Fix single-variant HLS streams ([#4573](https://github.com/shaka-project/shaka-player/issues/4573)) ([62906bd](https://github.com/shaka-project/shaka-player/commit/62906bdc9a26456d213a0c5d33f00b4454cdfb5b)), closes [#1936](https://github.com/shaka-project/shaka-player/issues/1936) [#3536](https://github.com/shaka-project/shaka-player/issues/3536)
* **HLS:** Infer missing codecs from config ([#4656](https://github.com/shaka-project/shaka-player/issues/4656)) ([08fc7dd](https://github.com/shaka-project/shaka-player/commit/08fc7dd717390c61dcc3304c58bfff5c87c77833))
* **HLS:** Return 0-0 seek range until fully loaded ([#4590](https://github.com/shaka-project/shaka-player/issues/4590)) ([bf50ada](https://github.com/shaka-project/shaka-player/commit/bf50ada6874879b33ac1acd34ec7e5375eb4c45d))
* Limit key ids to 32 characters ([#4614](https://github.com/shaka-project/shaka-player/issues/4614)) ([9531b07](https://github.com/shaka-project/shaka-player/commit/9531b07296163d8cc5c8416f0baa4ffd29c0a90d))
* Make XML parsing secure ([#4598](https://github.com/shaka-project/shaka-player/issues/4598)) ([a731eba](https://github.com/shaka-project/shaka-player/commit/a731eba804ae1a3f3ee3061550fa43ea82e06313))
* Missing AES-128 key of last HLS segment ([#4519](https://github.com/shaka-project/shaka-player/issues/4519)) ([3d0f752](https://github.com/shaka-project/shaka-player/commit/3d0f752c7d0677f750dbbd9bcd2895358358628f)), closes [#4517](https://github.com/shaka-project/shaka-player/issues/4517)
* **offline:** Add storage muxer init timeout ([#4566](https://github.com/shaka-project/shaka-player/issues/4566)) ([d4d3740](https://github.com/shaka-project/shaka-player/commit/d4d37407c87b7c032a16679e96b318146bbdee22))
* **playhead:** Safeguard getStallsDetected as stallDetector can be null ([#4581](https://github.com/shaka-project/shaka-player/issues/4581)) ([21ceaca](https://github.com/shaka-project/shaka-player/commit/21ceacab9e9577c18cef7f6c76f57f39eca3dca9))
* Resolve load failures for TS-based content on Android-based Cast devices ([#4569](https://github.com/shaka-project/shaka-player/issues/4569)). ([#4570](https://github.com/shaka-project/shaka-player/issues/4570)) ([65903aa](https://github.com/shaka-project/shaka-player/commit/65903aa27b5723632ff16a92059cb20c4879fc59))
* Respect existing app usage of Cast SDK ([#4523](https://github.com/shaka-project/shaka-player/issues/4523)) ([8d3d556](https://github.com/shaka-project/shaka-player/commit/8d3d556edaa817af686e1577f0a0bad92d0c74d4)), closes [#4521](https://github.com/shaka-project/shaka-player/issues/4521)
* return width and height in the stats when we are using src= ([#4435](https://github.com/shaka-project/shaka-player/issues/4435)) ([9bbfb57](https://github.com/shaka-project/shaka-player/commit/9bbfb57cb4e2c0653e6eb5681e10714cb939bad9))
* Simplify transmuxer to allow more mimetypes in the future ([#4642](https://github.com/shaka-project/shaka-player/issues/4642)) ([a14e84b](https://github.com/shaka-project/shaka-player/commit/a14e84b5c9a6feb8f7f2efcbae52fe9691d48412))
* **ttml:** Default TTML background color to transparent if unspecified ([#4496](https://github.com/shaka-project/shaka-player/issues/4496)) ([32b0a90](https://github.com/shaka-project/shaka-player/commit/32b0a90a8c583bba03a3d7b035a1244d325e3da6)), closes [#4468](https://github.com/shaka-project/shaka-player/issues/4468)
* **UI:** Ad position and ad counter are too close to each other ([#4416](https://github.com/shaka-project/shaka-player/issues/4416)) ([8376410](https://github.com/shaka-project/shaka-player/commit/83764104277363b6ce0e05d8e53449ff454c6f0e))
* **ui:** Fix exception on screen rotation if fullscreen is not supported ([#4669](https://github.com/shaka-project/shaka-player/issues/4669)) ([fd93f6a](https://github.com/shaka-project/shaka-player/commit/fd93f6ae1bc917061c035abcfb835855e336bb06))
* Virgin Media set top box is incorrectly categorized as Apple/Safari ([df79470](https://github.com/shaka-project/shaka-player/commit/df79470af088089f8beba2f44a236593820d655a))
* WebVTT line not correctly positioned in UITextDisplayer ([#4567](https://github.com/shaka-project/shaka-player/issues/4567)) ([#4682](https://github.com/shaka-project/shaka-player/issues/4682)) ([140aefe](https://github.com/shaka-project/shaka-player/commit/140aefee04718faa631ba090d6313e372b608fc1))

## [4.2.0](https://github.com/shaka-project/shaka-player/compare/v4.1.0...v4.2.0) (2022-08-16)


### Features

* add Amazon Fire TV platform support ([#4375](https://github.com/shaka-project/shaka-player/issues/4375)) ([5102dac](https://github.com/shaka-project/shaka-player/commit/5102dac96cb1a749fefeb1f6b7a24c13f6b1077b))
* Add support for Modern EME and legacy Apple Media Keys for FairPlay ([#4309](https://github.com/shaka-project/shaka-player/issues/4309)) ([5441f93](https://github.com/shaka-project/shaka-player/commit/5441f932fd3da20f26da162cc0d49d0470689b41))
* Automatic ABR quality restrictions based on size ([#4404](https://github.com/shaka-project/shaka-player/issues/4404)) ([cfe8af5](https://github.com/shaka-project/shaka-player/commit/cfe8af5ff928fe7466b103429a6325917579ce70)), closes [#2333](https://github.com/shaka-project/shaka-player/issues/2333)
* **hls:** Support AES-128 in HLS ([#4386](https://github.com/shaka-project/shaka-player/issues/4386)) ([6194021](https://github.com/shaka-project/shaka-player/commit/6194021a3d4ea5dae22ade6713bb077875a4ee9d)), closes [#850](https://github.com/shaka-project/shaka-player/issues/850)
* Improve gap-detection robustness ([#4399](https://github.com/shaka-project/shaka-player/issues/4399)) ([4293a14](https://github.com/shaka-project/shaka-player/commit/4293a1421ada4b189d64b8c3f87a7599bc7b1a8f))
* Upgrade eme-encryption-scheme-polyfill to support ChromeCast version of PlayReady ([#4378](https://github.com/shaka-project/shaka-player/issues/4378)) ([e6b6d7c](https://github.com/shaka-project/shaka-player/commit/e6b6d7c24bee4138b6bb2735e3c9a4dc885a6cf6))
* **webvtt:** add support for karaoke style text in WebVTT ([#4274](https://github.com/shaka-project/shaka-player/issues/4274)) ([60af516](https://github.com/shaka-project/shaka-player/commit/60af5165207d39ebe26d536b009521192ab8cad9))


### Bug Fixes

* Add fallback to TextDecoder and TextEncoder [#4324](https://github.com/shaka-project/shaka-player/issues/4324) ([5b18069](https://github.com/shaka-project/shaka-player/commit/5b180694309f1cc01b2997cd0366154135f8acd8))
* add strictMissingProperties suppressions to unblock strict missing properties on union types. ([#4371](https://github.com/shaka-project/shaka-player/issues/4371)) ([b361948](https://github.com/shaka-project/shaka-player/commit/b36194878e26a22b522a6cf1dba07e9fc5cd341d))
* Debug buffer placement ([#4345](https://github.com/shaka-project/shaka-player/issues/4345)) ([47fa309](https://github.com/shaka-project/shaka-player/commit/47fa3093e1462d0bcca87238dc4886b9e2c1f8f4))
* **demo:** allow switch between UITextDisplayer and SimpleTextDisplayer ([#4275](https://github.com/shaka-project/shaka-player/issues/4275)) ([28689f3](https://github.com/shaka-project/shaka-player/commit/28689f38fb7cc8f3b85b6b1eb2337a1779e8ee95))
* **demo:** erroneous FairPlay keysystem in demo ([#4276](https://github.com/shaka-project/shaka-player/issues/4276)) ([8719bdc](https://github.com/shaka-project/shaka-player/commit/8719bdc0defd7956ec9fad934525477a603744a0))
* exception if on early adError ([#4362](https://github.com/shaka-project/shaka-player/issues/4362)) ([3c92f05](https://github.com/shaka-project/shaka-player/commit/3c92f0598e6c1628ff50d980a842dd40b2b56813)), closes [#4004](https://github.com/shaka-project/shaka-player/issues/4004)
* Fix EOS set-top box being identified as Apple. ([#4310](https://github.com/shaka-project/shaka-player/issues/4310)) ([7c2c4be](https://github.com/shaka-project/shaka-player/commit/7c2c4be2ae946c4cf270717f852b0d95b498266e))
* Fix getVideoPlaybackQuality in WebOS 3 ([#4316](https://github.com/shaka-project/shaka-player/issues/4316)) ([5561111](https://github.com/shaka-project/shaka-player/commit/556111143dfccbc7348fc15792df75bc35fea465))
* Fix key ID byteswapping for PlayReady on PS4 ([#4377](https://github.com/shaka-project/shaka-player/issues/4377)) ([25fd4f4](https://github.com/shaka-project/shaka-player/commit/25fd4f4af6ddd8953c4bc2da4a2d9eb1144c3fb9))
* Fix MediaCapabilities polyfill on Playstation 4 ([#4320](https://github.com/shaka-project/shaka-player/issues/4320)) ([0335b2a](https://github.com/shaka-project/shaka-player/commit/0335b2af2efea6ceda83e536e12094e4cc942a25))
* Fix MediaCapabilities polyfill on Tizen and WebOS ([#4396](https://github.com/shaka-project/shaka-player/issues/4396)) ([eb2aed8](https://github.com/shaka-project/shaka-player/commit/eb2aed825e84142f9fb9ddb3e69ebc333127c295)), closes [#4383](https://github.com/shaka-project/shaka-player/issues/4383) [#4357](https://github.com/shaka-project/shaka-player/issues/4357)
* Fix segment index assertions with DAI ([#4348](https://github.com/shaka-project/shaka-player/issues/4348)) ([c2b3853](https://github.com/shaka-project/shaka-player/commit/c2b3853a56e816c97fab57f961f295b7272e410e))
* Fix TextDecoder fallback and browser support check ([#4403](https://github.com/shaka-project/shaka-player/issues/4403)) ([04fc0d4](https://github.com/shaka-project/shaka-player/commit/04fc0d47c3895f294401b588ed49cc4360f31be1))
* Fix UI captions icon state ([#4384](https://github.com/shaka-project/shaka-player/issues/4384)) ([d462633](https://github.com/shaka-project/shaka-player/commit/d46263333ba3de68707d521b997c40c5ba492fda)), closes [#4358](https://github.com/shaka-project/shaka-player/issues/4358)
* Fix VP9 codec checks on Mac Firefox ([#4391](https://github.com/shaka-project/shaka-player/issues/4391)) ([b6ab769](https://github.com/shaka-project/shaka-player/commit/b6ab76976211852e96b2883562166a5e1e4dd0f2))
* **hls:** Fix AV sync issues, fallback to sequence numbers if PROGRAM-DATE-TIME ignored ([#4289](https://github.com/shaka-project/shaka-player/issues/4289)) ([314a987](https://github.com/shaka-project/shaka-player/commit/314a987ecf85b47cc8a6cef08f390ef817e11c49)), closes [#4287](https://github.com/shaka-project/shaka-player/issues/4287)
* New EME polyfill fixes EME/MCap issues on some smart TVs ([#4279](https://github.com/shaka-project/shaka-player/issues/4279)) ([db1b20e](https://github.com/shaka-project/shaka-player/commit/db1b20ec77f74472dd24f493f2a26c02b17927bc))
* Populate track's spatialAudio property ([#4291](https://github.com/shaka-project/shaka-player/issues/4291)) ([713f461](https://github.com/shaka-project/shaka-player/commit/713f461c62b23680557f8d6c4b9c3126bb604f9e))
* Remove IE 11 from default browsers for Windows ([#4272](https://github.com/shaka-project/shaka-player/issues/4272)) ([490b06c](https://github.com/shaka-project/shaka-player/commit/490b06cd45d09c7567056535f4b8dc6f3e2e5733)), closes [#4271](https://github.com/shaka-project/shaka-player/issues/4271)
* **text:** Fix cue region rendering in UI ([#4412](https://github.com/shaka-project/shaka-player/issues/4412)) ([b1f46db](https://github.com/shaka-project/shaka-player/commit/b1f46dbc3a685b0216600835e24fd13c504e1b62)), closes [#4381](https://github.com/shaka-project/shaka-player/issues/4381)
* **text:** Fix TTML render timing and line break issues for native display ([122f223](https://github.com/shaka-project/shaka-player/commit/122f223d19732bf5977ab8a5c93bbc4d934da1d7))
* Update main branch Cast receiver ID ([#4364](https://github.com/shaka-project/shaka-player/issues/4364)) ([46b27f1](https://github.com/shaka-project/shaka-player/commit/46b27f19e099d44ab3929222da7a3bcb41bdb230))
* Use middle segment when guessing MIME type on HLS ([#4269](https://github.com/shaka-project/shaka-player/issues/4269)) ([#4270](https://github.com/shaka-project/shaka-player/issues/4270)) ([3d27d2a](https://github.com/shaka-project/shaka-player/commit/3d27d2a2cfeb8fa21f3415baaf013567dcccf480))
* VTT Cue Parsing On PlayStation 4 ([#4340](https://github.com/shaka-project/shaka-player/issues/4340)) ([b5da41e](https://github.com/shaka-project/shaka-player/commit/b5da41ed80b96e8edae970c39dd5fac7348a9a55)), closes [#4321](https://github.com/shaka-project/shaka-player/issues/4321)

## [4.1.0](https://github.com/shaka-project/shaka-player/compare/v4.0.0...v4.1.0) (2022-06-02)


### Features

* Add Id to chapters ([#4184](https://github.com/shaka-project/shaka-player/issues/4184)) ([5ca3271](https://github.com/shaka-project/shaka-player/commit/5ca32712e375ba875be86827ea1efaaa5e3c0035))
* Add keySystemsMapping to drm config ([#4254](https://github.com/shaka-project/shaka-player/issues/4254)) ([5e107d5](https://github.com/shaka-project/shaka-player/commit/5e107d584f824e66ab3e5e07f9d833f6dc456d14)), closes [#4243](https://github.com/shaka-project/shaka-player/issues/4243)
* add listenable events for playback stall detection and gap jumping ([#4249](https://github.com/shaka-project/shaka-player/issues/4249)) ([5987458](https://github.com/shaka-project/shaka-player/commit/5987458e445cf21f91bf4833396edd63d5f69765))
* Add support to text-shadow in VTT parser ([#4257](https://github.com/shaka-project/shaka-player/issues/4257)) ([62bda2c](https://github.com/shaka-project/shaka-player/commit/62bda2cd36c6d49d08c10757bfe5869b5be54b88))
* **cast:** Add Android receiver support ([#4183](https://github.com/shaka-project/shaka-player/issues/4183)) ([dbba571](https://github.com/shaka-project/shaka-player/commit/dbba571c6bb7e99a99469ffb695f59a590d44118))
* **hls:** Add support for EXT-X-GAP ([#4208](https://github.com/shaka-project/shaka-player/issues/4208)) ([14e61a7](https://github.com/shaka-project/shaka-player/commit/14e61a7368ddbd66c4b10f3b0475840cc50512bd)), closes [#1308](https://github.com/shaka-project/shaka-player/issues/1308)
* Temporarily disable the active variant from NETWORK HTTP_ERROR ([#4189](https://github.com/shaka-project/shaka-player/issues/4189)) ([b57279d](https://github.com/shaka-project/shaka-player/commit/b57279d39c24d3b2568c4b62338524ecc23423ad)), closes [#4121](https://github.com/shaka-project/shaka-player/issues/4121) [#1542](https://github.com/shaka-project/shaka-player/issues/1542) [#2541](https://github.com/shaka-project/shaka-player/issues/2541)
* **UI:** Added keyboardSeekDistance config to UI ([#4246](https://github.com/shaka-project/shaka-player/issues/4246)) ([6084ca6](https://github.com/shaka-project/shaka-player/commit/6084ca6395fbe3d5a97fa92137b8bb51f15c89f8))


### Bug Fixes

* **abr:** use Network Info API in ABR getBandwidthEstimate ([#4263](https://github.com/shaka-project/shaka-player/issues/4263)) ([4fc7a48](https://github.com/shaka-project/shaka-player/commit/4fc7a4893fd081d4dafa26a2034361afd7b7e6ed))
* Do not report MANIFEST RESTRICTIONS_CANNOT_BE_MET error twice ([#4194](https://github.com/shaka-project/shaka-player/issues/4194)) ([08589e8](https://github.com/shaka-project/shaka-player/commit/08589e8fb27f3f73f64204e7d3a2387f3c197d84)), closes [#4190](https://github.com/shaka-project/shaka-player/issues/4190)
* Don't send drmsessionupdate after unload ([#4248](https://github.com/shaka-project/shaka-player/issues/4248)) ([60af9ad](https://github.com/shaka-project/shaka-player/commit/60af9ad596e5c2cb31d1e7bb616e415cf46ca761))
* **fairplay:** Re-add initDataTransform config ([#4231](https://github.com/shaka-project/shaka-player/issues/4231)) ([ff310e9](https://github.com/shaka-project/shaka-player/commit/ff310e91e564bcc4be340c47bf1be81a5323765a))
* Fix audio mime type in multiplexed HLS stream ([#4241](https://github.com/shaka-project/shaka-player/issues/4241)) ([4e4e92e](https://github.com/shaka-project/shaka-player/commit/4e4e92e98da357285547859a98e6b3fe75d1904f))
* Fix event listener leaks in Player ([#4229](https://github.com/shaka-project/shaka-player/issues/4229)) ([a5d3568](https://github.com/shaka-project/shaka-player/commit/a5d356874ba90069ca5a86be1979a5904a1150e8))
* Fix exception with streaming.startAtSegmentBoundary ([#4216](https://github.com/shaka-project/shaka-player/issues/4216)) ([426a19c](https://github.com/shaka-project/shaka-player/commit/426a19c8e7ff188390e7430fb02f3cfcb79cc017)), closes [#4188](https://github.com/shaka-project/shaka-player/issues/4188)
* Fix PERIOD_FLATTENING_FAILED error when periods have different base sample types ([#4206](https://github.com/shaka-project/shaka-player/issues/4206)) ([b757a81](https://github.com/shaka-project/shaka-player/commit/b757a81902a2159b217e7cb6a1445ab6d4d69bf4)), closes [#4202](https://github.com/shaka-project/shaka-player/issues/4202)
* Fix VTT cue timing in HLS ([#4217](https://github.com/shaka-project/shaka-player/issues/4217)) ([5818260](https://github.com/shaka-project/shaka-player/commit/58182605a7da3c18a7331828c319c88446a13d52)), closes [#4191](https://github.com/shaka-project/shaka-player/issues/4191)
* **hls:** Fix av1 codec selection in HLS. ([#4203](https://github.com/shaka-project/shaka-player/issues/4203)) ([5e13495](https://github.com/shaka-project/shaka-player/commit/5e1349570d64c17e6ca1fcdc5ffde1076ea9a999))
* **HLS:** Fix duplicate hinted segments ([#4258](https://github.com/shaka-project/shaka-player/issues/4258)) ([9171f73](https://github.com/shaka-project/shaka-player/commit/9171f733e8de0b811ebac71d5ddbe0cb1ff7c75b)), closes [#4223](https://github.com/shaka-project/shaka-player/issues/4223)
* **hls:** Fix X-PRELOAD-HINT failure with LL mode off ([#4212](https://github.com/shaka-project/shaka-player/issues/4212)) ([86497a5](https://github.com/shaka-project/shaka-player/commit/86497a5089e272ed682f017f5ed9135108be5a65)), closes [#4185](https://github.com/shaka-project/shaka-player/issues/4185)
* **ui:** Widen touchable button area ([#3249](https://github.com/shaka-project/shaka-player/issues/3249)) ([6c0283e](https://github.com/shaka-project/shaka-player/commit/6c0283e7d040fd0df9383454b174a7ceb2678c89))
* Upgrade mux.js to version that emits partial ID3 when malformed ([#4259](https://github.com/shaka-project/shaka-player/issues/4259)) ([dc88fe0](https://github.com/shaka-project/shaka-player/commit/dc88fe0814f82aa447a3fa8f7098c85621faf9c6)), closes [#3761](https://github.com/shaka-project/shaka-player/issues/3761)
* Wait for chapters track to be loaded ([#4228](https://github.com/shaka-project/shaka-player/issues/4228)) ([80e81f1](https://github.com/shaka-project/shaka-player/commit/80e81f139129dbe1c797ee07fedc1217b8790b53)), closes [#4186](https://github.com/shaka-project/shaka-player/issues/4186)

## [4.0.0](https://github.com/shaka-project/shaka-player/compare/v3.3.0...v4.0.0) (2022-04-30)


### âš  BREAKING CHANGES

* Remove small/large gap config, always jump gaps (#4125)
* **config:** `manifest.dash.defaultPresentationDelay` has been replaced by `manifest.defaultPresentationDelay` (deprecated in v3.0.0)
* **config:** Configuration of factories should be plain factory functions, not constructors; these will not be invoked with `new` (deprecated in v3.1.0)
* **player:** `shaka.Player.prototype.addTextTrack()` has been replaced by `addTextTrackAsync()`, which returns a `Promise` (deprecated in v3.1.0)
* **ui:** `shaka.ui.TrackLabelFormat` has been renamed to `shaka.ui.Overlay.TrackLabelFormat` (deprecated in v3.1.0)
* **ui:** `shaka.ui.FailReasonCode` has been renamed to `shaka.ui.Overlay.FailReasonCode` (deprecated in v3.1.0)
* **offline:** `shaka.offline.Storage.prototype.store()` returns `AbortableOperation` instead of `Promise` (deprecated in v3.0.0)
* **offline:** `shaka.offline.Storage.prototype.getStoreInProgress()` has been removed; concurrent operations are supported, so callers don't need to check this (deprecated in v3.0.0)
* `shaka.util.Uint8ArrayUtils.equal` has been replaced by `shaka.util.BufferUtils.equal`, which can handle multiple types of buffers (deprecated in v3.0.0)
* **manifest:** `shaka.media.SegmentIndex.prototype.destroy()` has been replaced by `release()`, which is synchronous (deprecated in v3.0.0)
* **manifest:** `shaka.media.SegmentIterator.prototype.seek()`, which mutates the iterator, has been replaced by `shaka.media.SegmentIndex.getIteratorForTime()` (deprecated in v3.1.0)
* **manifest:** `shaka.media.SegmentIndex.prototype.merge()` has become private; use `mergeAndEvict()` instead (deprecated in v3.2.0)
* **plugin:** `AbrManager` plugins must implement the `playbackRateChanged()` method (deprecated in v3.0.0)
* **plugin:** `shaka.extern.Cue.prototype.spacer` has been replaced by the more clearly-named `lineBreak` (deprecated in v3.1.0)
* **plugin:** `IUIElement` plugins must have a `release()` method (not `destroy()`) (deprecated in v3.0.0)
* Remove deprecated features, update upgrade guides (#4089)
* Remove support for Safari 12 and iOS 12 (#4112)
* **hls:** HLS disabled in old browsers/platforms due to incompatibilities (#3964)

### Features

* `shaka.util.Uint8ArrayUtils.equal` has been replaced by `shaka.util.BufferUtils.equal`, which can handle multiple types of buffers (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Add Dockerfile and docker build instructions ([925de19](https://github.com/shaka-project/shaka-player/commit/925de1995eeb22863e8d4e92d720465834619288))
* add modern EME support for FairPlay ([#3776](https://github.com/shaka-project/shaka-player/issues/3776)) ([6d76a13](https://github.com/shaka-project/shaka-player/commit/6d76a135e5128dfd47653acea025d0a264d121d5))
* add new methods to FairPlayUtils ([#4029](https://github.com/shaka-project/shaka-player/issues/4029)) ([f1eeac1](https://github.com/shaka-project/shaka-player/commit/f1eeac1efb618aa7202b17b67c43056714f8da2f))
* add option for segment-relative VTT timings ([#4083](https://github.com/shaka-project/shaka-player/issues/4083)) ([f382cc7](https://github.com/shaka-project/shaka-player/commit/f382cc702be6cc28266fe61a33e43573cb22be57))
* Add separate audio and video MIME types to Track API ([#3892](https://github.com/shaka-project/shaka-player/issues/3892)) ([74c491d](https://github.com/shaka-project/shaka-player/commit/74c491d2e0042f62385813f04e74517cf00fcade)), closes [#3888](https://github.com/shaka-project/shaka-player/issues/3888)
* Allow WebP and AVIF image streams ([#3856](https://github.com/shaka-project/shaka-player/issues/3856)) ([9f3fb46](https://github.com/shaka-project/shaka-player/commit/9f3fb46d371d52f58bc9a7fc5beefe51890879ed)), closes [#3845](https://github.com/shaka-project/shaka-player/issues/3845)
* **config:** `manifest.dash.defaultPresentationDelay` has been replaced by `manifest.defaultPresentationDelay` (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **config:** Configuration of factories should be plain factory functions, not constructors; these will not be invoked with `new` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **dash:** Construct ClearKey PSSH based on MPD ContentProtection ([#4104](https://github.com/shaka-project/shaka-player/issues/4104)) ([b83b412](https://github.com/shaka-project/shaka-player/commit/b83b4120f46ae94e3ce194f43b13517b7a736f07))
* **dash:** Parse ClearKey license URL in MPD ([#4066](https://github.com/shaka-project/shaka-player/issues/4066)) ([19e24b1](https://github.com/shaka-project/shaka-player/commit/19e24b1d741b4ba6946011748be8b759b4b71773))
* **demo:** Add Apple Advanced HLS Stream (TS) with raw AAC ([#3933](https://github.com/shaka-project/shaka-player/issues/3933)) ([1becadf](https://github.com/shaka-project/shaka-player/commit/1becadfc93ca06d64d0c9ace37c80213268a1675))
* **demo:** Added demo asset with raw AAC. ([014c7b3](https://github.com/shaka-project/shaka-player/commit/014c7b302b292a22f62d4e01230b927b33bc51da)), closes [#2337](https://github.com/shaka-project/shaka-player/issues/2337)
* **DRM:** add drmInfo to license requests ([#4030](https://github.com/shaka-project/shaka-player/issues/4030)) ([abe846e](https://github.com/shaka-project/shaka-player/commit/abe846e1a3456b029822ea42eb0520dec547fda6))
* **DRM:** add initData and initDataType to license requests ([#4039](https://github.com/shaka-project/shaka-player/issues/4039)) ([bdc5ea7](https://github.com/shaka-project/shaka-player/commit/bdc5ea767ebe55bb0b18dd106e269ab3fecd6d00))
* **HLS:** Containerless format support ([36d0b54](https://github.com/shaka-project/shaka-player/commit/36d0b5484fad68dc1d640fbddf2fae3e1eb7169b)), closes [#2337](https://github.com/shaka-project/shaka-player/issues/2337)
* **hls:** HLS disabled in old browsers/platforms due to incompatibilities ([#3964](https://github.com/shaka-project/shaka-player/issues/3964)) ([0daa00f](https://github.com/shaka-project/shaka-player/commit/0daa00fc7f074c1c86968ed0fcd84bc30254ee6d))
* **hls:** make a head request if hls subtitles have no extension ([#4140](https://github.com/shaka-project/shaka-player/issues/4140)) ([19e12b5](https://github.com/shaka-project/shaka-player/commit/19e12b5e282e661a9a17a6bfbb87c565faf2bc6e))
* **hls:** parse EXT-X-GAP ([#4134](https://github.com/shaka-project/shaka-player/issues/4134)) ([42eecc8](https://github.com/shaka-project/shaka-player/commit/42eecc84f992ca6a680c3a5fd46d1c300fe92a72))
* **HLS:** Re-add TS support to Safari ([#4097](https://github.com/shaka-project/shaka-player/issues/4097)) ([8a3bed7](https://github.com/shaka-project/shaka-player/commit/8a3bed710c104c9729fec2072318e50f9fe15ab2))
* **hls:** Read EXT-X-PROGRAM-DATE-TIME ([#4034](https://github.com/shaka-project/shaka-player/issues/4034)) ([89409ce](https://github.com/shaka-project/shaka-player/commit/89409cee3eaeb6764dbc191b7408bf45eecdced3)), closes [#2337](https://github.com/shaka-project/shaka-player/issues/2337)
* **manifest:** `shaka.media.SegmentIndex.prototype.destroy()` has been replaced by `release()`, which is synchronous (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **manifest:** `shaka.media.SegmentIndex.prototype.merge()` has become private; use `mergeAndEvict()` instead (deprecated in v3.2.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **manifest:** `shaka.media.SegmentIterator.prototype.seek()`, which mutates the iterator, has been replaced by `shaka.media.SegmentIndex.getIteratorForTime()` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **offline:** `shaka.offline.Storage.prototype.getStoreInProgress()` has been removed; concurrent operations are supported, so callers don't need to check this (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **offline:** `shaka.offline.Storage.prototype.store()` returns `AbortableOperation` instead of `Promise` (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **offline:** improve the speed of offline downloads ([#4168](https://github.com/shaka-project/shaka-player/issues/4168)) ([73f6de3](https://github.com/shaka-project/shaka-player/commit/73f6de3e01ae4ed3b86302add7ee16c86c3b9b78))
* only polyfill MCap for non Android-based Cast devices. ([#4170](https://github.com/shaka-project/shaka-player/issues/4170)) ([11321d8](https://github.com/shaka-project/shaka-player/commit/11321d8f26b01412fa5173aa6efcf777186fa7a0))
* **player:** `shaka.Player.prototype.addTextTrack()` has been replaced by `addTextTrackAsync()`, which returns a `Promise` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **plugin:** `AbrManager` plugins must implement the `playbackRateChanged()` method (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **plugin:** `IUIElement` plugins must have a `release()` method (not `destroy()`) (deprecated in v3.0.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **plugin:** `shaka.extern.Cue.prototype.spacer` has been replaced by the more clearly-named `lineBreak` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Public release of Sindarin (sjn) translation easter egg ([#4033](https://github.com/shaka-project/shaka-player/issues/4033)) ([9029d06](https://github.com/shaka-project/shaka-player/commit/9029d0677e0e0325e0dbe939907ba60ecec74c92))
* Remove deprecated features, update upgrade guides ([#4089](https://github.com/shaka-project/shaka-player/issues/4089)) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* Remove small/large gap config, always jump gaps ([#4125](https://github.com/shaka-project/shaka-player/issues/4125)) ([0fd1999](https://github.com/shaka-project/shaka-player/commit/0fd19997dde7b03bad7464a82dc86d7b2cd8a304))
* Remove support for Safari 12 and iOS 12 ([#4112](https://github.com/shaka-project/shaka-player/issues/4112)) ([8bb7044](https://github.com/shaka-project/shaka-player/commit/8bb70449d33c31a0e7fc312260dc001cc9e3a792))
* **ui:** `shaka.ui.FailReasonCode` has been renamed to `shaka.ui.Overlay.FailReasonCode` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **ui:** `shaka.ui.TrackLabelFormat` has been renamed to `shaka.ui.Overlay.TrackLabelFormat` (deprecated in v3.1.0) ([ac5acc8](https://github.com/shaka-project/shaka-player/commit/ac5acc80cb8d2bcb58455e8f66f7e1c2d18b0a3a))
* **ui:** Add quality selection for audio-only content ([#3649](https://github.com/shaka-project/shaka-player/issues/3649)) ([adc3502](https://github.com/shaka-project/shaka-player/commit/adc3502d55f39eaca30f3c42e17961ec7d681c80)), closes [#2071](https://github.com/shaka-project/shaka-player/issues/2071)
* **UI:** Add video fullscreen support for iOS ([#3853](https://github.com/shaka-project/shaka-player/issues/3853)) ([8d1b5e6](https://github.com/shaka-project/shaka-player/commit/8d1b5e6b07e979bd641da0b2b53c5f8e872422ad)), closes [#3832](https://github.com/shaka-project/shaka-player/issues/3832)


### Bug Fixes

* Add explicit release() for FakeEventTarget ([#3950](https://github.com/shaka-project/shaka-player/issues/3950)) ([f1c1585](https://github.com/shaka-project/shaka-player/commit/f1c1585afb2cfa3eb6b7465c8b32c9bad8e62d15))
* Add missing module export in generated typescript defs ([feefd7b](https://github.com/shaka-project/shaka-player/commit/feefd7b7d1cc318800c8d83de8cce81c57939f7d))
* Avoid WebCrypto randomUUID when CMCD disabled ([4731c76](https://github.com/shaka-project/shaka-player/commit/4731c7677f4f179f19ae647d3bb1edfda40dac53))
* **cea:** make a more robust CEA MP4 parser ([#3965](https://github.com/shaka-project/shaka-player/issues/3965)) ([2687b95](https://github.com/shaka-project/shaka-player/commit/2687b95d5830179c53914a7e903ecfbaced429cc))
* Clear buffer on seek if mediaState is updating ([#3795](https://github.com/shaka-project/shaka-player/issues/3795)) ([9705639](https://github.com/shaka-project/shaka-player/commit/9705639f4514d8d2dbfe5d81a31388f99e6be507)), closes [#3299](https://github.com/shaka-project/shaka-player/issues/3299)
* **cmcd:** Fix Symbol usage in CMCD on Xbox One ([#4073](https://github.com/shaka-project/shaka-player/issues/4073)) ([4005754](https://github.com/shaka-project/shaka-player/commit/400575498f34cf252aaba0bc1367953b8cf44537)), closes [#4072](https://github.com/shaka-project/shaka-player/issues/4072)
* **css:** Fix missing % in calculation ([#4157](https://github.com/shaka-project/shaka-player/issues/4157)) ([1c86195](https://github.com/shaka-project/shaka-player/commit/1c8619582319c46c524807aa4bdff1191b2efc91))
* **dash:** Account for bandwidth before filtering text stream ([#3765](https://github.com/shaka-project/shaka-player/issues/3765)) ([0b04aec](https://github.com/shaka-project/shaka-player/commit/0b04aecdd7ad4184a72b8cf562318b28128344bf)), closes [#3724](https://github.com/shaka-project/shaka-player/issues/3724)
* **dash:** Fix performance regression ([#4064](https://github.com/shaka-project/shaka-player/issues/4064)) ([298b604](https://github.com/shaka-project/shaka-player/commit/298b60481d34bd9d776874fe1b9a8eea05b533d9))
* **dash:** Fix playback of Dolby Atmos ([#4173](https://github.com/shaka-project/shaka-player/issues/4173)) ([d51fe23](https://github.com/shaka-project/shaka-player/commit/d51fe23b7fab99501818c18cc76586e1ec4abcdd)), closes [#4171](https://github.com/shaka-project/shaka-player/issues/4171)
* Fix broken deps file generation on Windows ([#4086](https://github.com/shaka-project/shaka-player/issues/4086)) ([9660ce8](https://github.com/shaka-project/shaka-player/commit/9660ce85df48856b964eebc330c28beba2e3068a)), closes [#4085](https://github.com/shaka-project/shaka-player/issues/4085)
* Fix CMCD property mangling ([#3842](https://github.com/shaka-project/shaka-player/issues/3842)) ([fa5932c](https://github.com/shaka-project/shaka-player/commit/fa5932ca8f604952590734bf8bdc27ad8e69e8d8)), closes [#3839](https://github.com/shaka-project/shaka-player/issues/3839)
* Fix CMCD top bitrate reporting ([#3852](https://github.com/shaka-project/shaka-player/issues/3852)) ([922778a](https://github.com/shaka-project/shaka-player/commit/922778a5ebd2d58ca0c1e804745ca40cda1228bc)), closes [#3851](https://github.com/shaka-project/shaka-player/issues/3851)
* Fix compiler error introduced in [#3864](https://github.com/shaka-project/shaka-player/issues/3864) ([#3906](https://github.com/shaka-project/shaka-player/issues/3906)) ([0635e2c](https://github.com/shaka-project/shaka-player/commit/0635e2c055c13a405048c7696389c1dfc039902f))
* Fix download of some HLS assets ([#3934](https://github.com/shaka-project/shaka-player/issues/3934)) ([36ca820](https://github.com/shaka-project/shaka-player/commit/36ca820877965db8bcc8b9c4b2a428317301bb95))
* Fix duplicate CMCD parameters in HLS live content ([#3875](https://github.com/shaka-project/shaka-player/issues/3875)) ([f27401c](https://github.com/shaka-project/shaka-player/commit/f27401cc151a435ae8fb12be4e86d672c331e1e5)), closes [#3862](https://github.com/shaka-project/shaka-player/issues/3862)
* Fix encryption detection to work around broken platforms ([#4169](https://github.com/shaka-project/shaka-player/issues/4169)) ([c5f474e](https://github.com/shaka-project/shaka-player/commit/c5f474ef983169e6ff29f1594d15a9b50b12d316))
* Fix exception in StreamingEngine for EMSG with HLS ([#3887](https://github.com/shaka-project/shaka-player/issues/3887)) ([48433ab](https://github.com/shaka-project/shaka-player/commit/48433abe74c5f603cf06097e391ffdfa22d64256)), closes [#3886](https://github.com/shaka-project/shaka-player/issues/3886)
* Fix exceptions when quickly shutting down src= on Safari ([#4088](https://github.com/shaka-project/shaka-player/issues/4088)) ([ca08230](https://github.com/shaka-project/shaka-player/commit/ca08230fbe85d66176c7fa1fb4f9782d0ab364fc)), closes [#4087](https://github.com/shaka-project/shaka-player/issues/4087)
* Fix MediaCapabilities polyfill on Safari ([0201f2b](https://github.com/shaka-project/shaka-player/commit/0201f2b7604e76062b68b8b1acbf098faf71d019)), closes [#3696](https://github.com/shaka-project/shaka-player/issues/3696) [#3530](https://github.com/shaka-project/shaka-player/issues/3530)
* Fix memory leak in DASH live streams with inband EventStream ([#3957](https://github.com/shaka-project/shaka-player/issues/3957)) ([b7f04cb](https://github.com/shaka-project/shaka-player/commit/b7f04cb36bda664ec9cf23a081d237793907eaae))
* Fix misdetection of HEVC support on MS Edge ([#3897](https://github.com/shaka-project/shaka-player/issues/3897)) ([dfb3699](https://github.com/shaka-project/shaka-player/commit/dfb369935b9e84fe69a7d38c7904fb0e00dc064a)), closes [#3860](https://github.com/shaka-project/shaka-player/issues/3860)
* Fix missing throughput in CMCD for HLS live ([#3874](https://github.com/shaka-project/shaka-player/issues/3874)) ([df55944](https://github.com/shaka-project/shaka-player/commit/df55944e8f49bdf8e34a679219cd6596ba46c777)), closes [#3873](https://github.com/shaka-project/shaka-player/issues/3873)
* Fix playback failure due to rounding errors ([1cc99c1](https://github.com/shaka-project/shaka-player/commit/1cc99c1241c89b5fb5a989dd52ff0b9a9753b65f)), closes [#3717](https://github.com/shaka-project/shaka-player/issues/3717)
* Fix playRangeEnd for certain content ([#4068](https://github.com/shaka-project/shaka-player/issues/4068)) ([5c81f3b](https://github.com/shaka-project/shaka-player/commit/5c81f3bddb9e48431556f4d622364043fee4ea80)), closes [#4026](https://github.com/shaka-project/shaka-player/issues/4026)
* Fix support for TTAF1 namespace (old version of TTML) ([#3864](https://github.com/shaka-project/shaka-player/issues/3864)) ([771619f](https://github.com/shaka-project/shaka-player/commit/771619ff0ef8ba0e3da9569ded3894b428d03c58)), closes [#3009](https://github.com/shaka-project/shaka-player/issues/3009)
* Fix usage of Shaka without polyfills ([dfc44cb](https://github.com/shaka-project/shaka-player/commit/dfc44cbca6b95eb137882075cb8bf02cfc73a9d3))
* **hls:** Fixed buffering issue with live HLS ([#4002](https://github.com/shaka-project/shaka-player/issues/4002)) ([c438e85](https://github.com/shaka-project/shaka-player/commit/c438e857f2f122eb45899148e067d68ffec3477c))
* **HLS:** skip whitespace in attributes ([#3884](https://github.com/shaka-project/shaka-player/issues/3884)) ([ea6c02a](https://github.com/shaka-project/shaka-player/commit/ea6c02aece1510598a898c235e66335d20eabedb))
* **hls:** Support playing media playlists directly ([#4080](https://github.com/shaka-project/shaka-player/issues/4080)) ([48dd205](https://github.com/shaka-project/shaka-player/commit/48dd20562c2226f61cc753a922629e44c1866f6d)), closes [#3536](https://github.com/shaka-project/shaka-player/issues/3536)
* **image:** Fix HLS image track issues ([264c842](https://github.com/shaka-project/shaka-player/commit/264c84249684ee809f53fd4117f9aab4e0a599ac)), closes [#3840](https://github.com/shaka-project/shaka-player/issues/3840)
* **image:** Fix thumbnails issues ([#3858](https://github.com/shaka-project/shaka-player/issues/3858)) ([087a9b4](https://github.com/shaka-project/shaka-player/commit/087a9b489b030aa0dc80011ca4e0a0c7a4124ecd))
* **offline:** Clean up orphaned segments on abort ([#4177](https://github.com/shaka-project/shaka-player/issues/4177)) ([c07447f](https://github.com/shaka-project/shaka-player/commit/c07447f00e9095020890366695561b71b045e55a))
* **offline:** Speed up offline storage by ~87% ([#4176](https://github.com/shaka-project/shaka-player/issues/4176)) ([c1c9613](https://github.com/shaka-project/shaka-player/commit/c1c96135120480afc9615713812eecc4a51f153b)), closes [#4166](https://github.com/shaka-project/shaka-player/issues/4166)
* **performance:** Eliminate use of ES6 generators ([#4092](https://github.com/shaka-project/shaka-player/issues/4092)) ([57c7324](https://github.com/shaka-project/shaka-player/commit/57c73241a0e8ce1615f7b3aca4c3ad8f69b7e8c2)), closes [#4062](https://github.com/shaka-project/shaka-player/issues/4062)
* Revert "Add missing module export in generated typescript defs" ([#4175](https://github.com/shaka-project/shaka-player/issues/4175)) ([fe4f5c6](https://github.com/shaka-project/shaka-player/commit/fe4f5c6e19214d6cf4d42da9430de03040532bab)), closes [#4167](https://github.com/shaka-project/shaka-player/issues/4167)
* Select first of identical audio streams ([#3869](https://github.com/shaka-project/shaka-player/issues/3869)) ([a6d8610](https://github.com/shaka-project/shaka-player/commit/a6d8610241dc7c8abd56cf7f0d48993d6139dcae))
* Support multiple chapter tracks with same language ([#3868](https://github.com/shaka-project/shaka-player/issues/3868)) ([8c626ae](https://github.com/shaka-project/shaka-player/commit/8c626aec238c01ebad7ccd06c9313e4f2e99d383)), closes [#3597](https://github.com/shaka-project/shaka-player/issues/3597)
* **text:** Fix caption overlap. ([bf67d87](https://github.com/shaka-project/shaka-player/commit/bf67d87387b1dfc4d3d8e0661bfe4efb1e4083b2)), closes [#3850](https://github.com/shaka-project/shaka-player/issues/3850) [#3741](https://github.com/shaka-project/shaka-player/issues/3741)
* **text:** Fix webvtt offset in sequence mode ([#3955](https://github.com/shaka-project/shaka-player/issues/3955)) ([a4e9267](https://github.com/shaka-project/shaka-player/commit/a4e926772e1b754fe968ee6f97490f08a40fe535)), closes [#2337](https://github.com/shaka-project/shaka-player/issues/2337)
* **text:** Inherit alignment from regions. ([e9df8fb](https://github.com/shaka-project/shaka-player/commit/e9df8fb10c3752cb833e89c8ac793241497e29b6))
* **text:** Made nested cues inherit region ([#3837](https://github.com/shaka-project/shaka-player/issues/3837)) ([3ff48cb](https://github.com/shaka-project/shaka-player/commit/3ff48cba9b28a29e8decc11898e326d7918bc8f4)), closes [#3743](https://github.com/shaka-project/shaka-player/issues/3743)
* **text:** Remove caption wrapper bgColor ([#3838](https://github.com/shaka-project/shaka-player/issues/3838)) ([0117441](https://github.com/shaka-project/shaka-player/commit/0117441bb06e0325b84666d2a5a76c0c2de81725)), closes [#3745](https://github.com/shaka-project/shaka-player/issues/3745)
* **ttml:** Center subtitles by default ([#4023](https://github.com/shaka-project/shaka-player/issues/4023)) ([f2f24d5](https://github.com/shaka-project/shaka-player/commit/f2f24d528f71e59c81d6172c24da2f412ca18d70))
* **UI:** Add cursor pointer to range elements ([#4059](https://github.com/shaka-project/shaka-player/issues/4059)) ([33e8400](https://github.com/shaka-project/shaka-player/commit/33e84009dc9f6d48884ecfc2f66eeb285f60d05a)), closes [#3220](https://github.com/shaka-project/shaka-player/issues/3220)
* **UI:** Fix text UI not updating when text is disabled ([#3867](https://github.com/shaka-project/shaka-player/issues/3867)) ([9f53d39](https://github.com/shaka-project/shaka-player/commit/9f53d394279066f29a2d391b6964cba11c4a3e1e)), closes [#3728](https://github.com/shaka-project/shaka-player/issues/3728)


## Older changelogs:
 - [v3.3.x](https://github.com/shaka-project/shaka-player/blob/v3.3.x/CHANGELOG.md)
 - [v3.2.x](https://github.com/shaka-project/shaka-player/blob/v3.2.x/CHANGELOG.md)
 - [v3.1.x](https://github.com/shaka-project/shaka-player/blob/v3.1.x/CHANGELOG.md)
 - [v3.0.x](https://github.com/shaka-project/shaka-player/blob/v3.0.x/CHANGELOG.md)
 - [ancient](https://github.com/shaka-project/shaka-player/blob/v2.5.x/CHANGELOG.md)
